local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
    Name = "Lights Hub",
    LoadingTitle = "Loading Lights Hub",
    LoadingSubtitle = "by Ryo",
    Theme = "Default",
    ToggleUIKeybind = "K",
    KeySystem = false
})

local MainTab = Window:CreateTab("ğŸ  | Main", nil)
local MainSection = MainTab:CreateSection("Main")

local Slider = MainTab:CreateSlider({
   Name = "Walk Speed",
   Range = {30, 150},
   Increment = 1,
   Suffix = "Speed",
   CurrentValue = 35,
   Flag = "Slider1", -- A flag is the identifier for the configuration file, make sure every element has a different flag if you're using configuration saving to ensure no overlaps
   Callback = function(Value)
   game.Players.LocalPlayer.Character.Humanoid.WalkSpeed = Value --workspace.isu002.Humanoid
   end, 
})

local Slider = MainTab:CreateSlider({
   Name = "Jump Height",
   Range = {50, 200},
   Increment = 1,
   Suffix = "Height",
   CurrentValue = 50,
   Flag = "Slider2", -- A flag is the identifier for the configuration file, make sure every element has a different flag if you're using configuration saving to ensure no overlaps
   Callback = function(Value)
   game.Players.LocalPlayer.Character.Humanoid.JumpPower = Value --workspace.isu002.Humanoid
   end, 
})

--Anti AFK
local bb = game:service'VirtualUser'
local player = game.Players.LocalPlayer
local afkConnection

local Toggle = MainTab:CreateToggle({
   Name = "Anti AFK",
   CurrentValue = false,
   Flag = "Toggle1", -- A flag is the identifier for the configuration file, make sure every element has a different flag if you're using configuration saving to ensure no overlaps
   Callback = function(Value)

    if Value then
           -- å½“å¼€å¯æ—¶ï¼Œå…³æ‰æ¸¸æˆé‡Œçš„ AFK MODE
           game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
               ["Value"] = false,
               ["Path"] = {
                   [1] = "Settings",
                   [2] = "AFK_MODE",
               },
               ["Action"] = "Settings",
           })

           -- å¯åŠ¨ Anti AFK
           afkConnection = player.Idled:Connect(function()
               bb:CaptureController()
               bb:ClickButton2(Vector2.new())
               wait(2)
           end)

       else
           -- å…³é—­ Anti AFKï¼Œä¸æ”¹æ¸¸æˆé‡Œçš„ AFK_MODE
           if afkConnection then
                afkConnection:Disconnect()
                afkConnection = nil
           end
       end
   end,
})


--Farm
local mobNames = {}
local mobMap = {}

local FarmTab = Window:CreateTab("ğŸŒ¾ | Farm", nil)
local FarmSection = FarmTab:CreateSection("Farm")

local AutoFarmMobsListDropdown = FarmTab:CreateDropdown({
   Name = "Mobs List",
   Options = {"Option 1", "Option 2"},
   CurrentOption = {"nil"},
   MultipleOptions = true,
   Flag = "Dropdown1",
   Callback = function(Options)
       -- å½“é€‰æ‹© mobs æ—¶è§¦å‘
   end,
})

local ScanMobsButton = FarmTab:CreateButton({
   Name = "Refresh Mobs List",
   Callback = function()
      mobNames = {}
      mobMap = {}

      local monstersFolder = workspace:FindFirstChild("Debris") and workspace.Debris:FindFirstChild("Monsters")
      if not monstersFolder then
         warn("âš ï¸ æ²¡æ‰¾åˆ° workspace.Debris.Monsters")
         return
      end

      for _, mob in pairs(monstersFolder:GetChildren()) do
         if mob and mob:IsA("Model") then
            local mobsname = mob:GetAttribute("Title")
            local mobsrank = mob:GetAttribute("Rank")

            -- Debug è¾“å‡º
            print(string.format("ğŸ§Ÿ %s | Title=%s | Rank=%s", mob.Name, tostring(mobsname), tostring(mobsrank)))

            -- å¦‚æœæ²¡æœ‰ titleï¼Œç”¨ mob.Name
            if not mobsname or mobsname == "" then
               mobsname = mob.Name
            end

            -- æ‹¼æ¥
            local mobsdisplayname
            if mobsrank and mobsrank ~= "" then
               mobsdisplayname = "[" .. tostring(mobsrank) .. "] " .. tostring(mobsname)
            else
               mobsdisplayname = tostring(mobsname)
            end

            -- ç¡®è®¤æ‹¼æ¥ç»“æœ
            print("âœ… mobsdisplayname =", mobsdisplayname)

            -- å»é‡
            if not mobMap[mobsdisplayname] then
               mobMap[mobsdisplayname] = {}
               table.insert(mobNames, mobsdisplayname)
            end
            table.insert(mobMap[mobsdisplayname], mob)
         end
      end

      -- æ›´æ–° dropdown
      AutoFarmMobsListDropdown:SetOptions(mobNames)
   end,
})
