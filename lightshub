local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
    Name = "Lights Hub",
    LoadingTitle = "Loading Lights Hub",
    LoadingSubtitle = "by Ryo",
    Theme = "Default",
    ToggleUIKeybind = "K",
    KeySystem = false
})

local MainTab = Window:CreateTab("ğŸ  | Main", nil)
local MainSection = MainTab:CreateSection("Main")

local Slider = MainTab:CreateSlider({
   Name = "Walk Speed",
   Range = {30, 150},
   Increment = 1,
   Suffix = "Speed",
   CurrentValue = 35,
   Flag = "Slider1", -- A flag is the identifier for the configuration file, make sure every element has a different flag if you're using configuration saving to ensure no overlaps
   Callback = function(Value)
   game.Players.LocalPlayer.Character.Humanoid.WalkSpeed = Value --workspace.isu002.Humanoid
   end, 
})

local Slider = MainTab:CreateSlider({
   Name = "Jump Height",
   Range = {50, 200},
   Increment = 1,
   Suffix = "Height",
   CurrentValue = 50,
   Flag = "Slider2", -- A flag is the identifier for the configuration file, make sure every element has a different flag if you're using configuration saving to ensure no overlaps
   Callback = function(Value)
   game.Players.LocalPlayer.Character.Humanoid.JumpPower = Value --workspace.isu002.Humanoid
   end, 
})

--Anti AFK
local bb = game:service'VirtualUser'
local player = game.Players.LocalPlayer
local afkConnection

local Toggle = MainTab:CreateToggle({
   Name = "Anti AFK",
   CurrentValue = false,
   Flag = "Toggle1", -- A flag is the identifier for the configuration file, make sure every element has a different flag if you're using configuration saving to ensure no overlaps
   Callback = function(Value)

    if Value then
           -- å½“å¼€å¯æ—¶ï¼Œå…³æ‰æ¸¸æˆé‡Œçš„ AFK MODE
           game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
               ["Value"] = false,
               ["Path"] = {
                   [1] = "Settings",
                   [2] = "AFK_MODE",
               },
               ["Action"] = "Settings",
           })

           -- å¯åŠ¨ Anti AFK
           afkConnection = player.Idled:Connect(function()
               bb:CaptureController()
               bb:ClickButton2(Vector2.new())
               wait(2)
           end)

       else
           -- å…³é—­ Anti AFKï¼Œä¸æ”¹æ¸¸æˆé‡Œçš„ AFK_MODE
           if afkConnection then
                afkConnection:Disconnect()
                afkConnection = nil
           end
       end
   end,
})


-- Farm
local mobNames = {}
local mobMap = {}

local FarmTab = Window:CreateTab("ğŸŒ¾ | Farm", nil)
local FarmSection = FarmTab:CreateSection("Farm")

local AutoFarmMobsListDropdown = FarmTab:CreateDropdown({
   Name = "Mobs List",
   Options = {"None"},
   CurrentOption = {"nil"},
   MultipleOptions = true,
   Flag = "Dropdown1",
   Callback = function(Options)
      -- å½“é€‰æ‹©å‘ç”Ÿå˜åŒ–æ—¶æ‰§è¡Œ
   end,
})

local ScanMobsButton = FarmTab:CreateButton({
   Name = "Refresh Mobs List",
   Callback = function()
      mobNames = {}
      mobMap = {}

      local monstersFolder = workspace:FindFirstChild("Debris") and workspace.Debris:FindFirstChild("Monsters")
      if not monstersFolder then
         return
      end

      for _, mob in pairs(monstersFolder:GetChildren()) do
         if mob and mob:IsA("Model") then
            local mobTitle = mob:GetAttribute("Title")
            local mobRank = mob:GetAttribute("Rank")

            -- ç¡®ä¿æœ‰ Title æ‰å¤„ç†
            if mobTitle then
               local displayName

               if mobRank and mobRank ~= "" then
                  displayName = string.format("[%s] %s", mobRank, mobTitle)
               else
                  displayName = mobTitle
               end

               -- å»é‡å¹¶è®°å½•
               if not mobMap[displayName] then
                  mobMap[displayName] = {}
                  table.insert(mobNames, displayName)
               end
               table.insert(mobMap[displayName], mob)
            end
         end
      end

      -- æ›´æ–° Dropdown åˆ—è¡¨
      AutoFarmMobsListDropdown:Refresh(mobNames)
   end,
})
