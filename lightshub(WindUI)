local WindUI = loadstring(game:HttpGet("https://github.com/Footagesus/WindUI/releases/latest/download/main.lua"))()

local Window = WindUI:CreateWindow({
    Title = "Lights Hub",
    Author = "by Ryo",
    Folder = "LightsHub",
    
    -- ‚Üì This all is Optional. You can remove it.
    Size = UDim2.fromOffset(580, 460),
    MinSize = Vector2.new(560, 350),
    MaxSize = Vector2.new(850, 560),
    Transparent = true,
    Theme = "Dark",
    Resizable = true,
    SideBarWidth = 200,
    BackgroundImageTransparency = 0.42,
    HideSearchBar = true,
    ScrollBarEnabled = false,
})
    
    -- ‚Üì Optional. You can remove it.
    --[[ You can set 'rbxassetid://' or video to Background.
        'rbxassetid://':
            Background = "rbxassetid://", -- rbxassetid
        Video:
            Background = "video:YOUR-RAW-LINK-TO-VIDEO.webm", -- video 
    --]]
    
    
    --       remove this all, 
    -- !  ‚Üì  if you DON'T need the key system
    --[[KeySystem = { 
        -- ‚Üì Optional. You can remove it.
        Key = { "1234", "5678" },
        
        Note = "Example Key System.",
        
        -- ‚Üì Optional. You can remove it.
        Thumbnail = {
            Image = "rbxassetid://",
            Title = "Thumbnail",
        },
        
        -- ‚Üì Optional. You can remove it.
        URL = "YOUR LINK TO GET KEY (Discord, Linkvertise, Pastebin, etc.)",
        
        -- ‚Üì Optional. You can remove it.
        SaveKey = false, -- automatically save and load the key.
        
        -- ‚Üì Optional. You can remove it.
        -- API = {} ‚Üê Services. Read about it below ‚Üì
    },
})--]]

-- üß† ÂàùÂßãÂåñÂÖ®Â±ÄÂèòÈáè
getgenv().UserSetWalkSpeed = nil
getgenv().UserSetJumpPower = nil
getgenv().SpeedMonitorRunning = false

-- ‚úÖ ÊçïÊçâÂΩìÂâçËßíËâ≤ WalkSpeed / JumpPower
local player = game.Players.LocalPlayer

local function captureCurrentStats()
    local char = player.Character or player.CharacterAdded:Wait()
    local humanoid = char:WaitForChild("Humanoid")
    getgenv().CurrentWalkSpeed = humanoid.WalkSpeed
    getgenv().CurrentJumpPower = humanoid.JumpPower
    print("[DEBUG] ÊçïÊçâÂΩìÂâçÈÄüÂ∫¶:", getgenv().CurrentWalkSpeed, " Ë∑≥Ë∑ÉÂäõ:", getgenv().CurrentJumpPower)
end

-- ‚úÖ Áª¥ÊåÅËÆæÂÆöÁöÑÈÄüÂ∫¶‰∏éË∑≥Ë∑ÉÂäõ
task.spawn(function()
    getgenv().SpeedMonitorRunning = true
    while getgenv().SpeedMonitorRunning do
        pcall(function()
            local char = player.Character
            local humanoid = char and char:FindFirstChild("Humanoid")
            if humanoid then
                if getgenv().UserSetWalkSpeed and humanoid.WalkSpeed ~= getgenv().UserSetWalkSpeed then
                    humanoid.WalkSpeed = getgenv().UserSetWalkSpeed
                end
                if getgenv().UserSetJumpPower and humanoid.JumpPower ~= getgenv().UserSetJumpPower then
                    humanoid.JumpPower = getgenv().UserSetJumpPower
                end
            end
        end)
        task.wait(0.3)
    end
end)

--Main Tab
local MainSection = Window:Section({
    Title = "üè† | Main",
}) 

local PlayerTab = MainSection:Tab({
        Title = "Player",
    })

-------------------------------------------------
-- Áé©ÂÆ∂ËÆæÂÆöÔºàWalkSpeed„ÄÅJumpÔºâ
-------------------------------------------------
PlayerTab:Slider({
        Flag = "Slider1",
        Title = "Walk Speed",
        Desc = "Adjust Your Walk Speed",
        Step = 1,
        Value = {
            Min = 30,
            Max = 150,
            Default = getgenv().CurrentWalkSpeed or 35,
        },
        Callback = function(Value)
        local char = player.Character
        local humanoid = char and char:FindFirstChild("Humanoid")
        if humanoid then
            humanoid.WalkSpeed = Value
            getgenv().UserSetWalkSpeed = Value
            print("[DEBUG] Áé©ÂÆ∂ËÆæÂÆö WalkSpeed:", Value)
        end
    end,
    })

PlayerTab:Space()

PlayerTab:Slider({
    Flag = "Slider2",
    Title = "Jump Height",
    Desc = "Adjust Your Jump Height",
    Step = 1,
    Value = {
        Min = 50,
        Max = 200,
        Default = getgenv().CurrentJumpPower or 50,
    },
    Callback = function(Value)
        local char = player.Character
        local humanoid = char and char:FindFirstChild("Humanoid")
        if humanoid then
            humanoid.JumpPower = Value
            getgenv().UserSetJumpPower = Value
            print("[DEBUG] Áé©ÂÆ∂ËÆæÂÆö JumpPower:", Value)
        end
    end,
})


local UserTab = MainSection:Tab({
        Title = "User",
    })
-------------------------------------------------
-- üõ°Ô∏è Anti AFK
-------------------------------------------------

local bb = game:service'VirtualUser'
local afkConnection

UserTab:Toggle({
    Flag = "Toggle1",
    Title = "Anti AFK",
    Desc = "Prevents you from being kicked for being AFK",
    Type = "Checkbox",
    Value = false,
    Callback = function(state)
        if state then
            game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                ["Value"] = false,
                ["Path"] = {"Settings", "AFK_MODE"},
                ["Action"] = "Settings",
            })
            afkConnection = player.Idled:Connect(function()
                bb:CaptureController()
                bb:ClickButton2(Vector2.new())
                wait(2)
            end)
        else
            if afkConnection then
                afkConnection:Disconnect()
                afkConnection = nil
            end
        end
    end,
})

-------------------------------------------------
-- üõë Anti Public ServerÔºàÂäüËÉΩÂÆåÊï¥Êï¥ÂêàÔºâ
-------------------------------------------------

getgenv().AntiPublicEnabled = false
getgenv().AntiPublicWhitelist = {}

--‚ú® Â∞ÜËæìÂÖ•Ê°ÜÂÜÖÂÆπ ‚Üí Ë°®ËΩ¨Êç¢
local function updateWhitelist(text)
    local list = {}
    for name in string.gmatch(text, "([^,%s]+)") do
        table.insert(list, name)
    end
    getgenv().AntiPublicWhitelist = list
    print("[DEBUG] Whitelist Updated:", table.concat(list, ", "))
end

--‚ú® ‰∏ªÂäüËÉΩÔºöÊ£ÄÊµãÊòØÂê¶Ë¶Å kick Ëá™Â∑±
local function checkServerPlayers()
    while getgenv().AntiPublicEnabled do
        task.wait(3)

        if not getgenv().AntiPublicEnabled then break end

        local Players = game:GetService("Players")
        local others = {}
        local whitelistFound = false

        for _, p in ipairs(Players:GetPlayers()) do
            if p ~= player then
                local name = p.Name

                -- Ê£ÄÊü•ÊòØ‰∏çÊòØ whitelist ‰∫∫
                local isWhitelisted = table.find(getgenv().AntiPublicWhitelist, name) ~= nil

                if isWhitelisted then
                    whitelistFound = true
                else
                    table.insert(others, name)
                end
            end
        end

        -- üü¢ Â¶ÇÊûú whitelist ÈáåÈù¢ÁöÑ‰∫∫Âú®Ôºå‰ΩÜ**Ê≤°ÊúâÂÖ∂‰ªñ‰∫∫** ‚Üí ‰∏ç kick
        if whitelistFound and #others == 0 then
            continue
        end

        -- ‚ùå ÊúâÈôåÁîüÁé©ÂÆ∂Ôºàothers > 0Ôºâ‚Üí Kick
        if #others > 0 then
            local reason = "Anti Public Server: Detected Non-Whitelist Player(s): " .. table.concat(others, ", ")
            player:Kick(reason)
            break
        end
    end
end

UserTab:Space()

--üü¢ Anti Public Server Toggle
UserTab:Toggle({
    Flag = "Toggle2",
    Title = "Anti Public Server",
    Desc = "Automatically kicks you from public servers when non-whitelisted players are detected.",
    Value = false,
    Callback = function(state)
        getgenv().AntiPublicEnabled = state

        if state then
            print("[DEBUG] Anti Public Server Enabled")
            task.spawn(checkServerPlayers)
        else
            print("[DEBUG] Anti Public Server Disabled")
        end
    end,
})

UserTab:Space()

--üìù Whitelist ËæìÂÖ•Ê°Ü
UserTab:Input({
    Flag = "Input1",
    Title = "Whitelist Player",
    Desc = "Enter player username (Not Display Name) separated by commas to whitelist them.",
    Value = "",
    Type = "Textarea",
    Placeholder = "User1, User2, User3",
    Callback = function(input)
        updateWhitelist(input)
    end,
})


local RankingTab = MainSection:Tab({
        Title = "Ranking",
    })

-- ‚úÖ Auto Rank Up
RankingTab:Toggle({
    Flag = "RankUp1",
    Title = "Auto Rank Up",
    Desc = "Automatically rank up",
    Default = false,
    Callback = function(state)
        if state then
            getgenv().AutoRankUpRunning = true
            task.spawn(function()
                while getgenv().AutoRankUpRunning do
                    pcall(function()
                        game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                            ["Upgrading_Name"] = "Rank",
                            ["Action"] = "_Upgrades",
                            ["Upgrade_Name"] = "Rank_Up",
                        })
                    end)
                    task.wait(10)
                end
            end)
        else
            getgenv().AutoRankUpRunning = false
        end
    end,
})

--Auto Prestige
RankingTab:Toggle({
    Flag = "AutoPrestige1",
    Title = "Auto Prestige",
    Desc = "Automatically prestige levels",
    Default = false,
    Callback = function(state)
        if state then
            getgenv().AutoPrestigeRunning = true
            task.spawn(function()
                while getgenv().AutoPrestigeRunning do
                    pcall(function()
                        -- ‚úÖ Ëá™Âä®ÂçáÁ∫ßÂ£∞Êúõ
                        game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Action"] = "Level_Up_Prestige",
                        })
                    end)

                    task.wait(5)
                end
            end)
        else
            getgenv().AutoPrestigeRunning = false
        end
    end,
})

local CodesTab = MainSection:Tab({
        Title = "Codes",
    })

-- ‚úÖ Redeem Codes Button
CodesTab:Button({
    Flag = "RedeemCodes1",
    Title = "Redeem All Codes",
    Desc = "Redeem all codes automatically.",
    Locked = false,
    Callback = function()
    local codes = {"SlashX", "Derp", "Heyyyo", "Update22", "365KLikes", "650KFav", "655KFav", "Update22P2", "370KLikes", "660KFav", "665KFav", "HalloweenPart3", "HalloweenPart3OCD", "HalloweenEyes", "HalloweenEyes2", "Update22P3", "670KFav", "675KFav", "200MVisits", "LastHalloweenCode", "Update23", "680KFav", "685KFav", "375KLikes", "215MVisits", "Update23Restart", "Update23P2", "690KFav", "695KFav", "380KLikes", "Update23Code", "Update24", "710KFav", "715KFav", "CodeGeass", "385KLikes", "SecretCodeCookies", "Update24P2", "720KFav", "725KFav", "230MVisits", "Update24Part2Code", "Update24P3", "730KFav", "735KFav", "390KLikes", "235MVisits", "Update25", "740KFav", "745KFav", "240MVisits", "StoneCode"}
    for _, code in ipairs(codes) do
         game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
            ["Action"] = "_Redeem_Code", ["Text"] = code
         })
                task.wait(0.3)
            end
   end,
})


local QuestTab = MainSection:Tab({
        Title = "Quests",
    })

--Auto Get Daily Quest
QuestTab:Toggle({
    Flag = "DailyQuest1",
   Title = "Auto Get Daily Quest",
   Desc = "Automatically accept daily quests",
   Default = false,
   Callback = function(state)
   local dailyquests = {"2001","2002","2003","2004","2005","2006","2007"}
   if state then
    getgenv().AutoDailyQuestRunning = true
    task.spawn(function()
        while getgenv().AutoDailyQuestRunning do
            pcall(function()
                for _, dailyquest in ipairs(dailyquests) do
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Id"] = dailyquest,
                        ["Type"] = "Accept",
                        ["Action"] = "_Quest",
                    })
                    task.wait(0.3)
                   end
            end)
            task.wait(5)

        end
    end)
   else
    getgenv().AutoDailyQuestRunning = false
   end
end,
})

local CollectTab = MainSection:Tab({
        Title = "Collect",
    })

--Auto Collect Hourly and Daily Rewards
CollectTab:Toggle({
    Flag = "HourlyDailyRewards1",
    Title = "Auto Collect Hourly and Daily Rewards",
    Desc = "Automatically collect hourly and daily rewards",
    Default = false,
    Callback = function(state)
        if state then
            getgenv().HourlyDailyRewardsRunning = true
            task.spawn(function()
                while getgenv().HourlyDailyRewardsRunning do
                    pcall(function()
                        -- ‚úÖ Ëá™Âä®È¢ÜÂèñÊØèÂ∞èÊó∂Â•ñÂä±
                        game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                            ["Value"] = true,
                            ["Path"] = {
                                [1] = "Settings",
                                [2] = "Auto_Hourly_Rewards",
                            },
                            ["Action"] = "Settings",
                        })

                        -- ‚úÖ Ëá™Âä®È¢ÜÂèñÊØèÊó•Â•ñÂä±
                        game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                            ["Value"] = true,
                            ["Path"] = {
                                [1] = "Settings",
                                [2] = "Auto_Daily_Rewards",
                            },
                            ["Action"] = "Settings",
                        })
                    end)

                    -- ÊØè 5 ÂàÜÈíüÊ£ÄÊü•‰∏ÄÊ¨°Ôºà300 ÁßíÔºâ
                    task.wait(5)
                end
            end)
        else
            getgenv().HourlyDailyRewardsRunning = false
        end
    end,
})

--Auto Claim Group Chest
CollectTab:Toggle({
    Flag = "ClaimGroupChest1",
    Title = "Auto Claim Group Chest",
    Desc = "Automatically claim group chest",
    Default = false,
    Callback = function(state)
        if state then
            getgenv().ClaimGroupChestRunning = true
            task.spawn(function()
                while getgenv().ClaimGroupChestRunning do
                    pcall(function()
                        -- ‚úÖ Ëá™Âä®ÂçáÁ∫ßÂ£∞Êúõ
                        game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Action"] = "_Chest_Claim",
                        ["Name"] = "Group",
                        })
                    end)

                    task.wait(60)
                end
            end)
        else
            getgenv().ClaimGroupChestRunning = false
        end
    end,
})

--Auto Claim Premium Chest
CollectTab:Toggle({
    Flag = "ClaimPremiumChest1",
    Title = "Auto Claim Premium Chest",
    Desc = "Automatically claim premium chest",
    Default = false,
    Callback = function(state)
        if state then
            getgenv().ClaimPremiumChestRunning = true
            task.spawn(function()
                while getgenv().ClaimPremiumChestRunning do
                    pcall(function()
                        -- ‚úÖ Ëá™Âä®ÂçáÁ∫ßÂ£∞Êúõ
                        game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Action"] = "_Chest_Claim",
                        ["Name"] = "Premium",
                        })
                    end)

                    task.wait(60)
                end
            end)
        else
            getgenv().ClaimPremiumChestRunning = false
        end
    end,
})

--Auto Claim VIP Chest
CollectTab:Toggle({
    Flag = "ClaimVIPChest1",
    Title = "Auto Claim VIP Chest",
    Desc = "Automatically claim VIP chest",
    Default = false,
    Callback = function(state)
        if state then
            getgenv().ClaimVIPChestRunning = true
            task.spawn(function()
                while getgenv().ClaimVIPChestRunning do
                    pcall(function()
                        -- ‚úÖ Ëá™Âä®ÂçáÁ∫ßÂ£∞Êúõ
                        game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Action"] = "_Chest_Claim",
                        ["Name"] = "Vip",
                        })
                    end)

                    task.wait(60)
                end
            end)
        else
            getgenv().ClaimVIPChestRunning = false
        end
    end,
})

--Auto Claim Daily Chest
CollectTab:Toggle({
    Name = "Auto Claim Daily Chest",
    Title = "Auto Claim Daily Chest",
    Desc = "Automatically claim daily chest",
    Default = false,
    Callback = function(state)
        if state then
            getgenv().ClaimDailyChestRunning = true
            task.spawn(function()
                while getgenv().ClaimDailyChestRunning do
                    pcall(function()
                        -- ‚úÖ Ëá™Âä®ÂçáÁ∫ßÂ£∞Êúõ
                        game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Action"] = "_Chest_Claim",
                        ["Name"] = "Daily",
                        })
                    end)

                    task.wait(60)
                end
            end)
        else
            getgenv().ClaimDailyChestRunning = false
        end
    end,
})

--Auto Find & Collect Punching Machine

--Auto Hero Quests

--Auto Demon Fruits Quest

--Auto Complete Briefcase Quest

--Auto Complete Assassin Knife Quest

--Auto Complete Assassin Pistol Quest


-------------------------------------------------
--üåæ Farm Tab
-------------------------------------------------
local mobNames = {}
local mobMap = {}
local selectedMobs = {}
local player = game.Players.LocalPlayer
local rootPart = player.Character:WaitForChild("HumanoidRootPart")

-- ÂÖ®Â±ÄÊéßÂà∂ÂèòÈáè
getgenv().AutoFarmRunning = false
getgenv().FarmTargetChanged = false
getgenv().InDungeon = false
getgenv().InRaid = false
getgenv().AutoDungeonFarmRunning = false
getgenv().WasAutoFarmRunning = false

--Farm Tab
local FarmTab = Window:Tab({
        Title = "üåæ | Farm",
    })

-- ‚úÖ Mob ÂàóË°® Dropdown
local MobDropdown = FarmTab:Dropdown({
    Flag = "Dropdown1",
    Title = "Mobs List",
    Values = {"None"},
    Value = {"None"},
    Multi = true,
    AllowNone = true,
    Callback = function(option)
        selectedMobs = option or {}
        getgenv().FarmTargetChanged = true
        print("[DEBUG] üéØ Mob target changed:", table.concat(selectedMobs, ", "))
    end,
})

-- ‚úÖ Âà∑Êñ∞ÊåâÈíÆ
local MobRefreshButton = FarmTab:Button({
    Flag = "RefreshButton1",
    Title = "Refresh Mobs List",
    Callback = function()
        mobNames, mobMap, selectedMobs = {}, {}, {}
        local monstersFolder = workspace:FindFirstChild("Debris") and workspace.Debris:FindFirstChild("Monsters")

        if not monstersFolder then
            MobDropdown:Refresh({"None"})
            return
        end

        for _, mob in pairs(monstersFolder:GetChildren()) do
            if mob and mob:IsA("Model") then
                local mobsname = mob:GetAttribute("Title") or mob.Name
                local mobsrank = mob:GetAttribute("Rank")
                local mobsdisplayname = mobsrank and mobsrank ~= "" and string.format("[%s] %s", mobsrank, mobsname) or mobsname
                if not mobMap[mobsdisplayname] then
                    mobMap[mobsdisplayname] = {}
                    table.insert(mobNames, mobsdisplayname)
                end
                table.insert(mobMap[mobsdisplayname], mob)
            end
        end

        if #mobNames == 0 then
            MobDropdown:Refresh({"None"})
        else
            MobDropdown:Refresh(mobNames)
        end
    end,
})

-- ‚úÖ ÊôÆÈÄö Auto Farm ÈÄªËæë
local AutoFarmToggle = FarmTab:Toggle({
    Flag = "AutoFarm1",
    Title = "Auto Farm",
    Default = false,
    Callback = function(state)
        if state then
            getgenv().AutoFarmRunning = true
            getgenv().FarmTargetChanged = true
            getgenv().WasAutoFarmRunning = true
                
            task.spawn(function()
                while getgenv().AutoFarmRunning and not getgenv().InDungeon do
                    if getgenv().FarmTargetChanged then
                        getgenv().FarmTargetChanged = false
                    end

                    local char = player.Character
                    local hrp = char and char:FindFirstChild("HumanoidRootPart")
                    if not hrp then task.wait(1) continue end

                    local monstersFolder = workspace:FindFirstChild("Debris") and workspace.Debris:FindFirstChild("Monsters")
                    if monstersFolder then
                        mobMap = {}
                        for _, mob in pairs(monstersFolder:GetChildren()) do
                            if mob and mob:IsA("Model") then
                                local mobsname = mob:GetAttribute("Title") or mob.Name
                                local mobsrank = mob:GetAttribute("Rank")
                                local mobsdisplayname = mobsrank and mobsrank ~= "" and string.format("[%s] %s", mobsrank, mobsname) or mobsname
                                if not mobMap[mobsdisplayname] then
                                    mobMap[mobsdisplayname] = {}
                                end
                                table.insert(mobMap[mobsdisplayname], mob)
                            end
                        end
                    end

                    for _, mobName in ipairs(selectedMobs) do
                        if not getgenv().AutoFarmRunning or getgenv().FarmTargetChanged or getgenv().InDungeon then break end
                        local mobList = mobMap[mobName]
                        if mobList then
                            for _, mob in ipairs(mobList) do
                                if not getgenv().AutoFarmRunning or getgenv().FarmTargetChanged or getgenv().InDungeon then break end
                                local mobHRP = mob:FindFirstChild("HumanoidRootPart")
                                if mobHRP then
                                    hrp.CFrame = mobHRP.CFrame + Vector3.new(0, 0, 2)
                                    repeat task.wait(0.05) until not mob.Parent or not getgenv().AutoFarmRunning or getgenv().FarmTargetChanged or getgenv().InDungeon
                                end
                            end
                        end
                    end
                    task.wait(0.05)
                end
            end)
        else
            getgenv().AutoFarmRunning = false
            getgenv().FarmTargetChanged = true
            getgenv().WasAutoFarmRunning = false
        end
    end,
})
