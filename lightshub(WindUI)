local Junkie = loadstring(game:HttpGet("https://jnkie.com/sdk/library.lua"))()
Junkie.service = "Test"
Junkie.identifier = "9347"
Junkie.provider = "Choose"

local result = (function()
    getgenv().SCRIPT_KEY = nil
    getgenv().UI_CLOSED = false
    local Players = game:GetService("Players")
    local TweenService = game:GetService("TweenService")
    local UserInputService = game:GetService("UserInputService")
    local Lighting = game:GetService("Lighting")
    local Colors = {
        background = Color3.fromRGB(13, 17, 23),
        surface = Color3.fromRGB(22, 27, 34),
        surfaceLight = Color3.fromRGB(30, 36, 44),
        primary = Color3.fromRGB(88, 166, 255),
        primaryDark = Color3.fromRGB(58, 136, 225),
        primaryGlow = Color3.fromRGB(120, 180, 255),
        accent = Color3.fromRGB(136, 87, 224),
        success = Color3.fromRGB(47, 183, 117),
        successDark = Color3.fromRGB(37, 153, 97),
        successGlow = Color3.fromRGB(67, 203, 137),
        error = Color3.fromRGB(248, 81, 73),
        textPrimary = Color3.fromRGB(230, 237, 243),
        textSecondary = Color3.fromRGB(139, 148, 158),
        textMuted = Color3.fromRGB(110, 118, 129),
        border = Color3.fromRGB(48, 54, 61),
        borderLight = Color3.fromRGB(63, 71, 79),
        glass = Color3.fromRGB(255, 255, 255),
        neonBlue = Color3.fromRGB(0, 229, 255),
        neonPurple = Color3.fromRGB(187, 134, 252)
    }
    
    local function hasFileSystemSupport()
        local hasWritefile = pcall(function() return type(writefile) == "function" end)
        local hasReadfile = pcall(function() return type(readfile) == "function" end)
        local hasIsfile = pcall(function() return type(isfile) == "function" end)
        return hasWritefile and hasReadfile and hasIsfile
    end
    
    local fileSystemSupported = hasFileSystemSupport()
    
    local function saveVerifiedKey(key)
        if not fileSystemSupported then return false end
        local ok = pcall(function()
            writefile("verified_key.txt", key)
        end)
        return ok
    end
    
    local function loadVerifiedKey()
        if not fileSystemSupported then 
            return nil 
        end
        
        local ok, content = pcall(function()
            return readfile("verified_key.txt")
        end)
        
        if not ok or not content then 
            return nil 
        end
        return content
    end
    
    local function clearSavedKey()
        if not fileSystemSupported then return false end
        local ok = pcall(function() delfile("verified_key.txt") end)
        return ok
    end
    

    local function loadUIFactory()
        return function(Colors, Players, TweenService, UserInputService, Lighting)
        local IconAssets = {
            shield = 84528813312016,
            x = 73070135088117,
            key = 128426502701541,
            link = 73034596791310,
            check = 83827110621355
        }
        
        local function createIconImage(name, size, color)
            local id = IconAssets[name]
            if id then
                local img = Instance.new("ImageLabel")
                img.BackgroundTransparency = 1
                img.Size = UDim2.new(0, size or 18, 0, size or 18)
                img.Image = "rbxassetid://" .. tostring(id)
                img.ImageColor3 = color or Color3.fromRGB(255, 255, 255)
                img.ScaleType = Enum.ScaleType.Fit
                if img:IsA("ImageLabel") and img.ResampleMode ~= nil then
                    img.ResampleMode = Enum.ResamplerMode.Default
                end
                return img
            end

            local lbl = Instance.new("TextLabel")
            lbl.BackgroundTransparency = 1
            lbl.Size = UDim2.new(0, size or 18, 0, size or 18)
            lbl.TextScaled = true
            lbl.Font = Enum.Font.SourceSansBold
            lbl.TextColor3 = color or Color3.fromRGB(255, 255, 255)
            lbl.Text = ({ shield = "ðŸ›¡ï¸", key = "ðŸ”‘", link = "ðŸ”—", x = "âœ•", check = "âœ“" })[name] or "ðŸ”˜"
            return lbl
        end
        return function(self)
            if self.gui then
                self.gui:Destroy()
            end
            
            self.gui = Instance.new("ScreenGui")
            self.gui.Name = "JunkieKeySystemUI"
            self.gui.ResetOnSpawn = false
            self.gui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
            self.gui.IgnoreGuiInset = true
            
            local backdrop = Instance.new("Frame")
            backdrop.Name = "Backdrop"
            backdrop.Size = UDim2.new(1, 0, 1, 0)
            backdrop.Position = UDim2.new(0, 0, 0, 0)
            backdrop.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
            backdrop.BackgroundTransparency = 0.4
            backdrop.BorderSizePixel = 0
            backdrop.Parent = self.gui
            
            local blur = Instance.new("BlurEffect")
            blur.Size = 16
            blur.Name = "JunkieUIBlur"
            blur.Parent = Lighting
            
            local container = Instance.new("Frame")
            container.Name = "Container"
            
            local isMobile = UserInputService.TouchEnabled and not UserInputService.KeyboardEnabled
            local viewportSize = workspace.CurrentCamera.ViewportSize
            
            if isMobile then
                container.Size = UDim2.new(0.6, 0, 0, math.min(320, viewportSize.Y * 0.8))
                container.Position = UDim2.new(0.5, 0, 0.5, 0)
                container.AnchorPoint = Vector2.new(0.5, 0.5)
            else
                container.Size = UDim2.new(0, 580, 0, 320)
                container.Position = UDim2.new(0.5, 0, 0.5, 0)
                container.AnchorPoint = Vector2.new(0.5, 0.5)
            end
            
            container.BackgroundColor3 = Colors.surface
            container.BorderSizePixel = 0
            container.Parent = backdrop
            
            container:SetAttribute("IsMobile", isMobile)
            
            local containerCorner = Instance.new("UICorner")
            containerCorner.CornerRadius = UDim.new(0, 14)
            containerCorner.Parent = container
            
            local containerStroke = Instance.new("UIStroke")
            containerStroke.Color = Colors.border
            containerStroke.Thickness = 1
            containerStroke.Transparency = 0.3
            containerStroke.Parent = container
            
            local shadow = Instance.new("Frame")
            shadow.Name = "Shadow"
            shadow.Size = UDim2.new(1, 40, 1, 40)
            shadow.Position = UDim2.new(0.5, 0, 0.5, 6)
            shadow.AnchorPoint = Vector2.new(0.5, 0.5)
            shadow.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
            shadow.BackgroundTransparency = 0.7
            shadow.BorderSizePixel = 0
            shadow.ZIndex = 0
            shadow.Parent = backdrop
            
            local shadowCorner = Instance.new("UICorner")
            shadowCorner.CornerRadius = UDim.new(0, 18)
            shadowCorner.Parent = shadow
            
            local glowFrame = Instance.new("Frame")
            glowFrame.Name = "GlowEffect"
            glowFrame.Size = UDim2.new(1, 60, 1, 60)
            glowFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
            glowFrame.AnchorPoint = Vector2.new(0.5, 0.5)
            glowFrame.BackgroundColor3 = Colors.primary
            glowFrame.BackgroundTransparency = 0.95
            glowFrame.BorderSizePixel = 0
            glowFrame.ZIndex = -1
            glowFrame.Parent = backdrop
            
            local glowCorner = Instance.new("UICorner")
            glowCorner.CornerRadius = UDim.new(0, 30)
            glowCorner.Parent = glowFrame

            local glowTween = TweenService:Create(glowFrame,
                TweenInfo.new(4, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut, -1, true),
                {BackgroundTransparency = 0.9, Size = UDim2.new(1, 80, 1, 80)}
            )
            glowTween:Play()
            
            local glassOverlay = Instance.new("Frame")
            glassOverlay.Name = "GlassOverlay"
            glassOverlay.Size = UDim2.new(1, 0, 1, 0)
            glassOverlay.Position = UDim2.new(0, 0, 0, 0)
            glassOverlay.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
            glassOverlay.BackgroundTransparency = 0.98
            glassOverlay.BorderSizePixel = 0
            glassOverlay.ZIndex = 1
            glassOverlay.Parent = container
            
            local glassCorner = Instance.new("UICorner")
            glassCorner.CornerRadius = UDim.new(0, 14)
            glassCorner.Parent = glassOverlay
            
            local glassGradient = Instance.new("UIGradient")
            glassGradient.Color = ColorSequence.new{
                ColorSequenceKeypoint.new(0, Color3.fromRGB(255, 255, 255)),
                ColorSequenceKeypoint.new(0.5, Color3.fromRGB(255, 255, 255)),
                ColorSequenceKeypoint.new(1, Color3.fromRGB(200, 200, 200))
            }
            glassGradient.Rotation = 45
            glassGradient.Transparency = NumberSequence.new{
                NumberSequenceKeypoint.new(0, 0.96),
                NumberSequenceKeypoint.new(0.5, 0.98),
                NumberSequenceKeypoint.new(1, 1)
            }
            glassGradient.Parent = glassOverlay
            
            local topBar = Instance.new("Frame")
            topBar.Name = "TopBar"
            topBar.Size = UDim2.new(1, 0, 0, 45)
            topBar.Position = UDim2.new(0, 0, 0, 0)
            topBar.BackgroundColor3 = Colors.background
            topBar.BorderSizePixel = 0
            topBar.ZIndex = 10
            topBar.Parent = container
            
            local topBarCorner = Instance.new("UICorner")
            topBarCorner.CornerRadius = UDim.new(0, 14)
            topBarCorner.Parent = topBar

            local topBarFix = Instance.new("Frame")
            topBarFix.Size = UDim2.new(1, 0, 0, 10)
            topBarFix.Position = UDim2.new(0, 0, 1, -10)
            topBarFix.BackgroundColor3 = Colors.background
            topBarFix.BorderSizePixel = 0
            topBarFix.Parent = topBar
            
            local brandLogo = Instance.new("Frame")
            brandLogo.Name = "BrandLogo"
            brandLogo.Size = UDim2.new(0, 200, 1, 0)
            brandLogo.Position = UDim2.new(0, 20, 0, 0)
            brandLogo.BackgroundTransparency = 1
            brandLogo.ZIndex = 11
            brandLogo.Parent = topBar

            local brandLogoIcon = createIconImage("shield", 20, Colors.primary)
            brandLogoIcon.AnchorPoint = Vector2.new(0, 0.5)
            brandLogoIcon.Position = UDim2.new(0, 0, 0.5, 0)
            brandLogoIcon.ZIndex = 11
            brandLogoIcon.Parent = brandLogo

            local brandLogoText = Instance.new("TextLabel")
            brandLogoText.BackgroundTransparency = 1
            brandLogoText.Size = UDim2.new(1, -30, 1, 0)
            brandLogoText.Position = UDim2.new(0, 28, 0, 0)
            brandLogoText.Text = "Junkie Key System"
            brandLogoText.TextColor3 = Colors.textPrimary
            brandLogoText.TextSize = 15
            brandLogoText.TextXAlignment = Enum.TextXAlignment.Left
            brandLogoText.Font = Enum.Font.GothamSemibold
            brandLogoText.ZIndex = 11
            brandLogoText.Parent = brandLogo
            
            local closeButton = Instance.new("TextButton")
            closeButton.Name = "CloseButton"
            closeButton.Size = UDim2.new(0, 30, 0, 30)
            closeButton.Position = UDim2.new(1, -40, 0.5, 0)
            closeButton.AnchorPoint = Vector2.new(0, 0.5)
            closeButton.BackgroundColor3 = Colors.error
            closeButton.BackgroundTransparency = 0.8
            closeButton.BorderSizePixel = 0
            closeButton.Text = ""
            closeButton.AutoButtonColor = false
            closeButton.ZIndex = 11
            closeButton.Parent = topBar
            
            local closeCorner = Instance.new("UICorner")
            closeCorner.CornerRadius = UDim.new(0, 8)
            closeCorner.Parent = closeButton

            local closeIcon = createIconImage("x", 16, Colors.textPrimary)
            closeIcon.AnchorPoint = Vector2.new(0.5, 0.5)
            closeIcon.Position = UDim2.new(0.5, 0, 0.5, 0)
            closeIcon.ZIndex = 12
            closeIcon.Parent = closeButton
            

            local contentArea = Instance.new("Frame")
            contentArea.Name = "ContentArea"
            contentArea.Size = UDim2.new(1, -40, 1, -65)
            contentArea.Position = UDim2.new(0, 20, 0, 55)
            contentArea.BackgroundTransparency = 1
            contentArea.Parent = container
            
            local titleSection = Instance.new("Frame")
            titleSection.Name = "TitleSection"
            titleSection.Size = UDim2.new(1, 0, 0, 85)
            titleSection.Position = UDim2.new(0, 0, 0, 5)
            titleSection.BackgroundTransparency = 1
            titleSection.Parent = contentArea
            

            local iconFrame = Instance.new("Frame")
            iconFrame.Name = "IconFrame"
            iconFrame.Size = UDim2.new(0, 52, 0, 52)
            iconFrame.Position = UDim2.new(0.5, -26, 0, 0)
            iconFrame.BackgroundColor3 = Colors.surfaceLight
            iconFrame.BorderSizePixel = 0
            iconFrame.Parent = titleSection
            
            local iconCorner = Instance.new("UICorner")
            iconCorner.CornerRadius = UDim.new(0, 12)
            iconCorner.Parent = iconFrame
  
            local iconGradient = Instance.new("UIGradient")
            iconGradient.Color = ColorSequence.new{
                ColorSequenceKeypoint.new(0, Colors.primary),
                ColorSequenceKeypoint.new(0.5, Colors.primaryGlow),
                ColorSequenceKeypoint.new(1, Colors.accent)
            }
            iconGradient.Rotation = 45
            iconGradient.Parent = iconFrame
            
            local iconStroke = Instance.new("UIStroke")
            iconStroke.Color = Colors.primary
            iconStroke.Thickness = 2
            iconStroke.Transparency = 0.5
            iconStroke.Parent = iconFrame
            
            local strokeGradient = Instance.new("UIGradient")
            strokeGradient.Color = ColorSequence.new{
                ColorSequenceKeypoint.new(0, Colors.neonBlue),
                ColorSequenceKeypoint.new(0.5, Colors.primary),
                ColorSequenceKeypoint.new(1, Colors.neonPurple)
            }
            strokeGradient.Rotation = 0
            strokeGradient.Parent = iconStroke
            
        
            local strokeTween = TweenService:Create(strokeGradient,
                TweenInfo.new(3, Enum.EasingStyle.Linear, Enum.EasingDirection.InOut, -1),
                {Rotation = 360}
            )
            strokeTween:Play()
            
            local mainIcon = createIconImage("shield", 26, Color3.fromRGB(255, 255, 255))
            mainIcon.AnchorPoint = Vector2.new(0.5, 0.5)
            mainIcon.Position = UDim2.new(0.5, 0, 0.5, 0)
            mainIcon.Parent = iconFrame
        
            
            local titleText = Instance.new("TextLabel")
            titleText.Name = "TitleText"
            titleText.Size = UDim2.new(1, 0, 0, 24)
            titleText.Position = UDim2.new(0, 0, 0, 58)
            titleText.BackgroundTransparency = 1
            titleText.Text = self.title
            titleText.TextColor3 = Colors.textPrimary
            titleText.TextSize = 17
            titleText.TextXAlignment = Enum.TextXAlignment.Center
            titleText.Font = Enum.Font.GothamBold
            titleText.Parent = titleSection
            
            local subtitleText = Instance.new("TextLabel")
            subtitleText.Name = "SubtitleText"
            subtitleText.Size = UDim2.new(1, 0, 0, 18)
            subtitleText.Position = UDim2.new(0, 0, 0, 82)
            subtitleText.BackgroundTransparency = 1
            subtitleText.Text = self.subtitle
            subtitleText.TextColor3 = Colors.textSecondary
            subtitleText.TextSize = 13
            subtitleText.TextXAlignment = Enum.TextXAlignment.Center
            subtitleText.Font = Enum.Font.Gotham
            subtitleText.Parent = titleSection
            
            local inputSection = Instance.new("Frame")
            inputSection.Name = "InputSection"
            inputSection.Size = UDim2.new(1, 0, 0, 46)
            inputSection.Position = UDim2.new(0, 0, 0, 115)
            inputSection.BackgroundColor3 = Colors.surfaceLight
            inputSection.BorderSizePixel = 0
            inputSection.Parent = contentArea
            
            local inputCorner = Instance.new("UICorner")
            inputCorner.CornerRadius = UDim.new(0, 10)
            inputCorner.Parent = inputSection
            
            local inputStroke = Instance.new("UIStroke")
            inputStroke.Color = Colors.border
            inputStroke.Thickness = 1
            inputStroke.Transparency = 0.5
            inputStroke.Parent = inputSection
            

            local keyIcon = createIconImage("key", 18, Colors.primary)
            keyIcon.AnchorPoint = Vector2.new(0, 0.5)
            keyIcon.Position = UDim2.new(0, 14, 0.5, 0)
            keyIcon.Parent = inputSection
            
            local keyInput = Instance.new("TextBox")
            keyInput.Name = "KeyInput"
            keyInput.Size = UDim2.new(1, -50, 1, 0)
            keyInput.Position = UDim2.new(0, 40, 0, 0)
            keyInput.BackgroundTransparency = 1
            keyInput.PlaceholderText = "Enter your verification key"
            keyInput.PlaceholderColor3 = Colors.textMuted
            keyInput.Text = ""
            keyInput.TextColor3 = Colors.textPrimary
            keyInput.TextSize = 14
            keyInput.TextXAlignment = Enum.TextXAlignment.Left
            keyInput.TextTruncate = Enum.TextTruncate.AtEnd
            keyInput.Font = Enum.Font.Gotham
            keyInput.ClearTextOnFocus = false
            keyInput.Parent = inputSection
            
            local buttonSection = Instance.new("Frame")
            buttonSection.Name = "ButtonSection"
            buttonSection.Size = UDim2.new(1, 0, 0, 40)
            buttonSection.Position = UDim2.new(0, 0, 0, 175)
            buttonSection.BackgroundTransparency = 1
            buttonSection.Parent = contentArea
            
            local getLinkButton = Instance.new("TextButton")
            getLinkButton.Name = "GetLinkButton"
            getLinkButton.Size = UDim2.new(0.48, 0, 1, 0)
            getLinkButton.Position = UDim2.new(0, 0, 0, 0)
            getLinkButton.BackgroundColor3 = Colors.primary
            getLinkButton.Text = ""  
            getLinkButton.Font = Enum.Font.GothamSemibold
            getLinkButton.TextSize = 14
            getLinkButton.BorderSizePixel = 0
            getLinkButton.AutoButtonColor = false
            getLinkButton.Parent = buttonSection

            local getLinkCorner = Instance.new("UICorner")
            getLinkCorner.CornerRadius = UDim.new(0, 10)
            getLinkCorner.Parent = getLinkButton

            local getLinkGradient = Instance.new("UIGradient")
            getLinkGradient.Color = ColorSequence.new{
                ColorSequenceKeypoint.new(0, Colors.primary),
                ColorSequenceKeypoint.new(1, Colors.primaryDark)
            }
            getLinkGradient.Rotation = 90
            getLinkGradient.Parent = getLinkButton

            local getLinkGlow = Instance.new("UIStroke")
            getLinkGlow.Color = Colors.primaryGlow
            getLinkGlow.Thickness = 0
            getLinkGlow.Transparency = 0.8
            getLinkGlow.Parent = getLinkButton

            local getLinkIcon = createIconImage("link", 16, Color3.fromRGB(255, 255, 255))
            getLinkIcon.AnchorPoint = Vector2.new(0, 0.5)
            getLinkIcon.Position = UDim2.new(0, 12, 0.5, 0)
            getLinkIcon.Parent = getLinkButton

            local getLinkText = Instance.new("TextLabel")
            getLinkText.Name = "ButtonText"
            getLinkText.Size = UDim2.new(1, 0, 1, 0)  
            getLinkText.Position = UDim2.new(0, 0, 0, 0)
            getLinkText.BackgroundTransparency = 1
            getLinkText.Text = "Get Link"
            getLinkText.TextColor3 = Color3.fromRGB(255, 255, 255)  
            getLinkText.Font = Enum.Font.GothamSemibold
            getLinkText.TextSize = 14  
            getLinkText.TextXAlignment = Enum.TextXAlignment.Center  
            getLinkText.Parent = getLinkButton

            local verifyButton = Instance.new("TextButton")
            verifyButton.Name = "VerifyButton"
            verifyButton.Size = UDim2.new(0.48, 0, 1, 0)
            verifyButton.Position = UDim2.new(0.52, 0, 0, 0)
            verifyButton.BackgroundColor3 = Colors.success
            verifyButton.BorderSizePixel = 0
            verifyButton.Text = ""  
            verifyButton.TextSize = 14
            verifyButton.Font = Enum.Font.GothamSemibold
            verifyButton.AutoButtonColor = false
            verifyButton.Parent = buttonSection

            local verifyCorner = Instance.new("UICorner")
            verifyCorner.CornerRadius = UDim.new(0, 10)
            verifyCorner.Parent = verifyButton

            local verifyGradient = Instance.new("UIGradient")
            verifyGradient.Color = ColorSequence.new{
                ColorSequenceKeypoint.new(0, Colors.success),
                ColorSequenceKeypoint.new(1, Colors.successDark)
            }
            verifyGradient.Rotation = 90
            verifyGradient.Parent = verifyButton

            local verifyGlow = Instance.new("UIStroke")
            verifyGlow.Color = Colors.successGlow
            verifyGlow.Thickness = 0
            verifyGlow.Transparency = 0.8
            verifyGlow.Parent = verifyButton

            local verifyIcon = createIconImage("check", 16, Color3.fromRGB(255, 255, 255))
            verifyIcon.AnchorPoint = Vector2.new(0, 0.5)
            verifyIcon.Position = UDim2.new(0, 12, 0.5, 0)
            verifyIcon.Parent = verifyButton

            local verifyText = Instance.new("TextLabel")
            verifyText.Name = "ButtonText"
            verifyText.Size = UDim2.new(1, 0, 1, 0)  
            verifyText.Position = UDim2.new(0, 0, 0, 0)
            verifyText.BackgroundTransparency = 1
            verifyText.Text = "Verify Key"
            verifyText.TextColor3 = Color3.fromRGB(255, 255, 255)  
            verifyText.Font = Enum.Font.GothamSemibold
            verifyText.TextSize = 14  
            verifyText.TextXAlignment = Enum.TextXAlignment.Center  
            verifyText.Parent = verifyButton
            
        
            local statusBar = Instance.new("Frame")
            statusBar.Name = "StatusBar"
            statusBar.Size = UDim2.new(1, -40, 0, 2)
            statusBar.Position = UDim2.new(0.5, 0, 1, -14)
            statusBar.AnchorPoint = Vector2.new(0.5, 0)
            statusBar.BackgroundColor3 = Colors.border
            statusBar.BorderSizePixel = 0
            statusBar.Parent = container

            local statusText = Instance.new("TextLabel")
            statusText.Name = "StatusText"
            statusText.BackgroundTransparency = 1
            statusText.Text = ""
            statusText.TextColor3 = Colors.textSecondary
            statusText.Font = Enum.Font.Gotham
            statusText.TextSize = 12
            statusText.TextXAlignment = Enum.TextXAlignment.Center
            statusText.Size = UDim2.new(1, -40, 0, 20)
            statusText.Position = UDim2.new(0.5, 0, 1, -38)
            statusText.AnchorPoint = Vector2.new(0.5, 0)
            statusText.Visible = false
            statusText.Parent = container
            

            self.elements = {
                backdrop = backdrop,
                container = container,
                iconFrame = iconFrame,
                brandLogo = brandLogo,
                title = titleText,
                subtitle = subtitleText,
                getLinkButton = getLinkButton,
                inputContainer = inputSection,
                inputFrame = inputSection,
                keyInput = keyInput,
                verifyButton = verifyButton,
                statusBar = statusBar,
                statusText = statusText,
                inputStroke = inputStroke,
                closeButton = closeButton,
                glassOverlay = glassOverlay,
                glowFrame = glowFrame
            }
            
            local function createAmbientParticle()
                local particle = Instance.new("Frame")
                particle.Name = "AmbientParticle"
                particle.Size = UDim2.new(0, math.random(2, 4), 0, math.random(2, 4))
                particle.Position = UDim2.new(math.random(), 0, 1, 0)
                particle.BackgroundColor3 = Colors.primaryGlow
                particle.BackgroundTransparency = 0.7
                particle.BorderSizePixel = 0
                particle.Parent = container
                
                local particleCorner = Instance.new("UICorner")
                particleCorner.CornerRadius = UDim.new(1, 0)
                particleCorner.Parent = particle
                
                local floatTween = TweenService:Create(particle,
                    TweenInfo.new(math.random(8, 12), Enum.EasingStyle.Linear),
                    {
                        Position = UDim2.new(particle.Position.X.Scale, 0, -0.1, 0),
                        BackgroundTransparency = 1
                    }
                )
                floatTween:Play()
                
                floatTween.Completed:Connect(function()
                    particle:Destroy()
                end)
            end
            
            task.spawn(function()
                while container and container.Parent do
                    createAmbientParticle()
                    task.wait(math.random(2, 4))
                end
            end)
            
            local getLinkStroke = getLinkButton:FindFirstChild("UIStroke")
            if getLinkStroke then
                getLinkStroke.Name = "GetLinkButtonGlow"
            end
            local verifyStroke = verifyButton:FindFirstChild("UIStroke")
            if verifyStroke then
                verifyStroke.Name = "VerifyButtonGlow"
            end

            local function setupAnimations()
                local elements = self.elements
                
                if elements.closeButton then
                    elements.closeButton.MouseEnter:Connect(function()
                        TweenService:Create(elements.closeButton, TweenInfo.new(0.2), {
                            BackgroundTransparency = 0.2
                        }):Play()
                    end)
                    
                    elements.closeButton.MouseLeave:Connect(function()
                        TweenService:Create(elements.closeButton, TweenInfo.new(0.2), {
                            BackgroundTransparency = 0.8
                        }):Play()
                    end)
                end
                
                if elements.getLinkButton then
                    elements.getLinkButton.MouseEnter:Connect(function()
                        TweenService:Create(elements.getLinkButton, TweenInfo.new(0.2), {
                            BackgroundColor3 = Colors.primaryGlow,
                            Size = UDim2.new(0.48, 2, 1, 2),
                            Position = UDim2.new(0, -1, 0, -1)
                        }):Play()
                        
                        local glow = elements.getLinkButton:FindFirstChild("GetLinkButtonGlow")
                        if glow then
                            TweenService:Create(glow, TweenInfo.new(0.2), {
                                Thickness = 2,
                                Transparency = 0.3
                            }):Play()
                        end
                    end)
                    
                    elements.getLinkButton.MouseLeave:Connect(function()
                        TweenService:Create(elements.getLinkButton, TweenInfo.new(0.2), {
                            BackgroundColor3 = Colors.primary,
                            Size = UDim2.new(0.48, 0, 1, 0),
                            Position = UDim2.new(0, 0, 0, 0)
                        }):Play()
                        
                        local glow = elements.getLinkButton:FindFirstChild("GetLinkButtonGlow")
                        if glow then
                            TweenService:Create(glow, TweenInfo.new(0.2), {
                                Thickness = 0,
                                Transparency = 0.8
                            }):Play()
                        end
                    end)
                    
                    elements.getLinkButton.MouseButton1Down:Connect(function()
                        TweenService:Create(elements.getLinkButton, TweenInfo.new(0.1, Enum.EasingStyle.Back), {
                            Size = UDim2.new(0.47, 0, 0.95, 0),
                            Position = UDim2.new(0.005, 0, 0.025, 0)
                        }):Play()
                    end)
                    
                    elements.getLinkButton.MouseButton1Up:Connect(function()
                        TweenService:Create(elements.getLinkButton, TweenInfo.new(0.1, Enum.EasingStyle.Back), {
                            Size = UDim2.new(0.48, 0, 1, 0),
                            Position = UDim2.new(0, 0, 0, 0)
                        }):Play()
                    end)
                end
                
                if elements.verifyButton then
                    elements.verifyButton.MouseEnter:Connect(function()
                        TweenService:Create(elements.verifyButton, TweenInfo.new(0.2), {
                            BackgroundColor3 = Colors.successGlow,
                            Size = UDim2.new(0.48, 2, 1, 2),
                            Position = UDim2.new(0.52, -1, 0, -1)
                        }):Play()
                        
                        local glow = elements.verifyButton:FindFirstChild("VerifyButtonGlow")
                        if glow then
                            TweenService:Create(glow, TweenInfo.new(0.2), {
                                Thickness = 2,
                                Transparency = 0.3
                            }):Play()
                        end
                    end)
                    
                    elements.verifyButton.MouseLeave:Connect(function()
                        TweenService:Create(elements.verifyButton, TweenInfo.new(0.2), {
                            BackgroundColor3 = Colors.success,
                            Size = UDim2.new(0.48, 0, 1, 0),
                            Position = UDim2.new(0.52, 0, 0, 0)
                        }):Play()
                        
                        local glow = elements.verifyButton:FindFirstChild("VerifyButtonGlow")
                        if glow then
                            TweenService:Create(glow, TweenInfo.new(0.2), {
                                Thickness = 0,
                                Transparency = 0.8
                            }):Play()
                        end
                    end)
                    
                    elements.verifyButton.MouseButton1Down:Connect(function()
                        TweenService:Create(elements.verifyButton, TweenInfo.new(0.1, Enum.EasingStyle.Back), {
                            Size = UDim2.new(0.47, 0, 0.95, 0),
                            Position = UDim2.new(0.525, 0, 0.025, 0)
                        }):Play()
                    end)
                    
                    elements.verifyButton.MouseButton1Up:Connect(function()
                        TweenService:Create(elements.verifyButton, TweenInfo.new(0.1, Enum.EasingStyle.Back), {
                            Size = UDim2.new(0.48, 0, 1, 0),
                            Position = UDim2.new(0.52, 0, 0, 0)
                        }):Play()
                    end)
                end
                
                if elements.keyInput and elements.inputStroke then
                    elements.keyInput.Focused:Connect(function()
                        TweenService:Create(elements.inputStroke, TweenInfo.new(0.2), {
                            Color = Colors.primary,
                            Thickness = 2,
                            Transparency = 0
                        }):Play()
                    end)
                    
                    elements.keyInput.FocusLost:Connect(function()
                        TweenService:Create(elements.inputStroke, TweenInfo.new(0.2), {
                            Color = Colors.border,
                            Thickness = 1,
                            Transparency = 0.5
                        }):Play()
                    end)
                end
            end
            
            local function animateEntrance()
                local container = self.elements.container
                local backdrop = self.elements.backdrop
                
                if container then
                    container.BackgroundTransparency = 1
                    TweenService:Create(container, TweenInfo.new(0.3, Enum.EasingStyle.Quad), {
                        BackgroundTransparency = 0
                    }):Play()
                end
                
                if backdrop then
                    backdrop.BackgroundTransparency = 1
                    TweenService:Create(backdrop, TweenInfo.new(0.3, Enum.EasingStyle.Quad), {
                        BackgroundTransparency = 0.4
                    }):Play()
                end
            end
            
            self.gui.Parent = game:GetService("CoreGui")
            
            self.gui.AncestryChanged:Connect(function(_, parent)
                if parent == nil then
                    local blur = Lighting:FindFirstChild("JunkieUIBlur")
                    if blur then blur:Destroy() end
                end
            end)
            
    
            self.showSuccess = function(self, message)
                if not self.elements then return end
                
                local container = self.elements.container
                local loadingOverlay = container:FindFirstChild("LoadingOverlay")
                
                if loadingOverlay then
                    local mainContainer = loadingOverlay:FindFirstChild("MainContainer")
                    local spinnerContainer = mainContainer and mainContainer:FindFirstChild("SpinnerContainer")
                    local loadingText = mainContainer and mainContainer:FindFirstChild("LoadingText")
                    local hintText = mainContainer and mainContainer:FindFirstChild("HintText")
                    
                    if spinnerContainer then
                        TweenService:Create(
                            spinnerContainer,
                            TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out),
                            {Rotation = 0}
                        ):Play()
                        
                        for _, child in ipairs(spinnerContainer:GetChildren()) do
                            if child:IsA("Frame") then
                                TweenService:Create(
                                    child,
                                    TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out),
                                    {BackgroundTransparency = 1}
                                ):Play()
                                
                                local stroke = child:FindFirstChildOfClass("UIStroke")
                                if stroke then
                                    TweenService:Create(
                                        stroke,
                                        TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out),
                                        {Transparency = 1}
                                    ):Play()
                                end
                            end
                        end
                        
                        task.wait(0.25)
                        
                        local checkmarkContainer = Instance.new("Frame")
                        checkmarkContainer.Name = "CheckmarkContainer"
                        checkmarkContainer.BackgroundTransparency = 1
                        checkmarkContainer.Size = UDim2.new(1, 0, 1, 0)
                        checkmarkContainer.Position = UDim2.new(0, 0, 0, 0)
                        checkmarkContainer.Parent = mainContainer
                        
                        local successCircle = Instance.new("Frame")
                        successCircle.Name = "SuccessCircle"
                        successCircle.BackgroundColor3 = Color3.fromRGB(34, 197, 94)
                        successCircle.BackgroundTransparency = 1
                        successCircle.Size = UDim2.new(0, 80, 0, 80)
                        successCircle.Position = UDim2.new(0.5, 0, 0, 20)
                        successCircle.AnchorPoint = Vector2.new(0.5, 0)
                        successCircle.Parent = checkmarkContainer
                        
                        local successCorner = Instance.new("UICorner")
                        successCorner.CornerRadius = UDim.new(1, 0)
                        successCorner.Parent = successCircle
                        
                        local glowRing = Instance.new("Frame")
                        glowRing.Name = "GlowRing"
                        glowRing.BackgroundTransparency = 1
                        glowRing.Size = UDim2.new(1, 16, 1, 16)
                        glowRing.Position = UDim2.new(0.5, 0, 0.5, 0)
                        glowRing.AnchorPoint = Vector2.new(0.5, 0.5)
                        glowRing.Parent = successCircle
                        
                        local glowStroke = Instance.new("UIStroke")
                        glowStroke.Color = Color3.fromRGB(34, 197, 94)
                        glowStroke.Thickness = 3
                        glowStroke.Transparency = 1
                        glowStroke.Parent = glowRing
                        
                        local glowCorner = Instance.new("UICorner")
                        glowCorner.CornerRadius = UDim.new(1, 0)
                        glowCorner.Parent = glowRing
                        
                        local checkmark = Instance.new("TextLabel")
                        checkmark.Name = "Checkmark"
                        checkmark.BackgroundTransparency = 1
                        checkmark.Size = UDim2.new(1, 0, 1, 0)
                        checkmark.Position = UDim2.new(0, 0, 0, -4)
                        checkmark.Font = Enum.Font.GothamBold
                        checkmark.Text = "âœ“"
                        checkmark.TextColor3 = Color3.fromRGB(255, 255, 255)
                        checkmark.TextSize = 0
                        checkmark.TextTransparency = 1
                        checkmark.Parent = successCircle
                        
                        TweenService:Create(
                            successCircle,
                            TweenInfo.new(0.4, Enum.EasingStyle.Back, Enum.EasingDirection.Out),
                            {BackgroundTransparency = 0.15, Size = UDim2.new(0, 90, 0, 90)}
                        ):Play()
                        
                        task.wait(0.1)
                        TweenService:Create(
                            glowStroke,
                            TweenInfo.new(0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.Out),
                            {Transparency = 0.3}
                        ):Play()
                        
                        TweenService:Create(
                            glowRing,
                            TweenInfo.new(0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.Out),
                            {Size = UDim2.new(1, 24, 1, 24)}
                        ):Play()
                        
                        task.wait(0.15)
                        TweenService:Create(
                            checkmark,
                            TweenInfo.new(0.3, Enum.EasingStyle.Back, Enum.EasingDirection.Out),
                            {TextSize = 52, TextTransparency = 0}
                        ):Play()
                        
                        task.wait(0.3)
                        TweenService:Create(
                            successCircle,
                            TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.InOut, -1, true),
                            {Size = UDim2.new(0, 92, 0, 92)}
                        ):Play()
                    end
                    
                    if loadingText then
                        task.wait(0.1)
                        loadingText.Text = message or "Verified!"
                        loadingText.TextColor3 = Color3.fromRGB(34, 197, 94)
                        
                        TweenService:Create(
                            loadingText,
                            TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out),
                            {TextSize = 18}
                        ):Play()
                    end
                    
                    if hintText then
                        hintText.Text = "Starting script"
                        hintText.TextColor3 = Color3.fromRGB(34, 197, 94)
                    end
                end
                
                task.wait(0.8)
            end
            
            self.updateStatus = function(self, message, color, duration)
                local statusText = self.elements.statusText
                local statusBar = self.elements.statusBar
                
                if statusText then
                    statusText.Text = message
                    statusText.TextColor3 = color or Colors.textSecondary
                    statusText.Visible = true
                    
                    if statusBar then
                        TweenService:Create(statusBar, TweenInfo.new(0.2), {
                            BackgroundColor3 = color or Colors.border,
                            Size = UDim2.new(1, -40, 0, 3)
                        }):Play()
                    end
                    
                    if duration and duration > 0 then
                        task.delay(duration, function()
                            if statusText and statusText.Text == message then
                                statusText.Visible = false
                                if statusBar then
                                    TweenService:Create(statusBar, TweenInfo.new(0.2), {
                                        BackgroundColor3 = Colors.border,
                                        Size = UDim2.new(1, -40, 0, 2)
                                    }):Play()
                                end
                            end
                        end)
                    end
                end
            end
            
            self.setButtonLoading = function(self, button, text, loading)
                if loading then
                    local buttonText = button:FindFirstChild("ButtonText")
                    if buttonText then
                        buttonText.Text = text
                    end
                    button.Interactable = false
                    
                    local spinner = button:FindFirstChild("LoadingSpinner")
                    if not spinner then
                        spinner = Instance.new("Frame")
                        spinner.Name = "LoadingSpinner"
                        spinner.Size = UDim2.new(0, 14, 0, 14)
                        spinner.Position = UDim2.new(0, 12, 0.5, -7)
                        spinner.BackgroundColor3 = Colors.textPrimary
                        spinner.BackgroundTransparency = 0.7
                        spinner.BorderSizePixel = 0
                        spinner.Parent = button
                        
                        local spinnerCorner = Instance.new("UICorner")
                        spinnerCorner.CornerRadius = UDim.new(1, 0)
                        spinnerCorner.Parent = spinner
                        
                        TweenService:Create(spinner, 
                            TweenInfo.new(1, Enum.EasingStyle.Linear, Enum.EasingDirection.InOut, -1), 
                            {Rotation = 360}
                        ):Play()
                    end
                else
                    local buttonText = button:FindFirstChild("ButtonText")
                    if buttonText then
                        buttonText.Text = text
                    end
                    button.Interactable = true
                    
                    local spinner = button:FindFirstChild("LoadingSpinner")
                    if spinner then spinner:Destroy() end
                end
            end
            
            self.shakeInput = function(self)
                local frame = self.elements.inputFrame
                if not frame then return end
                
                local orig = frame.Position
                
                for i = 1, 3 do
                    TweenService:Create(frame, TweenInfo.new(0.05), {
                        Position = UDim2.new(orig.X.Scale, orig.X.Offset - 8, orig.Y.Scale, orig.Y.Offset)
                    }):Play()
                    task.wait(0.05)
                    TweenService:Create(frame, TweenInfo.new(0.05), {
                        Position = UDim2.new(orig.X.Scale, orig.X.Offset + 8, orig.Y.Scale, orig.Y.Offset)
                    }):Play()
                    task.wait(0.05)
                end
                
                frame.Position = orig
            end
            
            self.animateSuccess = function(self)
                local iconFrame = self.elements.iconFrame
                if iconFrame then
                    TweenService:Create(iconFrame, TweenInfo.new(0.2, Enum.EasingStyle.Back), {
                        Size = UDim2.new(0, 62, 0, 62),
                        Position = UDim2.new(0.5, -31, 0, -5)
                    }):Play()
                    
                    task.wait(0.2)
                    
                    TweenService:Create(iconFrame, TweenInfo.new(0.2), {
                        Size = UDim2.new(0, 52, 0, 52),
                        Position = UDim2.new(0.5, -26, 0, 0)
                    }):Play()
                end
            end
            
            self.close = function(self)
                if not self.gui then return end
                getgenv().UI_CLOSED = true
                local container = self.elements.container
                local backdrop = self.elements.backdrop
                local blur = Lighting:FindFirstChild("JunkieUIBlur")
                
                TweenService:Create(container, TweenInfo.new(0.2), {
                    BackgroundTransparency = 1
                }):Play()
                
                TweenService:Create(backdrop, TweenInfo.new(0.2), {
                    BackgroundTransparency = 1
                }):Play()
                
                task.wait(0.2)
                
                if blur then blur:Destroy() end
                self.gui:Destroy()
                self.gui = nil
            end
            
            self.setLoadingState = function(self, isLoading, message)
                if not self.elements then return end
                
                local container = self.elements.container
                local inputFrame = self.elements.inputFrame
                local verifyButton = self.elements.verifyButton
                local getLinkButton = self.elements.getLinkButton
                local iconFrame = self.elements.iconFrame
                local title = self.elements.title
                local subtitle = self.elements.subtitle
                local statusLabel = self.elements.statusLabel
                
                if isLoading then
                    if inputFrame then inputFrame.Visible = false end
                    if verifyButton then verifyButton.Visible = false end
                    if getLinkButton then getLinkButton.Visible = false end
                    if iconFrame then iconFrame.Visible = false end
                    if title then title.Visible = false end
                    if subtitle then subtitle.Visible = false end
                    if statusLabel then statusLabel.Visible = false end
                    
                    local loadingOverlay = container:FindFirstChild("LoadingOverlay")
                    if not loadingOverlay then
                        loadingOverlay = Instance.new("Frame")
                        loadingOverlay.Name = "LoadingOverlay"
                        loadingOverlay.BackgroundTransparency = 1
                        loadingOverlay.Size = UDim2.new(1, 0, 1, 0)
                        loadingOverlay.Position = UDim2.new(0, 0, 0, 0)
                        loadingOverlay.ZIndex = 100
                        loadingOverlay.Parent = container
                        
                        local mainContainer = Instance.new("CanvasGroup")
                        mainContainer.Name = "MainContainer"
                        mainContainer.BackgroundTransparency = 1
                        mainContainer.AnchorPoint = Vector2.new(0.5, 0.5)
                        mainContainer.Position = UDim2.new(0.5, 0, 0.5, 0)
                        mainContainer.Size = UDim2.new(0, 280, 0, 200)
                        mainContainer.Parent = loadingOverlay
                        
                        local spinnerContainer = Instance.new("Frame")
                        spinnerContainer.Name = "SpinnerContainer"
                        spinnerContainer.BackgroundTransparency = 1
                        spinnerContainer.AnchorPoint = Vector2.new(0.5, 0)
                        spinnerContainer.Position = UDim2.new(0.5, 0, 0, 20)
                        spinnerContainer.Size = UDim2.new(0, 80, 0, 80)
                        spinnerContainer.Parent = mainContainer
                        
                        local bgCircle = Instance.new("Frame")
                        bgCircle.Name = "BgCircle"
                        bgCircle.BackgroundTransparency = 1
                        bgCircle.Size = UDim2.new(1, 0, 1, 0)
                        bgCircle.ZIndex = 2
                        bgCircle.Parent = spinnerContainer
                        
                        local bgStroke = Instance.new("UIStroke")
                        bgStroke.Color = Colors.accent
                        bgStroke.Thickness = 4
                        bgStroke.Transparency = 0.85
                        bgStroke.Parent = bgCircle
                        
                        local bgCorner = Instance.new("UICorner")
                        bgCorner.CornerRadius = UDim.new(1, 0)
                        bgCorner.Parent = bgCircle
                        
                        local arcCircle = Instance.new("Frame")
                        arcCircle.Name = "ArcCircle"
                        arcCircle.BackgroundTransparency = 1
                        arcCircle.Size = UDim2.new(1, 0, 1, 0)
                        arcCircle.ZIndex = 3
                        arcCircle.Parent = spinnerContainer
                        
                        local arcStroke = Instance.new("UIStroke")
                        arcStroke.Color = Colors.accent
                        arcStroke.Thickness = 4
                        arcStroke.Transparency = 0
                        arcStroke.Parent = arcCircle
                        
                        local arcCorner = Instance.new("UICorner")
                        arcCorner.CornerRadius = UDim.new(1, 0)
                        arcCorner.Parent = arcCircle
                        
                        local arcGradient = Instance.new("UIGradient")
                        arcGradient.Transparency = NumberSequence.new({
                            NumberSequenceKeypoint.new(0, 0),
                            NumberSequenceKeypoint.new(0.4, 0),
                            NumberSequenceKeypoint.new(0.7, 0.3),
                            NumberSequenceKeypoint.new(0.85, 0.7),
                            NumberSequenceKeypoint.new(1, 1)
                        })
                        arcGradient.Rotation = 0
                        arcGradient.Parent = arcStroke
                        
                        local spinTween = TweenService:Create(
                            spinnerContainer,
                            TweenInfo.new(1, Enum.EasingStyle.Linear, Enum.EasingDirection.InOut, -1),
                            {Rotation = 360}
                        )
                        spinTween:Play()
                        
                        task.spawn(function()
                            while loadingOverlay and loadingOverlay.Parent do
                                arcGradient.Rotation = (arcGradient.Rotation + 8) % 360
                                task.wait(0.03)
                            end
                        end)
                        
                        local loadingText = Instance.new("TextLabel")
                        loadingText.Name = "LoadingText"
                        loadingText.BackgroundTransparency = 1
                        loadingText.AnchorPoint = Vector2.new(0.5, 0)
                        loadingText.Position = UDim2.new(0.5, 0, 0, 130)
                        loadingText.Size = UDim2.new(1, 0, 0, 25)
                        loadingText.Font = Enum.Font.GothamBold
                        loadingText.Text = message or "Loading information"
                        loadingText.TextColor3 = Colors.textPrimary
                        loadingText.TextSize = 16
                        loadingText.Parent = mainContainer
                        
                        local hintText = Instance.new("TextLabel")
                        hintText.Name = "HintText"
                        hintText.BackgroundTransparency = 1
                        hintText.AnchorPoint = Vector2.new(0.5, 0)
                        hintText.Position = UDim2.new(0.5, 0, 0, 160)
                        hintText.Size = UDim2.new(1, 0, 0, 20)
                        hintText.Font = Enum.Font.Gotham
                        hintText.Text = "Please wait a moment"
                        hintText.TextColor3 = Colors.textSecondary
                        hintText.TextSize = 12
                        hintText.TextTransparency = 0.3
                        hintText.Parent = mainContainer
                        
                        local textPulseTween = TweenService:Create(
                            hintText,
                            TweenInfo.new(1.2, Enum.EasingStyle.Quad, Enum.EasingDirection.InOut, -1, true),
                            {TextTransparency = 0.6}
                        )
                        textPulseTween:Play()
                        
                        task.spawn(function()
                            local dots = 0
                            while loadingOverlay and loadingOverlay.Parent do
                                dots = (dots % 3) + 1
                                if loadingText and loadingText.Parent then
                                    loadingText.Text = (message or "Loading information") .. string.rep(".", dots)
                                end
                                task.wait(0.5)
                            end
                        end)
                        
                        mainContainer.GroupTransparency = 1
                        TweenService:Create(
                            mainContainer,
                            TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out),
                            {GroupTransparency = 0}
                        ):Play()
                    end
                    
                    loadingOverlay.Visible = true
                else
                    if inputFrame then inputFrame.Visible = true end
                    if verifyButton then verifyButton.Visible = true end
                    if getLinkButton then getLinkButton.Visible = true end
                    if iconFrame then iconFrame.Visible = true end
                    if title then title.Visible = true end
                    if subtitle then subtitle.Visible = true end
                    if statusLabel then 
                        statusLabel.Visible = true
                        statusLabel.Text = "Enter your key to continue"
                        statusLabel.TextColor3 = Colors.textSecondary
                    end
                
                    local loadingOverlay = container:FindFirstChild("LoadingOverlay")
                    if loadingOverlay then
                        loadingOverlay:Destroy()
                    end
                end
            end
            
            setupAnimations()
            animateEntrance()
    
            self.createToast = function(message, duration, toastType)
                duration = duration or 3
                toastType = toastType or "info" -- "info", "success", "loading"
                
                local toast = Instance.new("Frame")
                toast.Name = "Toast"
                toast.Size = UDim2.new(0, 0, 0, 50)
                toast.Position = UDim2.new(1, -20, 1, -20)
                toast.AnchorPoint = Vector2.new(1, 1)
                toast.BackgroundColor3 = Color3.fromRGB(30, 30, 35)
                toast.BorderSizePixel = 0
                toast.ZIndex = 10000
                toast.Parent = self.gui
                
                local corner = Instance.new("UICorner")
                corner.CornerRadius = UDim.new(0, 10)
                corner.Parent = toast
                
                local shadow = Instance.new("ImageLabel")
                shadow.Name = "Shadow"
                shadow.BackgroundTransparency = 1
                shadow.Position = UDim2.new(0.5, 0, 0.5, 0)
                shadow.Size = UDim2.new(1, 30, 1, 30)
                shadow.AnchorPoint = Vector2.new(0.5, 0.5)
                shadow.Image = "rbxasset://textures/ui/GuiImagePlaceholder.png"
                shadow.ImageColor3 = Color3.fromRGB(0, 0, 0)
                shadow.ImageTransparency = 0.7
                shadow.ScaleType = Enum.ScaleType.Slice
                shadow.SliceCenter = Rect.new(10, 10, 10, 10)
                shadow.ZIndex = toast.ZIndex - 1
                shadow.Parent = toast
                
                local icon = Instance.new("TextLabel")
                icon.Name = "Icon"
                icon.Size = UDim2.new(0, 40, 1, 0)
                icon.Position = UDim2.new(0, 0, 0, 0)
                icon.BackgroundTransparency = 1
                icon.Font = Enum.Font.SourceSansBold
                icon.TextSize = 20
                icon.TextColor3 = Color3.fromRGB(255, 255, 255)
                icon.ZIndex = toast.ZIndex + 1
                
                if toastType == "loading" then
                    icon.Text = "â³"
                elseif toastType == "success" then
                    icon.Text = "âœ“"
                    icon.TextColor3 = Color3.fromRGB(76, 175, 80)
                else
                    icon.Text = "â„¹ï¸"
                    icon.TextColor3 = Color3.fromRGB(66, 165, 245)
                end
                icon.Parent = toast
                
                local text = Instance.new("TextLabel")
                text.Name = "Text"
                text.Size = UDim2.new(1, -50, 1, 0)
                text.Position = UDim2.new(0, 40, 0, 0)
                text.BackgroundTransparency = 1
                text.Font = Enum.Font.GothamMedium
                text.TextSize = 14
                text.TextColor3 = Color3.fromRGB(230, 230, 230)
                text.Text = message
                text.TextXAlignment = Enum.TextXAlignment.Left
                text.TextYAlignment = Enum.TextYAlignment.Center
                text.TextTruncate = Enum.TextTruncate.AtEnd
                text.ZIndex = toast.ZIndex + 1
                text.Parent = toast
                
                local textService = game:GetService("TextService")
                local textBounds = textService:GetTextSize(
                    message,
                    text.TextSize,
                    text.Font,
                    Vector2.new(300, 50)
                )
                local targetWidth = math.min(math.max(textBounds.X + 60, 200), 350)
                
                local slideTween = TweenService:Create(
                    toast,
                    TweenInfo.new(0.4, Enum.EasingStyle.Back, Enum.EasingDirection.Out),
                    {
                        Size = UDim2.new(0, targetWidth, 0, 50),
                        Position = UDim2.new(1, -20, 1, -20)
                    }
                )
                slideTween:Play()
                
                if toastType == "loading" then
                    task.spawn(function()
                        local rotation = 0
                        while toast and toast.Parent do
                            rotation = (rotation + 10) % 360
                            local spinChars = {"â³", "âŒ›"}
                            icon.Text = spinChars[(math.floor(rotation / 180) % 2) + 1]
                            task.wait(0.1)
                        end
                    end)
                end
                
                if toastType ~= "loading" then
                    task.delay(duration, function()
                        if toast and toast.Parent then

                            local fadeOut = TweenService:Create(
                                toast,
                                TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.In),
                                {
                                    Position = UDim2.new(1, 20, 1, -20),
                                    BackgroundTransparency = 1
                                }
                            )
                            
                            TweenService:Create(icon, TweenInfo.new(0.3), {TextTransparency = 1}):Play()
                            TweenService:Create(text, TweenInfo.new(0.3), {TextTransparency = 1}):Play()
                            TweenService:Create(shadow, TweenInfo.new(0.3), {ImageTransparency = 1}):Play()
                            
                            fadeOut:Play()
                            fadeOut.Completed:Connect(function()
                                toast:Destroy()
                            end)
                        end
                    end)
                end
                
                return toast
            end
            
            return self.gui
        end
        end 
    end 
    
    local UI = {}
    UI.__index = UI
    
    function UI.new(options)
        local self = setmetatable({}, UI)
        
        self.options = options or {}
        self.title = self.options.title or "Key Verification System"
        self.subtitle = self.options.subtitle or "Powered by Junkie Development"
        self.description = self.options.description or "Please complete the key verification to continue"
        
        self.lastRequestTime = 0
        self.requestCooldown = 15
        self.maxAttempts = 5
        self.currentAttempts = 0
        
        self.player = Players.LocalPlayer
        self.gui = nil
        self.hwid = game:GetService("RbxAnalyticsService"):GetClientId()
        
        self._connections = {}
        
        return self
    end
    
    UI.createUI = function(self)
        local UIFactory = loadUIFactory()
        
        if UIFactory then
            local uiBuilder = UIFactory(Colors, Players, TweenService, UserInputService, Lighting)
            if uiBuilder then
                uiBuilder(self)
            else
                error("UI builder initialization failed")
                return
            end
        else
            error("Failed to load UI factory")
            return
        end
        
        if self.elements and self.elements.closeButton then
            table.insert(self._connections, self.elements.closeButton.MouseButton1Click:Connect(function()
                self:close()
            end))
        end
        
        if self.elements and self.elements.getLinkButton then
            table.insert(self._connections, self.elements.getLinkButton.MouseButton1Click:Connect(function()
                self:handleGetLink()
            end))
        end
        
        if self.elements and self.elements.verifyButton then
            table.insert(self._connections, self.elements.verifyButton.MouseButton1Click:Connect(function()
                self:handleVerifyKey()
            end))
        end
        
        if self.elements and self.elements.keyInput then
            table.insert(self._connections, self.elements.keyInput.FocusLost:Connect(function(enterPressed)
                if enterPressed then
                    self:handleVerifyKey()
                end
            end))
        end
        
        return self.gui
    end
    
    function UI:close()
        getgenv().UI_CLOSED = true
        for _, conn in ipairs(self._connections or {}) do
            pcall(function() conn:Disconnect() end)
        end
        self._connections = {}
        if self.gui then self.gui:Destroy() end
        return getgenv().SCRIPT_KEY
    end
    
    function UI:handleGetLink()
        local secureGetKeyLink = Junkie.get_key_link()
        if not secureGetKeyLink then
            self:updateStatus("System not initialized", Colors.error, 3)
            return
        end
        local link = secureGetKeyLink
        
        if link then
            if setclipboard then
                setclipboard(link)
                self:updateStatus("Link copied to clipboard!", Colors.success, 3)
            else
                self:updateStatus("Get link: " .. link, Colors.primary, 10)
            end
        else
            self:updateStatus("Failed to get link", Colors.error, 3)
        end
    end
    
    function UI:handleVerifyKey()
        local key = self.elements.keyInput.Text:gsub("%s+", "")
        
        if key == "" then
            self:updateStatus("Please enter a key", Colors.error, 3)
            self:shakeInput()
            return
        end
        
        if self.setButtonLoading then
            self:setButtonLoading(self.elements.verifyButton, "Verifying", true)
        end
        self:updateStatus("Verifying...", Colors.primary, 0)
        
        if self.elements.keyInput.Interactable ~= nil then
            self.elements.keyInput.Interactable = false
        end
        
        local result = Junkie.check_key(key)
        
        if result and result.valid then
            saveVerifiedKey(key)
            self:updateStatus("Key verified!", Colors.success, 0)
            if self.animateSuccess then self:animateSuccess() end
            
            task.wait(1.5)
            getgenv().SCRIPT_KEY = key
            self:close()
            return 
        else
            self:updateStatus("Invalid key", Colors.error, 3)
            if self.shakeInput then self:shakeInput() end
            
            if self.setButtonLoading then
                self:setButtonLoading(self.elements.verifyButton, "Verify Key", false)
            end
            if self.elements.keyInput.Interactable ~= nil then
                self.elements.keyInput.Interactable = true
            end
        
        end
    end

    local ui = UI.new(options)
    ui:createUI()

    if ui.setLoadingState then
        ui:setLoadingState(true, "Checking verification...")
    end

    local savedKey = loadVerifiedKey()
    local keyToCheck = savedKey
    if not keyToCheck then
        keyToCheck = getgenv().SCRIPT_KEY
    end
    
    local result = Junkie.check_key(keyToCheck)
    if result and result.valid then
        if result.message == "KEYLESS" then
            if ui.showSuccess then
                ui:showSuccess("Keyless Mode âœ“")
            end
            getgenv().SCRIPT_KEY = "KEYLESS"
            if ui.close then ui:close() end
            return
        end
        
        if result.message == "KEY_VALID" then
            if not savedKey and keyToCheck then
                saveVerifiedKey(keyToCheck)
            end
            
            if ui.showSuccess then
                local successMsg = savedKey and "Saved Key Verified âœ“" or "Key Verified âœ“"
                ui:showSuccess(successMsg)
            end
            getgenv().SCRIPT_KEY = keyToCheck
            if ui.close then ui:close() end
            return
        end
        
        if savedKey and not result.key_valid then
            clearSavedKey()
        end
        
    end
    
    if ui.setLoadingState then
        ui:setLoadingState(false)
    end

    while not getgenv().UI_CLOSED do
        task.wait(0.1)
    end
    return getgenv().SCRIPT_KEY
end)()


if game.PlaceId == 90462358603255 then

local WindUI = loadstring(game:HttpGet("https://github.com/Footagesus/WindUI/releases/latest/download/main.lua"))()
local Icons = loadstring(game:HttpGetAsync("https://raw.githubusercontent.com/Footagesus/Icons/main/Main.lua"))()
Icons.SetIconsType("lucide")

local Window = WindUI:CreateWindow({
    Title = "Lights Hub",
    Author = "by Ryo",
    Folder = "LightsHub - Anime Eternal",
    
    -- â†“ This all is Optional. You can remove it.
    Size = UDim2.fromOffset(580, 460),
    MinSize = Vector2.new(560, 350),
    MaxSize = Vector2.new(850, 560),
    Transparent = true,
    Theme = "Dark",
    Resizable = true,
    SideBarWidth = 200,
    BackgroundImageTransparency = 0.42,
    HideSearchBar = true,
    ScrollBarEnabled = false,
    ToggleKey = Enum.KeyCode.K,

    OpenButton = {
        Title = "Lights Hub",
        CornerRadius = UDim.new(0,16),
        StrokeThickness = 2,
        Enabled = true, -- enable or disable openbutton
        Draggable = true,
        OnlyMobile = false,
        
        Color = ColorSequence.new( -- gradient
            Color3.fromHex("AB61FF"), 
            Color3.fromHex("281140")
        ),
    },
})

Window:Tag({
    Title = "Anime Eternal - Update 33",
    Color = Color3.fromHex("8724FF"),
    Radius = 0, -- from 0 to 13
})

-- ðŸ§  åˆå§‹åŒ–å…¨å±€å˜é‡
getgenv().UserSetWalkSpeed = nil
getgenv().UserSetJumpPower = nil
getgenv().SpeedMonitorRunning = false


-- âœ… æ•æ‰å½“å‰è§’è‰² WalkSpeed / JumpPower
local player = game.Players.LocalPlayer

local function captureCurrentStats()
    local char = player.Character or player.CharacterAdded:Wait()
    local humanoid = char:WaitForChild("Humanoid")
    getgenv().CurrentWalkSpeed = humanoid.WalkSpeed
    getgenv().CurrentJumpPower = humanoid.JumpPower
end

-- âœ… ç»´æŒè®¾å®šçš„é€Ÿåº¦ä¸Žè·³è·ƒåŠ›
task.spawn(function()
    getgenv().SpeedMonitorRunning = true
    while getgenv().SpeedMonitorRunning do
        pcall(function()
            local char = player.Character
            local humanoid = char and char:FindFirstChild("Humanoid")
            if humanoid then
                if getgenv().UserSetWalkSpeed and humanoid.WalkSpeed ~= getgenv().UserSetWalkSpeed then
                    humanoid.WalkSpeed = getgenv().UserSetWalkSpeed
                end
                if getgenv().UserSetJumpPower and humanoid.JumpPower ~= getgenv().UserSetJumpPower then
                    humanoid.JumpPower = getgenv().UserSetJumpPower
                end
            end
        end)
        task.wait(0.3)
    end
end)

--Main Tab
local MainTab = Window:Tab({
    Title = "About",
    Icon = "lightbulb",
}) 

MainTab:Select()

local AboutmeSection = MainTab:Section({
        Title = [[Lights Hub

This Script is still in development, so you may encounter bugs.
More function is coming very soon.
I appreciate you to use my script as I will continue improving the experience.

Discord Server: https://discord.gg/ryenf7d6C5]],
        TextSize = 18,
        TextTransparency = .35,
        FontWeight = Enum.FontWeight.Medium,
    })

local DiscordServerParagraph = MainTab:Paragraph({
            Title = "Join our Discord Server!",
            Buttons = {
                {
                    Title = "Copy link",
                    Icon = "link",
                    Callback = function()
                        setclipboard("https://discord.gg/ryenf7d6C5")
                        WindUI:Notify({
                        Title = "Lights Hub",
                        Content = "Copied to Clipboard!",
                        Duration = 2,
                        })
                    end
                }
            }
        })

-- Config Tab
local configTab = Window:Tab({ 
    Title = "Config",
    Icon = "save",
 })

local ConfigManager = Window.ConfigManager
local myConfig = nil
local currentConfigName = nil

-- æŠŠä½ åŽŸæœ¬é‚£ä¸€å¤§ä¸² Register é›†ä¸­æˆä¸€ä¸ªå‡½æ•°ï¼ˆåˆ‡æ¢ config æ—¶è¦é‡æ–° Registerï¼‰
local function RegisterAll(cfg)
    -- Player
    cfg:Register("WalkSpeed", WalkspeedSlider)
    cfg:Register("JumpHeight", JumpHeightSlider)
    cfg:Register("KillAuraRange", FastKillAuraDropdown)
    cfg:Register("FastKillAura", FastKillAuraToggle)
    cfg:Register("AntiAFK", afkToggle)
    cfg:Register("AntiPublicServer", antiPublicToggle)
    cfg:Register("WhitelistPlayers", whitelistInput)

    -- Ranking
    cfg:Register("AutoRankUp", autoRankUpToggle)
    cfg:Register("AutoPrestige", autoPrestigeToggle)

    -- Codes
    cfg:Register("RedeemCodes", redeemCodesButton)

    -- Collect
    cfg:Register("HourlyDailyRewards", hourlyDailyRewardsToggle)
    cfg:Register("ClaimGroupChest", claimGroupChestToggle)
    cfg:Register("ClaimPremiumChest", claimPremiumChestToggle)
    cfg:Register("ClaimVIPChest", claimVIPChestToggle)
    cfg:Register("ClaimDailyChest", claimDailyChestToggle)

    -- Exchange
    cfg:Register("ExchangeW1Dropdown", ExchangeW1Dropdown)
    cfg:Register("AutoExchangeW1Toggle", ExchangeW1Toggle)
    cfg:Register("ExchangeW2Dropdown", ExchangeW2Dropdown)
    cfg:Register("AutoExchangeW2Toggle", ExchangeW2Toggle)
    cfg:Register("ExchangeCoinsDropdown", ExchangeCoinsDropdown)
    cfg:Register("AutoExchangeCoinsToggle", ExchangeCoinsToggle)
    cfg:Register("ExchangeMaterialsDropdown", ExchangeMaterialsDropdown)
    cfg:Register("AutoExchangeMaterialsToggle", ExchangeMaterialsToggle)

    -- Exchange Shop
    cfg:Register("ExchangeShopW1Dropdown", ExchangeShopW1Dropdown)
    cfg:Register("AutoExchangeShopW1Toggle", ExchangeShopW1Toggle)
    cfg:Register("ExchangeShopW1KeysDropdown", ExchangeShopW1KeysDropdown)
    cfg:Register("AutoExchangeShopW1KeysToggle", ExchangeShopW1KeysToggle)
    cfg:Register("ExchangeShopW1ProductsDropdown", ExchangeShopW1ProductsDropdown)
    cfg:Register("AutoExchangeShopW1ProductsToggle", ExchangeShopW1ProductsToggle)

    cfg:Register("ExchangeShopW2Dropdown", ExchangeShopW2Dropdown)
    cfg:Register("AutoExchangeShopW2Toggle", ExchangeShopW2Toggle)
    cfg:Register("ExchangeShopW2KeysDropdown", ExchangeShopW2KeysDropdown)
    cfg:Register("AutoExchangeShopW2KeysToggle", ExchangeShopW2KeysToggle)
    cfg:Register("ExchangeShopW2ProductsDropdown", ExchangeShopW2ProductsDropdown)
    cfg:Register("AutoExchangeShopW2ProductsToggle", ExchangeShopW2ProductsToggle)

    -- Food
    cfg:Register("ExchangeFoodDropdown", ExchangeFoodDropdown)
    cfg:Register("AutoExchangeFoodToggle", ExchangeFoodToggle)
    cfg:Register("ExchangeMacaronDropdown", ExchangeMacaronDropdown)
    cfg:Register("AutoExchangeMacaronToggle", ExchangeMacaronToggle)

    -- Quests
    cfg:Register("AutoDailyQuest", DailyQuestToggle)
    cfg:Register("AutoPunchingMachineQuest", PunchingMachineQuestToggle)
    cfg:Register("AutoDemonFruitQuest", DemonFruitQuestToggle)
    cfg:Register("AutoBriefcaseQuest", BriefcaseQuestToggle)
    cfg:Register("AutoAssassinKnifeQuest", AssassinKnifeQuestToggle)
    cfg:Register("AutoAssassinPistolQuest", AssassinPistolQuestToggle)
    cfg:Register("AutoExorciseHumansQuest", ExorciseHumansQuestToggle)
    cfg:Register("AutoEvilSpiritQuest", EvilSpiritQuestToggle)
    cfg:Register("AutoBentoBoxQuest", BentoBoxQuestToggle)

    -- Star
    cfg:Register("StarDropdown", StarDropdown)
    cfg:Register("AutoOpenStar", AutoOpenStarToggle)

    -- Rollï¼ˆä½ çš„ AutoRoll toggle æ²¡å­˜å˜é‡å°±æ— æ³• Registerï¼‰
    cfg:Register("RollDropdown", RollDropdown)

    -- Weapons
    cfg:Register("AutoEvolveWeapons", WeaponsEvolveToggle)
    cfg:Register("WeaponsSelect", WeaponsDropdown)
    cfg:Register("RefreshWeaponsList", WeaponRefreshButton)
    cfg:Register("AutoRollBreathings", AutoBreathingsToggle)
    cfg:Register("AutoRollBankai", AutoBankaiToggle)
    cfg:Register("AutoRollChakraInfusion", AutoChakraToggle)
    cfg:Register("AutoUpgradeScytheLeveling", AutoScytheToggle)

    -- Titans
    cfg:Register("AutoEvolveTitans", TitansEvolveToggle)
    cfg:Register("TitansSelect", TitansDropdown)
    cfg:Register("RefreshTitansList", TitanRefreshButton)
    cfg:Register("AutoRollTitanInjection", AutoInjectionTitanToggle)

    -- Stands
    cfg:Register("AutoEvolveStands", StandsEvolveToggle)
    cfg:Register("StandsSelect", StandsDropdown)
    cfg:Register("RefreshStandsList", StandRefreshButton)
    cfg:Register("AutoRollRequiemInjection", AutoStandsInjectionToggle)

    -- Progression
    cfg:Register("ProgressionDropdown", ProgressionDropdown)
    cfg:Register("AutoProgression", UpgradeProgressionToggle)

    -- Leveling
    cfg:Register("LevelingSelect", AutoLevelingDropdown)

    -- Upgrades
    cfg:Register("UpgradesSelect", AutoUpgradeDropdown)
    cfg:Register("AutoUpgrades", AutoUpgradesToggle)
    cfg:Register("AutoUpgradesAll", AutoUpgradeAllToggle)

    -- Farm
    cfg:Register("MobsList", MobDropdown)
    cfg:Register("RefreshMobsList", MobRefreshButton)
    cfg:Register("AutoFarm", AutoFarmToggle)

    -- Dungeon / Raid
    cfg:Register("DungeonSelect", AutoDungeonDropdown)
    cfg:Register("AutoJoinDungeon", AutoDungeonToggle)
    cfg:Register("RaidSelect", AutoRaidDropdown)
    cfg:Register("RaidSpeed", AutoRaidSpeedDropdown)
    cfg:Register("AutoJoinRaid", AutoRaidToggle)
end

local function SetActiveConfig(name)
    if not name or name == "" then return end
    currentConfigName = name
    myConfig = ConfigManager:CreateConfig(name)
    RegisterAll(myConfig)
end

-- è¾“å…¥æ–‡ä»¶å
local configNameInput = configTab:Input({
    Title = "Config File Name",
    Desc = "Example: config1",
    Value = "LightsHubConfig",
    Placeholder = "config1",
    Type = "Input", -- å¦‚æžœä½ åº“é‡Œæ²¡æœ‰ Input ç±»åž‹ï¼Œå°±åˆ æŽ‰è¿™ä¸€è¡Œ
    Callback = function(text)
        -- åªè®°å½•ï¼Œä¸è‡ªåŠ¨åˆ›å»ºï¼Œé¿å…æ¯æ‰“ä¸€ä¸ªå­—å°±é‡å»º
        currentConfigName = text
    end,
})

-- Dropdownï¼šå·²æœ‰ configs
local configsDropdown = configTab:Dropdown({
    Title = "Configs List",
    Desc = "Select saved config from the list",
    Values = {"none"},
    Value = "none",
    Multi = false,
    AllowNone = true,
    Callback = function(name)
        if name and name ~= "" and name ~= "(none)" and name ~= "(click refresh)" then
            -- é€‰æ‹©åŽåŒæ­¥åˆ°è¾“å…¥æ¡†ï¼ˆå¦‚æžœ WindUI Input æ”¯æŒ:SetValue å°±ç”¨ï¼›ä¸æ”¯æŒå°±å¿½ç•¥ï¼‰
            currentConfigName = name
        end
    end,
})

-- åˆ·æ–°æŒ‰é’®ï¼šç”¨ AllConfigs() åˆ·æ–° dropdown list
local function RefreshConfigList()
    local list = {}
    local all = ConfigManager:AllConfigs("LightsHub - Anime Eternal")

    if type(all) == "table" then
        for k, v in pairs(all) do
            if type(k) == "string" then
                table.insert(list, k)
            elseif type(v) == "string" then
                table.insert(list, v)
            elseif type(v) == "table" and type(v.Name) == "string" then
                table.insert(list, v.Name)
            end
        end
    end

    table.sort(list)
    if #list == 0 then list = {"(none)"} end
    configsDropdown:Refresh(list)
end

configTab:Button({
    Title = "Refresh Config List",
    Callback = function()
        RefreshConfigList()
    end
})

configTab:Button({
    Title = "Update Selected Config",
    Callback = function()
        if not currentConfigName or currentConfigName == "" or currentConfigName == "none" or currentConfigName == "(none)" then
            --Need to add notify
            return
        end

        -- åˆ‡æ¢åˆ° dropdown é€‰ä¸­çš„ configï¼ˆä¼šé‡æ–° Registerï¼‰
        SetActiveConfig(currentConfigName)

        -- ç«‹åˆ»ä¿å­˜ä¸€æ¬¡
        myConfig:Save()
        -- å¯é€‰ï¼šä¿å­˜åŽåˆ·æ–°ä¸€ä¸‹åˆ—è¡¨
        -- RefreshConfigList()
    end
})

-- Save / Load æŒ‰é’®ï¼ˆå¯¹å½“å‰ active config ç”Ÿæ•ˆï¼‰
configTab:Button({
    Title = "Save Config",
    Callback = function()
        if not myConfig then SetActiveConfig(currentConfigName or "LightsHubConfig") end
        myConfig:Save()
    end
})

configTab:Button({
    Title = "Load Config",
    Callback = function()
        if not myConfig then SetActiveConfig(currentConfigName or "LightsHubConfig") end
        myConfig:Load()
    end
})

local PlayerTab = Window:Tab({
    Title = "Player",
    Icon = "user",
})
-------------------------------------------------
-- çŽ©å®¶è®¾å®šï¼ˆWalkSpeedã€Jumpï¼‰
-------------------------------------------------
local WalkspeedSlider = PlayerTab:Slider({
    Flag = "Slider1",
    Title = "Walk Speed",
    Desc = "Adjust Your Walk Speed",
    Step = 1,
    Value = {
        Min = 30,
        Max = 150,
        Default = getgenv().CurrentWalkSpeed or 35,
    },
    Callback = function(Value)
        local char = player.Character
        local humanoid = char and char:FindFirstChild("Humanoid")
        if humanoid then
            humanoid.WalkSpeed = Value
            getgenv().UserSetWalkSpeed = Value
        end
    end,
})

local JumpHeightSlider = PlayerTab:Slider({
    Flag = "Slider2",
    Title = "Jump Height",
    Desc = "Adjust Your Jump Height",
    Step = 1,
    Value = {
        Min = 50,
        Max = 200,
        Default = getgenv().CurrentJumpPower or 50,
    },
    Callback = function(Value)
        local char = player.Character
        local humanoid = char and char:FindFirstChild("Humanoid")
        if humanoid then
            humanoid.JumpPower = Value
            getgenv().UserSetJumpPower = Value
        end
    end,
})

PlayerTab:Divider()


local AttackRangeOptions = {"Low Range", "Medium Range", "High Range"}

local rangeValues = {
    ["Low Range"] = 50,
    ["Medium Range"] = 60,
    ["High Range"] = 70,
}

local FastKillAuraDropdown = PlayerTab:Dropdown({
    Flag = "KillAuraRange",
    Title = "Attack Range",
    Values = AttackRangeOptions,
    Value = "Low Range",
    Multi = false,
    Callback = function(option)
        getgenv().SelectedAttackRange = option
    end,
})

local FastKillAuraToggle = PlayerTab:Toggle({
    Flag = "FastKillAura1",
    Title = "Fast Kill Aura",
    Desc = "Very Fast Auto Click + More Attack Range",
    Value = false,
    Callback = function(state)
        getgenv().FastKillAuraRunning = state
        getgenv().CurrentTargetMob = nil  -- åˆå§‹åŒ–å½“å‰ç›®æ ‡æ€ªç‰©
        if state then
            -- å¯åŠ¨å¾ªçŽ¯ï¼šæ¯0.01ç§’å‘é€ç‚¹å‡»äº‹ä»¶
            task.spawn(function()
                while getgenv().FastKillAuraRunning do
                    pcall(function()
                        local player = game.Players.LocalPlayer
                        local char = player.Character
                        local hrp = char and char:FindFirstChild("HumanoidRootPart")
                        if not hrp then 
                            task.wait(0.05)
                            return 
                        end
                        local playerPos = hrp.Position
                        
                        local rangeNum = rangeValues[getgenv().SelectedAttackRange] or 50
                        
                        local monstersFolder = workspace:FindFirstChild("Debris") and workspace.Debris:FindFirstChild("Monsters")
                        local mobsInRange = {}  -- å­˜å‚¨åœ¨èŒƒå›´å†…çš„æ€ªç‰©
                        
                        if monstersFolder then
                            -- éåŽ†Monstersä¸­çš„Model
                            for _, mob in pairs(monstersFolder:GetChildren()) do
                                if mob and mob:IsA("Model") then
                                    local mobHRP = mob:FindFirstChild("HumanoidRootPart")
                                    if mobHRP then
                                        local mobPos = mobHRP.Position
                                        local distance = (playerPos - mobPos).Magnitude
                                        if distance <= rangeNum then
                                            table.insert(mobsInRange, mob)  -- æ·»åŠ æ€ªç‰©å¯¹è±¡
                                        end
                                    end
                                end
                            end
                        end
                        
                        -- æ£€æŸ¥å½“å‰ç›®æ ‡æ€ªç‰©æ˜¯å¦è¿˜å­˜åœ¨ä¸”åœ¨èŒƒå›´å†…
                        local targetMob = getgenv().CurrentTargetMob
                        if targetMob and targetMob.Parent and targetMob:FindFirstChild("HumanoidRootPart") then
                            -- æ£€æŸ¥ç›®æ ‡æ˜¯å¦ä»åœ¨èŒƒå›´å†…
                            local mobHRP = targetMob:FindFirstChild("HumanoidRootPart")
                            local mobPos = mobHRP.Position
                            local distance = (playerPos - mobPos).Magnitude
                            if distance <= rangeNum then
                                -- å½“å‰ç›®æ ‡è¿˜æ´»ç€ä¸”åœ¨èŒƒå›´å†…ï¼Œç»§ç»­å‘é€å®ƒçš„Id
                                local mobId = targetMob.Name
                                game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                    ["Action"] = "_Mouse_Click",
                                    ["Id"] = mobId,
                                })
                            else
                                -- ç›®æ ‡ä¸åœ¨èŒƒå›´å†…ï¼Œé‡ç½®å¹¶é€‰æ‹©ä¸‹ä¸€ä¸ª
                                getgenv().CurrentTargetMob = nil
                            end
                        else
                            -- å½“å‰ç›®æ ‡æ­»äº†æˆ–ä¸å­˜åœ¨ï¼Œé€‰æ‹©ä¸‹ä¸€ä¸ª
                            if #mobsInRange > 0 then
                                getgenv().CurrentTargetMob = mobsInRange[1]  -- é€‰æ‹©ç¬¬ä¸€ä¸ª
                                local mobId = getgenv().CurrentTargetMob.Name
                                game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                    ["Action"] = "_Mouse_Click",
                                    ["Id"] = mobId,
                                })
                            else
                                -- æ²¡æœ‰æ€ªç‰©ï¼Œå‘é€æ™®é€šç‚¹å‡»
                                game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                    ["Action"] = "_Mouse_Click",
                                })
                                getgenv().CurrentTargetMob = nil  -- é‡ç½®ç›®æ ‡
                            end
                        end
                    end)
                    task.wait(0.05)
                end
            end)
        end
    end,
})

PlayerTab:Divider()

-------------------------------------------------
-- ðŸ›¡ï¸ Anti AFK
-------------------------------------------------

local bb = game:service'VirtualUser'
local afkConnection

local afkToggle = PlayerTab:Toggle({
    Flag = "Toggle1",
    Title = "Anti AFK",
    Desc = "Prevents you from being kicked for being AFK",
    Value = false,
    Callback = function(state)
        if state then
            game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                ["Value"] = false,
                ["Path"] = {"Settings", "AFK_MODE"},
                ["Action"] = "Settings",
            })
            afkConnection = player.Idled:Connect(function()
                bb:CaptureController()
                bb:ClickButton2(Vector2.new())
                wait(2)
            end)
        else
            if afkConnection then
                afkConnection:Disconnect()
                afkConnection = nil
            end
        end
    end,
})

-------------------------------------------------
-- ðŸ›‘ Anti Public Serverï¼ˆåŠŸèƒ½å®Œæ•´æ•´åˆï¼‰
-------------------------------------------------

getgenv().AntiPublicEnabled = false
getgenv().AntiPublicWhitelist = {}

--âœ¨ å°†è¾“å…¥æ¡†å†…å®¹ â†’ è¡¨è½¬æ¢
local function updateWhitelist(text)
    local list = {}
    for name in string.gmatch(text, "([^,%s]+)") do
        table.insert(list, name)
    end
    getgenv().AntiPublicWhitelist = list
end

--âœ¨ ä¸»åŠŸèƒ½ï¼šæ£€æµ‹æ˜¯å¦è¦ kick è‡ªå·±
local function checkServerPlayers()
    while getgenv().AntiPublicEnabled do
        task.wait(3)

        if not getgenv().AntiPublicEnabled then break end

        local Players = game:GetService("Players")
        local others = {}
        local whitelistFound = false

        for _, p in ipairs(Players:GetPlayers()) do
            if p ~= player then
                local name = p.Name

                -- æ£€æŸ¥æ˜¯ä¸æ˜¯ whitelist äºº
                local isWhitelisted = table.find(getgenv().AntiPublicWhitelist, name) ~= nil

                if isWhitelisted then
                    whitelistFound = true
                else
                    table.insert(others, name)
                end
            end
        end

        -- ðŸŸ¢ å¦‚æžœ whitelist é‡Œé¢çš„äººåœ¨ï¼Œä½†æ²¡æœ‰å…¶ä»–äºº â†’ ä¸ kick
        if whitelistFound and #others == 0 then
            continue
        end

        -- âŒ æœ‰é™Œç”ŸçŽ©å®¶ï¼ˆothers > 0ï¼‰â†’ Kick
        if #others > 0 then
            local reason = "Anti Public Server: Detected Non-Whitelist Player(s): " .. table.concat(others, ", ")
            player:Kick(reason)
            break
        end
    end
end

--ðŸŸ¢ Anti Public Server Toggle
local antiPublicToggle = PlayerTab:Toggle({
    Flag = "Toggle2",
    Title = "Anti Public Server",
    Desc = "Automatically kicks you from public servers when non-whitelisted players are detected.",
    Value = false,
    Callback = function(state)
        getgenv().AntiPublicEnabled = state

        if state then
            task.spawn(checkServerPlayers)
        end
    end,
})

--ðŸ“ Whitelist è¾“å…¥æ¡†
local whitelistInput = PlayerTab:Input({
    Flag = "Input1",
    Title = "Whitelist Player",
    Desc = "Enter player username (Not Display Name) separated by commas to whitelist them.",
    Value = "",
    Type = "Textarea",
    Placeholder = "User1, User2, User3",
    Callback = function(input)
        updateWhitelist(input)
    end,
})


local RankingTab = Window:Tab({
        Title = "Ranking",
        Icon = "chart-line",
    })

-- âœ… Auto Rank Up
local autoRankUpToggle = RankingTab:Toggle({
    Flag = "RankUp1",
    Title = "Auto Rank Up",
    Desc = "Automatically rank up",
    Default = false,
    Callback = function(state)
        if state then
            getgenv().AutoRankUpRunning = true
            task.spawn(function()
                while getgenv().AutoRankUpRunning do
                    pcall(function()
                        game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                            ["Upgrading_Name"] = "Rank",
                            ["Action"] = "_Upgrades",
                            ["Upgrade_Name"] = "Rank_Up",
                        })
                    end)
                    task.wait(10)
                end
            end)
        else
            getgenv().AutoRankUpRunning = false
        end
    end,
})

--Auto Prestige
local autoPrestigeToggle = RankingTab:Toggle({
    Flag = "AutoPrestige1",
    Title = "Auto Prestige",
    Desc = "Automatically prestige levels",
    Default = false,
    Callback = function(state)
        if state then
            getgenv().AutoPrestigeRunning = true
            task.spawn(function()
                while getgenv().AutoPrestigeRunning do
                    pcall(function()
                        -- âœ… è‡ªåŠ¨å‡çº§å£°æœ›
                        game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Action"] = "Level_Up_Prestige",
                        })
                    end)

                    task.wait(5)
                end
            end)
        else
            getgenv().AutoPrestigeRunning = false
        end
    end,
})

local CodesTab = Window:Tab({
        Title = "Codes",
        Icon = "ticket",
    })

-- âœ… Redeem Codes Button
local redeemCodesButton = CodesTab:Button({
    Flag = "RedeemCodes1",
    Title = "Redeem All Codes",
    Desc = "Redeem all codes automatically.",
    Locked = false,
    Callback = function()
    local codes = {"SlashX", "Derp", "Heyyyo", 
    "Update32","Update32Code","Update32Code2","Update32Code3","295MVisits","Update32SuperCode",
    "Update32P2","Update32P2Code","Update32P2Code2","Update32P2Code3","815KFav","Update32Part2RestartCode",
    "Update32P3","Update32P3Code","Update32P3Code2","Update32P3Code3","820KFav","Super32Part3Code","Super32Part3Code2",
    "Update33","Update33Code","Update33Code2","Update33Code3","825KFav","33UltraCode"


}
    for _, code in ipairs(codes) do
         game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
            ["Action"] = "_Redeem_Code", 
			["Text"] = code,
         })
                task.wait(0.1)
            end
   end,
})

-------------------------------------------------
local CollectTab = Window:Tab({
        Title = "Collect",
        Icon = "gift",
    })

--Auto Collect Hourly and Daily Rewards
local hourlyDailyRewardsToggle = CollectTab:Toggle({
    Flag = "HourlyDailyRewards1",
    Title = "Auto Collect Hourly and Daily Rewards",
    Desc = "Automatically collect hourly and daily rewards",
    Default = false,
    Callback = function(state)
        if state then
            getgenv().HourlyDailyRewardsRunning = true
            task.spawn(function()
                while getgenv().HourlyDailyRewardsRunning do
                    pcall(function()
                        -- âœ… è‡ªåŠ¨é¢†å–æ¯å°æ—¶å¥–åŠ±
                        game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                            ["Value"] = true,
                            ["Path"] = {
                                [1] = "Settings",
                                [2] = "Auto_Hourly_Rewards",
                            },
                            ["Action"] = "Settings",
                        })

                        -- âœ… è‡ªåŠ¨é¢†å–æ¯æ—¥å¥–åŠ±
                        game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                            ["Value"] = true,
                            ["Path"] = {
                                [1] = "Settings",
                                [2] = "Auto_Daily_Rewards",
                            },
                            ["Action"] = "Settings",
                        })
                    end)

                    -- æ¯ 5 åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡ï¼ˆ300 ç§’ï¼‰
                    task.wait(5)
                end
            end)
        else
            getgenv().HourlyDailyRewardsRunning = false
        end
    end,
})

CollectTab:Divider()

--Auto Claim Group Chest
local claimGroupChestToggle = CollectTab:Toggle({
    Flag = "ClaimGroupChest1",
    Title = "Auto Claim Group Chest",
    Desc = "Automatically claim group chest",
    Default = false,
    Callback = function(state)
        if state then
            getgenv().ClaimGroupChestRunning = true
            task.spawn(function()
                while getgenv().ClaimGroupChestRunning do
                    pcall(function()
                        -- âœ… è‡ªåŠ¨å‡çº§å£°æœ›
                        game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Action"] = "_Chest_Claim",
                        ["Name"] = "Group",
                        })
                    end)

                    task.wait(60)
                end
            end)
        else
            getgenv().ClaimGroupChestRunning = false
        end
    end,
})

--Auto Claim Premium Chest
local claimPremiumChestToggle = CollectTab:Toggle({
    Flag = "ClaimPremiumChest1",
    Title = "Auto Claim Premium Chest",
    Desc = "Automatically claim premium chest",
    Default = false,
    Callback = function(state)
        if state then
            getgenv().ClaimPremiumChestRunning = true
            task.spawn(function()
                while getgenv().ClaimPremiumChestRunning do
                    pcall(function()
                        -- âœ… è‡ªåŠ¨å‡çº§å£°æœ›
                        game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Action"] = "_Chest_Claim",
                        ["Name"] = "Premium",
                        })
                    end)

                    task.wait(60)
                end
            end)
        else
            getgenv().ClaimPremiumChestRunning = false
        end
    end,
})

--Auto Claim VIP Chest
local claimVIPChestToggle = CollectTab:Toggle({
    Flag = "ClaimVIPChest1",
    Title = "Auto Claim VIP Chest",
    Desc = "Automatically claim VIP chest",
    Default = false,
    Callback = function(state)
        if state then
            getgenv().ClaimVIPChestRunning = true
            task.spawn(function()
                while getgenv().ClaimVIPChestRunning do
                    pcall(function()
                        -- âœ… è‡ªåŠ¨å‡çº§å£°æœ›
                        game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Action"] = "_Chest_Claim",
                        ["Name"] = "Vip",
                        })
                    end)

                    task.wait(60)
                end
            end)
        else
            getgenv().ClaimVIPChestRunning = false
        end
    end,
})

--Auto Claim Daily Chest
local claimDailyChestToggle = CollectTab:Toggle({
    Name = "Auto Claim Daily Chest",
    Title = "Auto Claim Daily Chest",
    Desc = "Automatically claim daily chest",
    Default = false,
    Callback = function(state)
        if state then
            getgenv().ClaimDailyChestRunning = true
            task.spawn(function()
                while getgenv().ClaimDailyChestRunning do
                    pcall(function()
                        game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Action"] = "_Chest_Claim",
                        ["Name"] = "Daily",
                        })
                    end)

                    task.wait(60)
                end
            end)
        else
            getgenv().ClaimDailyChestRunning = false
        end
    end,
})

--Auto Claim Christmas Chest
--[[local claimChristmasChestToggle = CollectTab:Toggle({
    Name = "Auto Claim Christmas Chest",
    Title = "Auto Claim Christmas Chest",
    Desc = "Automatically claim christmas chest",
    Default = false,
    Callback = function(state)
        if state then
            getgenv().ClaimChristmasChestRunning = true
            task.spawn(function()
                while getgenv().ClaimChristmasChestRunning do
                    pcall(function()
                        game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Action"] = "_Chest_Claim",
                        ["Name"] = "Christmas_Chest",
                        })
                    end)

                    task.wait(60)
                end
            end)
        else
            getgenv().ClaimChristmasChestRunning = false
        end
    end,
})

--Auto Claim Santa Chest
local claimSantaChestToggle = CollectTab:Toggle({
    Name = "Auto Claim Santa Chest",
    Title = "Auto Claim Santa Chest",
    Desc = "Automatically claim santa chest",
    Default = false,
    Callback = function(state)
        if state then
            getgenv().ClaimSantaChestRunning = true
            task.spawn(function()
                while getgenv().ClaimSantaChestRunning do
                    pcall(function()
                        game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Action"] = "_Chest_Claim",
                        ["Name"] = "Santa_Chest",
                        })
                    end)

                    task.wait(60)
                end
            end)
        else
            getgenv().ClaimSantaChestRunning = false
        end
    end,
})

--Auto Claim Ice Chest
local claimIceChestToggle = CollectTab:Toggle({
    Name = "Auto Claim Ice Chest",
    Title = "Auto Claim Ice Chest",
    Desc = "Automatically claim ice chest",
    Default = false,
    Callback = function(state)
        if state then
            getgenv().ClaimIceChestRunning = true
            task.spawn(function()
                while getgenv().ClaimIceChestRunning do
                    pcall(function()
                        game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Action"] = "_Chest_Claim",
                        ["Name"] = "Ice_Chest",
                        })
                    end)

                    task.wait(60)
                end
            end)
        else
            getgenv().ClaimIceChestRunning = false
        end
    end,
})

--Auto Claim Christmas Tree Chest
 local claimChristmasTreeChestToggle = CollectTab:Toggle({
    Name = "Auto Claim Christmas Tree Chest",
    Title = "Auto Claim Christmas Tree Chest",
    Desc = "Automatically claim christmas tree chest",
    Default = false,
    Callback = function(state)
        if state then
            getgenv().ClaimChristmasTreeChestRunning = true
            task.spawn(function()
                while getgenv().ClaimChristmasTreeChestRunning do
                    pcall(function()
                        game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Action"] = "_Chest_Claim",
                        ["Name"] = "Christmas_Tree_Chest",
                        })
                    end)

                    task.wait(60)
                end
            end)
        else
            getgenv().ClaimChristmasTreeChestRunning = false
        end
    end,
}) ]]


local ExchangeTab = Window:Tab({
        Title = "Exchange",
        Icon = "repeat",
    })

getgenv().AutoExchangeW1Running = false
getgenv().AutoExchangeW2Running = false
getgenv().AutoExchangeCoinsRunning = false
getgenv().AutoExchangeMaterialsRunning = false

local ExchangeW1Options = {
    "Green Upgrade Token","Dragon Race Token","Saiyan Token","Sword Token","Pirate Crew Token","Demon Fruit Token","Haki Token","Reiatsu Token","Zanpakuto Token","Pressure Token","Cursed Token","Cursed Finger","Breathing Token","Demon Arts Token",
    "Hunter Rank Token","ReAwakening Token","Monarch Token","Grimoire Token","Water Spirit Token","Wind Spirit Token","Fire Spirit Token","Chakra Token","Eye Token","Orange Upgrade Token","Granny Token","Gold Ball Token","Lucky Spirit Token","Energy TCG Token","Damage TCG Token","Ten Token","Greedy Token",
    "Families Token","Titan Token","Spinal Fluid Token","Sins Token","Commandments Token","Fortitude Token","Kaiju Token","Kaiju Energy Token","Ultimate Skill Token","Species Token","Demon Energy Token","Demon Damage Token","Demon Luck Token","Demon Coins Token","Energy Rune Token","Weapon Rune Token","Swordsman Energy Token","Swordsman Damage Token","Sin Upgrade Token",
    "Stand Token","Ripple Token","Onomatopoeia Token","Requiem Token","CCG Token","Kagune Token","Kakuhou Token","Debiru Token","Akuma Token","Akuma Damange Token","Flesh Token","Akuma Energy Token","Pokita Token","Mushi Token","Infernal Token","Flare Token","Ignition Token","Hellfire Token","Adolla Token","Fire Company Token","Adolla Blessing Token"
}

local ExchangeW1Map = {
    --W1 TO W5
    ["Green Upgrade Token"] = {Product_Id = "1", Bench_Name = "Token_Exchange_World_1_to_5"},
    ["Dragon Race Token"] = {Product_Id = "2", Bench_Name = "Token_Exchange_World_1_to_5"},
    ["Saiyan Token"] = {Product_Id = "3", Bench_Name = "Token_Exchange_World_1_to_5"},
    ["Sword Token"] = {Product_Id = "4", Bench_Name = "Token_Exchange_World_1_to_5"},
    ["Pirate Crew Token"] = {Product_Id = "5", Bench_Name = "Token_Exchange_World_1_to_5"},
    ["Demon Fruit Token"] = {Product_Id = "6", Bench_Name = "Token_Exchange_World_1_to_5"},
    ["Haki Token"] = {Product_Id = "7", Bench_Name = "Token_Exchange_World_1_to_5"},
    ["Reiatsu Token"] = {Product_Id = "8", Bench_Name = "Token_Exchange_World_1_to_5"},
    ["Zanpakuto Token"] = {Product_Id = "9", Bench_Name = "Token_Exchange_World_1_to_5"},
    ["Pressure Token"] = {Product_Id = "10", Bench_Name = "Token_Exchange_World_1_to_5"},
    ["Cursed Token"] = {Product_Id = "11", Bench_Name = "Token_Exchange_World_1_to_5"},
    ["Cursed Finger"] = {Product_Id = "12", Bench_Name = "Token_Exchange_World_1_to_5"},
    ["Breathing Token"] = {Product_Id = "13", Bench_Name = "Token_Exchange_World_1_to_5"},
    ["Demon Arts Token"] = {Product_Id = "14", Bench_Name = "Token_Exchange_World_1_to_5"},

    --W6 TO W10
    ["Hunter Rank Token"] = {Product_Id = "1", Bench_Name = "Token_Exchange_World_6_to_10"},
    ["ReAwakening Token"] = {Product_Id = "2", Bench_Name = "Token_Exchange_World_6_to_10"},
    ["Monarch Token"] = {Product_Id = "3", Bench_Name = "Token_Exchange_World_6_to_10"},
    ["Grimoire Token"] = {Product_Id = "4", Bench_Name = "Token_Exchange_World_6_to_10"},
    ["Water Spirit Token"] = {Product_Id = "5", Bench_Name = "Token_Exchange_World_6_to_10"},
    ["Wind Spirit Token"] = {Product_Id = "6", Bench_Name = "Token_Exchange_World_6_to_10"},
    ["Fire Spirit Token"] = {Product_Id = "7", Bench_Name = "Token_Exchange_World_6_to_10"},
    ["Chakra Token"] = {Product_Id = "8", Bench_Name = "Token_Exchange_World_6_to_10"},
    ["Eye Token"] = {Product_Id = "9", Bench_Name = "Token_Exchange_World_6_to_10"},
    ["Orange Upgrade Token"] = {Product_Id = "10", Bench_Name = "Token_Exchange_World_6_to_10"},
    ["Granny Token"] = {Product_Id = "11", Bench_Name = "Token_Exchange_World_6_to_10"},
    ["Gold Ball Token"] = {Product_Id = "12", Bench_Name = "Token_Exchange_World_6_to_10"},
    ["Lucky Spirit Token"] = {Product_Id = "13", Bench_Name = "Token_Exchange_World_6_to_10"},
    ["Energy TCG Token"] = {Product_Id = "14", Bench_Name = "Token_Exchange_World_6_to_10"},
    ["Damage TCG Token"] = {Product_Id = "15", Bench_Name = "Token_Exchange_World_6_to_10"},
    ["Ten Token"] = {Product_Id = "16", Bench_Name = "Token_Exchange_World_6_to_10"},
    ["Greedy Token"] = {Product_Id = "17", Bench_Name = "Token_Exchange_World_6_to_10"},

    --W11 TO W15
    ["Families Token"] = {Product_Id = "1", Bench_Name = "Token_Exchange_World_11_to_15"},
    ["Titan Token"] = {Product_Id = "2", Bench_Name = "Token_Exchange_World_11_to_15"},
    ["Spinal Fluid Token"] = {Product_Id = "3", Bench_Name = "Token_Exchange_World_11_to_15"},
    ["Sins Token"] = {Product_Id = "4", Bench_Name = "Token_Exchange_World_11_to_15"},
    ["Commandments Token"] = {Product_Id = "5", Bench_Name = "Token_Exchange_World_11_to_15"},
    ["Fortitude Token"] = {Product_Id = "6", Bench_Name = "Token_Exchange_World_11_to_15"},
    ["Kaiju Token"] = {Product_Id = "7", Bench_Name = "Token_Exchange_World_11_to_15"},
    ["Kaiju Energy Token"] = {Product_Id = "8", Bench_Name = "Token_Exchange_World_11_to_15"},
    ["Ultimate Skill Token"] = {Product_Id = "9", Bench_Name = "Token_Exchange_World_11_to_15"},
    ["Species Token"] = {Product_Id = "10", Bench_Name = "Token_Exchange_World_11_to_15"},
    ["Demon Energy Token"] = {Product_Id = "11", Bench_Name = "Token_Exchange_World_11_to_15"},
    ["Demon Damage Token"] = {Product_Id = "12", Bench_Name = "Token_Exchange_World_11_to_15"},
    ["Demon Luck Token"] = {Product_Id = "13", Bench_Name = "Token_Exchange_World_11_to_15"},
    ["Demon Coins Token"] = {Product_Id = "14", Bench_Name = "Token_Exchange_World_11_to_15"},
    ["Energy Rune Token"] = {Product_Id = "15", Bench_Name = "Token_Exchange_World_11_to_15"},
    ["Weapon Rune Token"] = {Product_Id = "16", Bench_Name = "Token_Exchange_World_11_to_15"},
    ["Swordsman Energy Token"] = {Product_Id = "17", Bench_Name = "Token_Exchange_World_11_to_15"},
    ["Swordsman Damage Token"] = {Product_Id = "18", Bench_Name = "Token_Exchange_World_11_to_15"},
    ["Sin Upgrade Token"] = {Product_Id = "19", Bench_Name = "Token_Exchange_World_11_to_15"},

    --W16 TO W19
    ["Stand Token"] = {Product_Id = "1", Bench_Name = "Token_Exchange_World_16_to_19"},
    ["Ripple Token"] = {Product_Id = "2", Bench_Name = "Token_Exchange_World_16_to_19"},
    ["Onomatopoeia Token"] = {Product_Id = "3", Bench_Name = "Token_Exchange_World_16_to_19"},
    ["Requiem Token"] = {Product_Id = "4", Bench_Name = "Token_Exchange_World_16_to_19"},
    ["CCG Token"] = {Product_Id = "5", Bench_Name = "Token_Exchange_World_16_to_19"},
    ["Kagune Token"] = {Product_Id = "6", Bench_Name = "Token_Exchange_World_16_to_19"},
    ["Kakuhou Token"] = {Product_Id = "7", Bench_Name = "Token_Exchange_World_16_to_19"},
    ["Debiru Token"] = {Product_Id = "8", Bench_Name = "Token_Exchange_World_16_to_19"},
    ["Akuma Token"] = {Product_Id = "9", Bench_Name = "Token_Exchange_World_16_to_19"},
    ["Akuma Damange Token"] = {Product_Id = "10", Bench_Name = "Token_Exchange_World_16_to_19"},
    ["Flesh Token"] = {Product_Id = "11", Bench_Name = "Token_Exchange_World_16_to_19"},
    ["Akuma Energy Token"] = {Product_Id = "12", Bench_Name = "Token_Exchange_World_16_to_19"},
    ["Pokita Token"] = {Product_Id = "13", Bench_Name = "Token_Exchange_World_16_to_19"},
    ["Mushi Token"] = {Product_Id = "14", Bench_Name = "Token_Exchange_World_16_to_19"},
    ["Infernal Token"] = {Product_Id = "15", Bench_Name = "Token_Exchange_World_16_to_19"},
    ["Flare Token"] = {Product_Id = "16", Bench_Name = "Token_Exchange_World_16_to_19"},
    ["Ignition Token"] = {Product_Id = "17", Bench_Name = "Token_Exchange_World_16_to_19"},
    ["Hellfire Token"] = {Product_Id = "18", Bench_Name = "Token_Exchange_World_16_to_19"},
    ["Adolla Token"] = {Product_Id = "19", Bench_Name = "Token_Exchange_World_16_to_19"},
    ["Fire Company Token"] = {Product_Id = "20", Bench_Name = "Token_Exchange_World_16_to_19"},
    ["Adolla Blessing Token"] = {Product_Id = "21", Bench_Name = "Token_Exchange_World_16_to_19"},
}

local ExchangeW2Options = {
    "Frost Demon Token","Grand Elder Token","Saiyan Lvl Token","Dragon Race Lvl Token","Eternal Dragon Token","Dragon Blessing Token","Scythe Token","Baikai Token","Espada Token","Reiatsu Lvl Token","Zanpakuto Lvl Token","Shadow Garden Token","Shadow Arts Token","Garden Lvl Token","Arts Lvl Token","Threat Level Token","Punch Token","Threat Lvl Token","Punch Lvl Token","Adventurer Token","Magic Tier Token","Mana Growth Token","Ultimate Cast Token","Adventurer Lvl Token","Magic Tier Lvl Token","Thriller Zombie Token","Nightmare Evo Token","Special Zombie Token","Zombie Booster Token",
    "Assassin Grade Token","Assassin Skill Token","Assassin Energy Token","Assassin Damage Token","Spirit Pact Token","Witch Factor Token","Artificial Spirit Token","Gospel Cursed Token","Geass Potential Token","Geass Perception Token","Geass Soul Token","Geass Creation Token","Geass Precognition Token","Geass Time Token","Geass Telepathic Token","Geass Manipulation Token","Geass Obedience Token","Knightmare Token","IQ Token","Scientific Token","Eye Token 2","Shinobi Clan Token","Genkai Token","Chakra Infusion Token","Energy Teigu Token","Damage Teigu Token","Psycho Flow Token","Psycho Destruction Token",
    "Slayer Mark Token","Demon Bloodline Token","Magic Type Token","The Muscule Token","Eagle Token","Whale Token","Wolf Token","DxD Species Token","Sacred Gear Token","Dragon Arms Token","Dragon Torso Token","Dragon Wings Token","Dragon Helmet Token","Dragon Rank Token","Mage Rank Token","Magic Items Token","Magic Shield Token","Vassal Token","Legendary Bow Token","Legendary Spear Token","Legendary Sword Token","Legendary Shield Token"
}

local ExchangeW2Map = {
    --W20 TO W25
    ["Frost Demon Token"] = {Product_Id = "1", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Grand Elder Token"] = {Product_Id = "2", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Saiyan Lvl Token"] = {Product_Id = "3", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Dragon Race Lvl Token"] = {Product_Id = "4", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Eternal Dragon Token"] = {Product_Id = "5", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Dragon Blessing Token"] = {Product_Id = "6", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Scythe Token"] = {Product_Id = "7", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Baikai Token"] = {Product_Id = "8", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Espada Token"] = {Product_Id = "9", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Reiatsu Lvl Token"] = {Product_Id = "10", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Zanpakuto Lvl Token"] = {Product_Id = "11", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Shadow Garden Token"] = {Product_Id = "12", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Shadow Arts Token"] = {Product_Id = "13", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Garden Lvl Token"] = {Product_Id = "14", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Arts Lvl Token"] = {Product_Id = "15", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Threat Level Token"] = {Product_Id = "16", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Punch Token"] = {Product_Id = "17", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Threat Lvl Token"] = {Product_Id = "18", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Punch Lvl Token"] = {Product_Id = "19", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Adventurer Token"] = {Product_Id = "20", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Magic Tier Token"] = {Product_Id = "21", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Mana Growth Token"] = {Product_Id = "22", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Ultimate Cast Token"] = {Product_Id = "23", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Adventurer Lvl Token"] = {Product_Id = "24", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Magic Tier Lvl Token"] = {Product_Id = "25", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Thriller Zombie Token"] = {Product_Id = "26", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Nightmare Evo Token"] = {Product_Id = "27", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Special Zombie Token"] = {Product_Id = "28", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Zombie Booster Token"] = {Product_Id = "29", Bench_Name = "Token_Exchange_World_20_to_25"},

    --W26 TO W30
    ["Assassin Grade Token"] = {Product_Id = "1", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Assassin Skill Token"] = {Product_Id = "2", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Assassin Energy Token"] = {Product_Id = "3", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Assassin Damage Token"] = {Product_Id = "4", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Spirit Pact Token"] = {Product_Id = "5", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Witch Factor Token"] = {Product_Id = "6", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Artificial Spirit Token"] = {Product_Id = "7", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Gospel Cursed Token"] = {Product_Id = "8", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Geass Potential Token"] = {Product_Id = "9", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Geass Perception Token"] = {Product_Id = "10", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Geass Soul Token"] = {Product_Id = "11", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Geass Creation Token"] = {Product_Id = "12", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Geass Precognition Token"] = {Product_Id = "13", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Geass Time Token"] = {Product_Id = "14", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Geass Telepathic Token"] = {Product_Id = "15", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Geass Manipulation Token"] = {Product_Id = "16", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Geass Obedience Token"] = {Product_Id = "17", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Knightmare Token"] = {Product_Id = "18", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["IQ Token"] = {Product_Id = "19", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Scientific Token"] = {Product_Id = "20", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Eye Token 2"] = {Product_Id = "21", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Shinobi Clan Token"] = {Product_Id = "22", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Genkai Token"] = {Product_Id = "23", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Chakra Infusion Token"] = {Product_Id = "24", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Energy Teigu Token"] = {Product_Id = "25", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Damage Teigu Token"] = {Product_Id = "26", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Psycho Flow Token"] = {Product_Id = "27", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Psycho Destruction Token"] = {Product_Id = "28", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Slayer Mark Token"] = {Product_Id = "29", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Demon Bloodline Token"] = {Product_Id = "30", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Magic Type Token"] = {Product_Id = "31", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["The Muscule Token"] = {Product_Id = "32", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Eagle Token"] = {Product_Id = "33", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Whale Token"] = {Product_Id = "34", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Wolf Token"] = {Product_Id = "35", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["DxD Species Token"] = {Product_Id = "36", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Sacred Gear Token"] = {Product_Id = "37", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Dragon Arms Token"] = {Product_Id = "38", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Dragon Torso Token"] = {Product_Id = "39", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Dragon Wings Token"] = {Product_Id = "40", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Dragon Helmet Token"] = {Product_Id = "41", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Dragon Rank Token"] = {Product_Id = "42", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Mage Rank Token"] = {Product_Id = "43", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Magic Items Token"] = {Product_Id = "44", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Magic Shield Token"] = {Product_Id = "45", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Vassal Token"] = {Product_Id = "46", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Legendary Bow Token"] = {Product_Id = "47", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Legendary Spear Token"] = {Product_Id = "48", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Legendary Sword Token"] = {Product_Id = "49", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Legendary Shield Token"] = {Product_Id = "50", Bench_Name = "Token_Exchange_World_26_to_30"},
}

local ExchangeCoinsOptions = {
    "Eminence Coin","Assassin Flow Coin","Lethal Coin","Scythe Coin"
}

local ExchangeCoinsMap = {
    --Exchange Coins
    ["Eminence Coin"] = {Product_Id = "1", Bench_Name = "Coins_Exchange"},
    ["Assassin Flow Coin"] = {Product_Id = "2", Bench_Name = "Coins_Exchange"},
    ["Lethal Coin"] = {Product_Id = "3", Bench_Name = "Coins_Exchange"},
    ["Scythe Coin"] = {Product_Id = "4", Bench_Name = "Coins_Exchange"},
}

local ExchangeMaterialsOptions = {
    "Zombie Glue","Zombie Saw","Tome of Wisdom","Wood","Sap","Plant Fiber","Bones","Fur","Tusk","Stone","Coal","Iron Ore","Shells","Salt","Pearls","Acid","Legendary Beast Essence","Mythical Beast Essence","Phantom Beast Essence","Supreme Beast Essence"
}

local ExchangeMaterialsMap = {
    --Exchange Materials
    ["Zombie Glue"] = {Product_Id = "1", Bench_Name = "Materials_Exchange"},
    ["Zombie Saw"] = {Product_Id = "2", Bench_Name = "Materials_Exchange"},
    ["Tome of Wisdom"] = {Product_Id = "3", Bench_Name = "Materials_Exchange"},
    ["Wood"] = {Product_Id = "4", Bench_Name = "Materials_Exchange"},
    ["Sap"] = {Product_Id = "5", Bench_Name = "Materials_Exchange"},
    ["Plant Fiber"] = {Product_Id = "6", Bench_Name = "Materials_Exchange"},
    ["Bones"] = {Product_Id = "7", Bench_Name = "Materials_Exchange"},
    ["Fur"] = {Product_Id = "8", Bench_Name = "Materials_Exchange"},
    ["Tusk"] = {Product_Id = "9", Bench_Name = "Materials_Exchange"},
    ["Stone"] = {Product_Id = "10", Bench_Name = "Materials_Exchange"},
    ["Coal"] = {Product_Id = "11", Bench_Name = "Materials_Exchange"},
    ["Iron Ore"] = {Product_Id = "12", Bench_Name = "Materials_Exchange"},
    ["Shells"] = {Product_Id = "13", Bench_Name = "Materials_Exchange"},
    ["Salt"] = {Product_Id = "14", Bench_Name = "Materials_Exchange"},
    ["Pearls"] = {Product_Id = "15", Bench_Name = "Materials_Exchange"},
    ["Acid"] = {Product_Id = "16", Bench_Name = "Materials_Exchange"},
    ["Legendary Beast Essence"] = {Product_Id = "17", Bench_Name = "Materials_Exchange"},
    ["Mythical Beast Essence"] = {Product_Id = "18", Bench_Name = "Materials_Exchange"},
    ["Phantom Beast Essence"] = {Product_Id = "19", Bench_Name = "Materials_Exchange"},
    ["Supreme Beast Essence"] = {Product_Id = "20", Bench_Name = "Materials_Exchange"},
}

local ExchangeW1Dropdown = ExchangeTab:Dropdown({
    Flag = "ExchangeW1Dropdown",
    Title = "Select W1 TO W19 Token",
    Values = ExchangeW1Options,
    Value = {},
    Multi = true,
    AllowNone = true,
    Callback = function(option)
        getgenv().SelectedTokenW1 = option
    end,
})

local ExchangeW1Toggle = ExchangeTab:Toggle({
    Flag = "AutoExchangeW1Toggle",
    Title = "Auto Exchange Token to Exchange Coin",
    Desc = "Automatically Exchange Selected Token to Exchange Coin",
    Default = false,
    Callback = function(state)
        getgenv().AutoExchangeW1Running = state
        if state then
            task.spawn(function()
                while getgenv().AutoExchangeW1Running do
                    if getgenv().SelectedTokenW1 and #getgenv().SelectedTokenW1 > 0 then
                        for _, tokenName in ipairs(getgenv().SelectedTokenW1) do
                            local tokenData = ExchangeW1Map[tokenName]
                            if tokenData then
                                game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                    ["Bench_Name"] = tokenData.Bench_Name,
                                    ["Product_Id"] = tonumber(tokenData.Product_Id),
                                    ["Action"] = "Merchant_Purchase",
                                    ["Amount"] = 100,
                                })
                                task.wait(0.1)  -- ç­‰å¾…0.1ç§’åŽå‘é€ä¸‹ä¸€ä¸ª
                            end
                        end
                    end
                end
            end)
        else
            -- stopped
        end
    end,
})

ExchangeTab:Divider()

local ExchangeW2Dropdown = ExchangeTab:Dropdown({
    Flag = "ExchangeW2Dropdown",
    Title = "Select W20 TO W30 Token",
    Values = ExchangeW2Options,
    Value = {},
    Multi = true,
    AllowNone = true,
    Callback = function(option)
        getgenv().SelectedTokenW2 = option
    end,
})

local ExchangeW2Toggle = ExchangeTab:Toggle({
    Flag = "AutoExchangeW2Toggle",
    Title = "Auto Exchange Token to Exchange Coin 2",
    Desc = "Automatically Exchange Selected Token to Exchange Coin 2",
    Default = false,
    Callback = function(state)
        getgenv().AutoExchangeW2Running = state
        if state then
            task.spawn(function()
                while getgenv().AutoExchangeW2Running do
                    if getgenv().SelectedTokenW2 and #getgenv().SelectedTokenW2 > 0 then
                        for _, tokenName in ipairs(getgenv().SelectedTokenW2) do
                            local tokenData = ExchangeW2Map[tokenName]
                            if tokenData then
                                game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                    ["Bench_Name"] = tokenData.Bench_Name,
                                    ["Product_Id"] = tonumber(tokenData.Product_Id),
                                    ["Action"] = "Merchant_Purchase",
                                    ["Amount"] = 100,
                                })
                                task.wait(0.1)  -- ç­‰å¾…0.1ç§’åŽå‘é€ä¸‹ä¸€ä¸ª
                            end
                        end
                    end
                end
            end)
        else
            -- stopped
        end
    end,
})

ExchangeTab:Divider()

local ExchangeCoinsDropdown = ExchangeTab:Dropdown({
    Flag = "ExchangeCoinsDropdown",
    Title = "Select Coins",
    Values = ExchangeCoinsOptions,
    Value = {},
    Multi = true,
    AllowNone = true,
    Callback = function(option)
        getgenv().SelectedCoins = option
    end,
})

local ExchangeCoinsToggle = ExchangeTab:Toggle({
    Flag = "AutoExchangeCoinsToggle",
    Title = "Auto Exchange Coins to Exchange Coin 2",
    Desc = "Automatically Exchange Selected Coins to Exchange Coin 2",
    Default = false,
    Callback = function(state)
        getgenv().AutoExchangeCoinsRunning = state
        if state then
            task.spawn(function()
                while getgenv().AutoExchangeCoinsRunning do
                    if getgenv().SelectedCoins and #getgenv().SelectedCoins > 0 then
                        for _, coinName in ipairs(getgenv().SelectedCoins) do
                            local coinData = ExchangeCoinsMap[coinName]
                            if coinData then
                                game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                    ["Bench_Name"] = coinData.Bench_Name,
                                    ["Product_Id"] = tonumber(coinData.Product_Id),
                                    ["Action"] = "Merchant_Purchase",
                                    ["Amount"] = 1,
                                })
                                task.wait(0.1)  -- ç­‰å¾…0.1ç§’åŽå‘é€ä¸‹ä¸€ä¸ª
                            end
                        end
                    end
                end
            end)
        else
            -- stopped
        end
    end,
})

ExchangeTab:Divider()

local ExchangeMaterialsDropdown = ExchangeTab:Dropdown({
    Flag = "ExchangeMaterialsDropdown",
    Title = "Select Materials",
    Values = ExchangeMaterialsOptions,
    Value = {},
    Multi = true,
    AllowNone = true,
    Callback = function(option)
        getgenv().SelectedMaterials = option
    end,
})

local ExchangeMaterialsToggle = ExchangeTab:Toggle({
    Flag = "AutoExchangeMaterialsToggle",
    Title = "Auto Exchange Materials to Exchange Coin 2",
    Desc = "Automatically Exchange Selected Materials to Exchange Coin 2",
    Default = false,
    Callback = function(state)
        getgenv().AutoExchangeMaterialsRunning = state
        if state then
            task.spawn(function()
                while getgenv().AutoExchangeMaterialsRunning do
                    if getgenv().SelectedMaterials and #getgenv().SelectedMaterials > 0 then
                        for _, materialName in ipairs(getgenv().SelectedMaterials) do
                            local materialData = ExchangeMaterialsMap[materialName]
                            if materialData then
                                game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                    ["Bench_Name"] = materialData.Bench_Name,
                                    ["Product_Id"] = tonumber(materialData.Product_Id),
                                    ["Action"] = "Merchant_Purchase",
                                    ["Amount"] = 1,
                                })
                                task.wait(0.1)  -- ç­‰å¾…0.1ç§’åŽå‘é€ä¸‹ä¸€ä¸ª
                            end
                        end
                    end
                end
            end)
        else
            -- stopped
        end
    end,
})


local ExchangeShopTab = Window:Tab({
        Title = "Exchange Shop",
        Icon = "shopping-basket",
    })

getgenv().AutoExchangeShopW1Running = false
getgenv().AutoExchangeShopW2Running = false
getgenv().AutoExchangeShopW1KeysRunning = false

local ExchangeShopW1Options = {
    "Green Upgrade Token","Dragon Race Token","Saiyan Token","Sword Token","Pirate Crew Token","Demon Fruit Token","Haki Token","Reiatsu Token","Zanpakuto Token","Pressure Token","Cursed Token","Cursed Finger","Breathing Token","Demon Arts Token",
    "Hunter Rank Token","ReAwakening Token","Monarch Token","Grimoire Token","Water Spirit Token","Wind Spirit Token","Fire Spirit Token","Chakra Token","Eye Token","Orange Upgrade Token","Granny Token","Gold Ball Token","Lucky Spirit Token","Energy TCG Token","Damage TCG Token","Ten Token","Greedy Token",
    "Families Token","Titan Token","Spinal Fluid Token","Sins Token","Commandments Token","Fortitude Token","Kaiju Token","Kaiju Energy Token","Ultimate Skill Token","Species Token","Demon Energy Token","Demon Damage Token","Demon Luck Token","Demon Coins Token","Energy Rune Token","Weapon Rune Token","Swordsman Energy Token","Swordsman Damage Token","Sin Upgrade Token",
    "Stand Token","Ripple Token","Onomatopoeia Token","Requiem Token","CCG Token","Kagune Token","Kakuhou Token","Debiru Token","Akuma Token","Akuma Damange Token","Flesh Token","Akuma Energy Token","Pokita Token","Mushi Token","Infernal Token","Flare Token","Ignition Token","Hellfire Token","Adolla Token","Fire Company Token","Adolla Blessing Token"
    
}

local ExchangeShopW1Map = {
    --W1 TO W5
    ["Green Upgrade Token"] = {Product_Id = "1", Bench_Name = "Exchange_Shop_World_1_to_5"},
    ["Dragon Race Token"] = {Product_Id = "2", Bench_Name = "Exchange_Shop_World_1_to_5"},
    ["Saiyan Token"] = {Product_Id = "3", Bench_Name = "Exchange_Shop_World_1_to_5"},
    ["Sword Token"] = {Product_Id = "4", Bench_Name = "Exchange_Shop_World_1_to_5"},
    ["Pirate Crew Token"] = {Product_Id = "5", Bench_Name = "Exchange_Shop_World_1_to_5"},
    ["Demon Fruit Token"] = {Product_Id = "6", Bench_Name = "Exchange_Shop_World_1_to_5"},
    ["Haki Token"] = {Product_Id = "7", Bench_Name = "Exchange_Shop_World_1_to_5"},
    ["Reiatsu Token"] = {Product_Id = "8", Bench_Name = "Exchange_Shop_World_1_to_5"},
    ["Zanpakuto Token"] = {Product_Id = "9", Bench_Name = "Exchange_Shop_World_1_to_5"},
    ["Pressure Token"] = {Product_Id = "10", Bench_Name = "Exchange_Shop_World_1_to_5"},
    ["Cursed Token"] = {Product_Id = "11", Bench_Name = "Exchange_Shop_World_1_to_5"},
    ["Cursed Finger"] = {Product_Id = "12", Bench_Name = "Exchange_Shop_World_1_to_5"},
    ["Breathing Token"] = {Product_Id = "13", Bench_Name = "Exchange_Shop_World_1_to_5"},
    ["Demon Arts Token"] = {Product_Id = "14", Bench_Name = "Exchange_Shop_World_1_to_5"},

    --W6 TO W10
    ["Hunter Rank Token"] = {Product_Id = "1", Bench_Name = "Exchange_Shop_World_6_to_10"},
    ["ReAwakening Token"] = {Product_Id = "2", Bench_Name = "Exchange_Shop_World_6_to_10"},
    ["Monarch Token"] = {Product_Id = "3", Bench_Name = "Exchange_Shop_World_6_to_10"},
    ["Grimoire Token"] = {Product_Id = "4", Bench_Name = "Exchange_Shop_World_6_to_10"},
    ["Water Spirit Token"] = {Product_Id = "5", Bench_Name = "Exchange_Shop_World_6_to_10"},
    ["Wind Spirit Token"] = {Product_Id = "6", Bench_Name = "Exchange_Shop_World_6_to_10"},
    ["Fire Spirit Token"] = {Product_Id = "7", Bench_Name = "Exchange_Shop_World_6_to_10"},
    ["Chakra Token"] = {Product_Id = "8", Bench_Name = "Exchange_Shop_World_6_to_10"},
    ["Eye Token"] = {Product_Id = "9", Bench_Name = "Exchange_Shop_World_6_to_10"},
    ["Orange Upgrade Token"] = {Product_Id = "10", Bench_Name = "Exchange_Shop_World_6_to_10"},
    ["Granny Token"] = {Product_Id = "11", Bench_Name = "Exchange_Shop_World_6_to_10"},
    ["Gold Ball Token"] = {Product_Id = "12", Bench_Name = "Exchange_Shop_World_6_to_10"},
    ["Lucky Spirit Token"] = {Product_Id = "13", Bench_Name = "Exchange_Shop_World_6_to_10"},
    ["Energy TCG Token"] = {Product_Id = "14", Bench_Name = "Exchange_Shop_World_6_to_10"},
    ["Damage TCG Token"] = {Product_Id = "15", Bench_Name = "Exchange_Shop_World_6_to_10"},
    ["Ten Token"] = {Product_Id = "16", Bench_Name = "Exchange_Shop_World_6_to_10"},
    ["Greedy Token"] = {Product_Id = "17", Bench_Name = "Exchange_Shop_World_6_to_10"},

    --W11 TO W15
    ["Families Token"] = {Product_Id = "1", Bench_Name = "Exchange_Shop_World_11_to_15"},
    ["Titan Token"] = {Product_Id = "2", Bench_Name = "Exchange_Shop_World_11_to_15"},
    ["Spinal Fluid Token"] = {Product_Id = "3", Bench_Name = "Exchange_Shop_World_11_to_15"},
    ["Sins Token"] = {Product_Id = "4", Bench_Name = "Exchange_Shop_World_11_to_15"},
    ["Commandments Token"] = {Product_Id = "5", Bench_Name = "Exchange_Shop_World_11_to_15"},
    ["Fortitude Token"] = {Product_Id = "6", Bench_Name = "Exchange_Shop_World_11_to_15"},
    ["Kaiju Token"] = {Product_Id = "7", Bench_Name = "Exchange_Shop_World_11_to_15"},
    ["Kaiju Energy Token"] = {Product_Id = "8", Bench_Name = "Exchange_Shop_World_11_to_15"},
    ["Ultimate Skill Token"] = {Product_Id = "9", Bench_Name = "Exchange_Shop_World_11_to_15"},
    ["Species Token"] = {Product_Id = "10", Bench_Name = "Exchange_Shop_World_11_to_15"},
    ["Demon Energy Token"] = {Product_Id = "11", Bench_Name = "Exchange_Shop_World_11_to_15"},
    ["Demon Damage Token"] = {Product_Id = "12", Bench_Name = "Exchange_Shop_World_11_to_15"},
    ["Demon Luck Token"] = {Product_Id = "13", Bench_Name = "Exchange_Shop_World_11_to_15"},
    ["Demon Coins Token"] = {Product_Id = "14", Bench_Name = "Exchange_Shop_World_11_to_15"},
    ["Energy Rune Token"] = {Product_Id = "15", Bench_Name = "Exchange_Shop_World_11_to_15"},
    ["Weapon Rune Token"] = {Product_Id = "16", Bench_Name = "Exchange_Shop_World_11_to_15"},
    ["Swordsman Energy Token"] = {Product_Id = "17", Bench_Name = "Exchange_Shop_World_11_to_15"},
    ["Swordsman Damage Token"] = {Product_Id = "18", Bench_Name = "Exchange_Shop_World_11_to_15"},
    ["Sin Upgrade Token"] = {Product_Id = "19", Bench_Name = "Exchange_Shop_World_11_to_15"},

    --W16 TO W19
    ["Stand Token"] = {Product_Id = "1", Bench_Name = "Exchange_Shop_World_16_to_19"},
    ["Ripple Token"] = {Product_Id = "2", Bench_Name = "Exchange_Shop_World_16_to_19"},
    ["Onomatopoeia Token"] = {Product_Id = "3", Bench_Name = "Exchange_Shop_World_16_to_19"},
    ["Requiem Token"] = {Product_Id = "4", Bench_Name = "Exchange_Shop_World_16_to_19"},
    ["CCG Token"] = {Product_Id = "5", Bench_Name = "Exchange_Shop_World_16_to_19"},
    ["Kagune Token"] = {Product_Id = "6", Bench_Name = "Exchange_Shop_World_16_to_19"},
    ["Kakuhou Token"] = {Product_Id = "7", Bench_Name = "Exchange_Shop_World_16_to_19"},
    ["Debiru Token"] = {Product_Id = "8", Bench_Name = "Exchange_Shop_World_16_to_19"},
    ["Akuma Token"] = {Product_Id = "9", Bench_Name = "Exchange_Shop_World_16_to_19"},
    ["Akuma Damange Token"] = {Product_Id = "10", Bench_Name = "Exchange_Shop_World_16_to_19"},
    ["Flesh Token"] = {Product_Id = "11", Bench_Name = "Exchange_Shop_World_16_to_19"},
    ["Akuma Energy Token"] = {Product_Id = "12", Bench_Name = "Exchange_Shop_World_16_to_19"},
    ["Pokita Token"] = {Product_Id = "13", Bench_Name = "Exchange_Shop_World_16_to_19"},
    ["Mushi Token"] = {Product_Id = "14", Bench_Name = "Exchange_Shop_World_16_to_19"},
    ["Infernal Token"] = {Product_Id = "15", Bench_Name = "Exchange_Shop_World_16_to_19"},
    ["Flare Token"] = {Product_Id = "16", Bench_Name = "Exchange_Shop_World_16_to_19"},
    ["Ignition Token"] = {Product_Id = "17", Bench_Name = "Exchange_Shop_World_16_to_19"},
    ["Hellfire Token"] = {Product_Id = "18", Bench_Name = "Exchange_Shop_World_16_to_19"},
    ["Adolla Token"] = {Product_Id = "19", Bench_Name = "Exchange_Shop_World_16_to_19"},
    ["Fire Company Token"] = {Product_Id = "20", Bench_Name = "Exchange_Shop_World_16_to_19"},
    ["Adolla Blessing Token"] = {Product_Id = "21", Bench_Name = "Exchange_Shop_World_16_to_19"},
}

local ExchangeShopW1KeysOptions = {
    "Tournament Key","Restaurant Key","Progression Key","Titan Defense Key","Kaiju Key","Gleam Key","Ghoul Key","Chainsaw Key","Progression Key 2","Cursed Key","Netherworld Key","Sin Key"
}

local ExchangeShopW1KeysMap = {
    --Keys
    ["Tournament Key"] = {Product_Id = "1", Bench_Name = "Exchange_Shop_Keys"},
    ["Restaurant Key"] = {Product_Id = "2", Bench_Name = "Exchange_Shop_Keys"},
    ["Progression Key"] = {Product_Id = "3", Bench_Name = "Exchange_Shop_Keys"},
    ["Titan Defense Key"] = {Product_Id = "4", Bench_Name = "Exchange_Shop_Keys"},
    ["Kaiju Key"] = {Product_Id = "5", Bench_Name = "Exchange_Shop_Keys"},
    ["Gleam Key"] = {Product_Id = "6", Bench_Name = "Exchange_Shop_Keys"},
    ["Ghoul Key"] = {Product_Id = "7", Bench_Name = "Exchange_Shop_Keys"},
    ["Chainsaw Key"] = {Product_Id = "8", Bench_Name = "Exchange_Shop_Keys"},
    ["Progression Key 2"] = {Product_Id = "9", Bench_Name = "Exchange_Shop_Keys"},
    ["Cursed Key"] = {Product_Id = "10", Bench_Name = "Exchange_Shop_Keys"},
    ["Netherworld Key"] = {Product_Id = "11", Bench_Name = "Exchange_Shop_Keys"},
    ["Sin Key"] = {Product_Id = "12", Bench_Name = "Exchange_Shop_Keys"},
}

local ExchangeShopW1ProductsOptions = {
    "Coins Potion","Damage Potion","Energy Potion","Luck Potion","Exp Potion","Soul Potion","Stats Reset","Attack Range Potion I","Small Coins Potion","Small Damage Potion","Small Energy Potion","Small Luck Potion","Small To Coin Potion","Small To Damage Potion","Small To Energy Potion","Small To Luck Potion","Expensive Stats Reset","Shadow Soul Potion"
}

local ExchangeShopW1ProductsMap = {
    --Products
    ["Coins Potion"] = {Product_Id = "1", Bench_Name = "Exchange_Shop_Products"},
    ["Damage Potion"] = {Product_Id = "2", Bench_Name = "Exchange_Shop_Products"},
    ["Energy Potion"] = {Product_Id = "3", Bench_Name = "Exchange_Shop_Products"},
    ["Luck Potion"] = {Product_Id = "4", Bench_Name = "Exchange_Shop_Products"},
    ["Exp Potion"] = {Product_Id = "5", Bench_Name = "Exchange_Shop_Products"},
    ["Soul Potion"] = {Product_Id = "6", Bench_Name = "Exchange_Shop_Products"},
    ["Stats Reset"] = {Product_Id = "7", Bench_Name = "Exchange_Shop_Products"},
    ["Attack Range Potion I"] = {Product_Id = "8", Bench_Name = "Exchange_Shop_Products"},
    ["Small Coins Potion"] = {Product_Id = "9", Bench_Name = "Exchange_Shop_Products"},
    ["Small Damage Potion"] = {Product_Id = "10", Bench_Name = "Exchange_Shop_Products"},
    ["Small Energy Potion"] = {Product_Id = "11", Bench_Name = "Exchange_Shop_Products"},
    ["Small Luck Potion"] = {Product_Id = "12", Bench_Name = "Exchange_Shop_Products"},
    ["Small To Coin Potion"] = {Product_Id = "13", Bench_Name = "Exchange_Shop_Products"},
    ["Small To Damage Potion"] = {Product_Id = "14", Bench_Name = "Exchange_Shop_Products"},
    ["Small To Energy Potion"] = {Product_Id = "15", Bench_Name = "Exchange_Shop_Products"},
    ["Small To Luck Potion"] = {Product_Id = "16", Bench_Name = "Exchange_Shop_Products"},
    ["Expensive Stats Reset"] = {Product_Id = "17", Bench_Name = "Exchange_Shop_Products"},
    ["Shadow Soul Potion"] = {Product_Id = "18", Bench_Name = "Exchange_Shop_Products"},
}

local ExchangeShopW2Options = {
    "Exchange Coin","Frost Demon Token","Grand Elder Token","Saiyan Lvl Token","Dragon Race Lvl Token","Eternal Dragon Token","Dragon Blessing Token","Scythe Token","Baikai Token","Espada Token","Reiatsu Lvl Token","Zanpakuto Lvl Token","Shadow Garden Token","Shadow Arts Token","Garden Lvl Token","Arts Lvl Token","Threat Level Token","Punch Token","Threat Lvl Token","Punch Lvl Token","Adventurer Token","Magic Tier Token","Mana Growth Token","Ultimate Cast Token","Adventurer Lvl Token","Magic Tier Lvl Token","Thriller Zombie Token","Nightmare Evo Token","Special Zombie Token","Zombie Booster Token",
    "Assassin Grade Token","Assassin Skill Token","Assassin Energy Token","Assassin Damage Token","Spirit Pact Token","Witch Factor Token","Artificial Spirit Token","Gospel Cursed Token","Geass Potential Token","Geass Perception Token","Geass Soul Token","Geass Creation Token","Geass Precognition Token","Geass Time Token","Geass Telepathic Token","Geass Manipulation Token","Knightmare Token","IQ Token","Scientific Token","Eye Token 2","Shinobi Clan Token","Genkai Token","Chakra Infusion Token","Energy Teigu Token","Damage Teigu Token","Psycho Flow Token","Psycho Destruction Token",
    "Slayer Mark Token","Demon Bloodline Token","Magic Type Token","The Muscule Token","Eagle Token","Whale Token","Wolf Token","DxD Species Token","Sacred Gear Token","Dragon Arms Token","Dragon Torso Token","Dragon Wings Token","Dragon Helmet Token","Dragon Rank Token","Mage Rank Token","Magic Items Token"
}

local ExchangeShopW2Map = {
    --W20 TO W25
    ["Exchange Coin"] = {Product_Id = "1", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Frost Demon Token"] = {Product_Id = "2", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Grand Elder Token"] = {Product_Id = "3", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Saiyan Lvl Token"] = {Product_Id = "4", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Dragon Race Lvl Token"] = {Product_Id = "5", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Eternal Dragon Token"] = {Product_Id = "6", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Dragon Blessing Token"] = {Product_Id = "7", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Scythe Token"] = {Product_Id = "8", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Baikai Token"] = {Product_Id = "9", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Espada Token"] = {Product_Id = "10", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Reiatsu Lvl Token"] = {Product_Id = "11", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Zanpakuto Lvl Token"] = {Product_Id = "12", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Shadow Garden Token"] = {Product_Id = "13", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Shadow Arts Token"] = {Product_Id = "14", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Garden Lvl Token"] = {Product_Id = "15", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Arts Lvl Token"] = {Product_Id = "16", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Threat Level Token"] = {Product_Id = "17", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Punch Token"] = {Product_Id = "18", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Threat Lvl Token"] = {Product_Id = "19", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Punch Lvl Token"] = {Product_Id = "20", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Adventurer Token"] = {Product_Id = "21", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Magic Tier Token"] = {Product_Id = "22", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Mana Growth Token"] = {Product_Id = "23", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Ultimate Cast Token"] = {Product_Id = "24", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Adventurer Lvl Token"] = {Product_Id = "25", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Magic Tier Lvl Token"] = {Product_Id = "26", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Thriller Zombie Token"] = {Product_Id = "27", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Nightmare Evo Token"] = {Product_Id = "28", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Special Zombie Token"] = {Product_Id = "29", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Zombie Booster Token"] = {Product_Id = "30", Bench_Name = "Exchange_Shop_World_20_to_25"},

    --W26 TO W30
    ["Assassin Grade Token"] = {Product_Id = "1", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Assassin Skill Token"] = {Product_Id = "2", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Assassin Energy Token"] = {Product_Id = "3", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Assassin Damage Token"] = {Product_Id = "4", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Spirit Pact Token"] = {Product_Id = "5", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Witch Factor Token"] = {Product_Id = "6", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Artificial Spirit Token"] = {Product_Id = "7", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Gospel Cursed Token"] = {Product_Id = "8", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Geass Potential Token"] = {Product_Id = "9", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Geass Perception Token"] = {Product_Id = "10", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Geass Soul Token"] = {Product_Id = "11", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Geass Creation Token"] = {Product_Id = "12", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Geass Precognition Token"] = {Product_Id = "13", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Geass Time Token"] = {Product_Id = "14", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Geass Telepathic Token"] = {Product_Id = "15", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Geass Manipulation Token"] = {Product_Id = "16", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Knightmare Token"] = {Product_Id = "17", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["IQ Token"] = {Product_Id = "18", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Scientific Token"] = {Product_Id = "19", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Eye Token 2"] = {Product_Id = "20", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Shinobi Clan Token"] = {Product_Id = "21", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Genkai Token"] = {Product_Id = "22", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Chakra Infusion Token"] = {Product_Id = "23", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Energy Teigu Token"] = {Product_Id = "24", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Damage Teigu Token"] = {Product_Id = "25", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Psycho Flow Token"] = {Product_Id = "26", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Psycho Destruction Token"] = {Product_Id = "27", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Slayer Mark Token"] = {Product_Id = "28", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Demon Bloodline Token"] = {Product_Id = "29", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Magic Type Token"] = {Product_Id = "30", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["The Muscule Token"] = {Product_Id = "31", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Eagle Token"] = {Product_Id = "32", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Whale Token"] = {Product_Id = "33", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Wolf Token"] = {Product_Id = "34", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["DxD Species Token"] = {Product_Id = "35", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Sacred Gear Token"] = {Product_Id = "36", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Dragon Arms Token"] = {Product_Id = "37", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Dragon Torso Token"] = {Product_Id = "38", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Dragon Wings Token"] = {Product_Id = "39", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Dragon Helmet Token"] = {Product_Id = "40", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Dragon Rank Token"] = {Product_Id = "41", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Mage Rank Token"] = {Product_Id = "42", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Magic Items Token"] = {Product_Id = "43", Bench_Name = "Exchange_Shop_World_26_to_30"},
}

local ExchangeShopW2KeysOptions = {
    "Green Planet Key","Mundo Key","Key of Suffering","Hollow Key","Tomb Arena Key","Adventurer Key","Torment Key","Maze Key 1","One Hero Key","Crimson Canyon Key","Body Improvement Key"
}

local ExchangeShopW2KeysMap = {
    --Keys
    ["Green Planet Key"] = {Product_Id = "1", Bench_Name = "Exchange_Shop_Keys_2"},
    ["Mundo Key"] = {Product_Id = "2", Bench_Name = "Exchange_Shop_Keys_2"},
    ["Key of Suffering"] = {Product_Id = "3", Bench_Name = "Exchange_Shop_Keys_2"},
    ["Hollow Key"] = {Product_Id = "4", Bench_Name = "Exchange_Shop_Keys_2"},
    ["Tomb Arena Key"] = {Product_Id = "5", Bench_Name = "Exchange_Shop_Keys_2"},
    ["Adventurer Key"] = {Product_Id = "6", Bench_Name = "Exchange_Shop_Keys_2"},
    ["Torment Key"] = {Product_Id = "7", Bench_Name = "Exchange_Shop_Keys_2"},
    ["Maze Key 1"] = {Product_Id = "8", Bench_Name = "Exchange_Shop_Keys_2"},
    ["One Hero Key"] = {Product_Id = "9", Bench_Name = "Exchange_Shop_Keys_2"},
    ["Crimson Canyon Key"] = {Product_Id = "10", Bench_Name = "Exchange_Shop_Keys_2"},
    ["Body Improvement Key"] = {Product_Id = "11", Bench_Name = "Exchange_Shop_Keys_2"},
}

local ExchangeShopW2ProductsOptions = {
    "Coins Potion","Damage Potion","Energy Potion","Luck Potion","Exp Potion","Soul Potion","Shadow Soul Potion","Stats Reset","Attack Range Potion I","Expensive Stats Reset","Chocolate Bar","Cheese Pizza Slice","Milk","Green Gummy Bear","Hot Sauce","Coffee","Doughnut","Fried Egg","Waffle","Drop Potion"
}

local ExchangeShopW2ProductsMap = {
    --Maze Products
    ["Coins Potion"] = {Product_Id = "1", Bench_Name = "Maze_Merchant"},
    ["Damage Potion"] = {Product_Id = "2", Bench_Name = "Maze_Merchant"},
    ["Energy Potion"] = {Product_Id = "3", Bench_Name = "Maze_Merchant"},
    ["Luck Potion"] = {Product_Id = "4", Bench_Name = "Maze_Merchant"},
    ["Exp Potion"] = {Product_Id = "5", Bench_Name = "Maze_Merchant"},
    ["Soul Potion"] = {Product_Id = "6", Bench_Name = "Maze_Merchant"},
    ["Shadow Soul Potion"] = {Product_Id = "7", Bench_Name = "Maze_Merchant"},
    ["Stats Reset"] = {Product_Id = "8", Bench_Name = "Maze_Merchant"},
    ["Attack Range Potion I"] = {Product_Id = "9", Bench_Name = "Maze_Merchant"},
    ["Expensive Stats Reset"] = {Product_Id = "10", Bench_Name = "Maze_Merchant"},
    ["Chocolate Bar"] = {Product_Id = "11", Bench_Name = "Maze_Merchant"},
    ["Cheese Pizza Slice"] = {Product_Id = "12", Bench_Name = "Maze_Merchant"},
    ["Milk"] = {Product_Id = "13", Bench_Name = "Maze_Merchant"},
    ["Green Gummy Bear"] = {Product_Id = "14", Bench_Name = "Maze_Merchant"},
    ["Hot Sauce"] = {Product_Id = "15", Bench_Name = "Maze_Merchant"},
    ["Coffee"] = {Product_Id = "16", Bench_Name = "Maze_Merchant"},
    ["Doughnut"] = {Product_Id = "17", Bench_Name = "Maze_Merchant"},
    ["Fried Egg"] = {Product_Id = "18", Bench_Name = "Maze_Merchant"},
    ["Waffle"] = {Product_Id = "19", Bench_Name = "Maze_Merchant"},
    ["Drop Potion"] = {Product_Id = "20", Bench_Name = "Maze_Merchant"},
}

local ExchangeShopChristmasProductsOptions = {
    "Ice Sword","Snowman Coins Potion","Snowman Damage Potion","Snowman Energy Potion","Snowman Luck Potion","Snowman Exp Potion","Snowman Soul Potion","Snowman Shadow Soul Potion","Snowman Drop Potion"
}

local ExchangeShopChristmasProductsMap = {
    --Maze Products
    ["Ice Sword"] = {Product_Id = "1", Bench_Name = "Christmas_Shop"},
    ["Snowman Coins Potion"] = {Product_Id = "2", Bench_Name = "Christmas_Shop"},
    ["Snowman Damage Potion"] = {Product_Id = "3", Bench_Name = "Christmas_Shop"},
    ["Snowman Energy Potion"] = {Product_Id = "4", Bench_Name = "Christmas_Shop"},
    ["Snowman Luck Potion"] = {Product_Id = "5", Bench_Name = "Christmas_Shop"},
    ["Snowman Exp Potion"] = {Product_Id = "6", Bench_Name = "Christmas_Shop"},
    ["Snowman Soul Potion"] = {Product_Id = "7", Bench_Name = "Christmas_Shop"},
    ["Snowman Shadow Soul Potion"] = {Product_Id = "8", Bench_Name = "Christmas_Shop"},
    ["Snowman Drop Potion"] = {Product_Id = "9", Bench_Name = "Christmas_Shop"},
}

local ExchangeShopW1Dropdown = ExchangeShopTab:Dropdown({
    Flag = "ExchangeShopW1Dropdown",
    Title = "Select W1 TO W19 Token",
    Values = ExchangeShopW1Options,
    Value = {},
    Multi = true,
    AllowNone = true,
    Callback = function(option)
        getgenv().SelectedShopTokenW1 = option
    end,
})

local ExchangeShopW1Toggle = ExchangeShopTab:Toggle({
    Flag = "AutoExchangeShopW1Toggle",
    Title = "Auto Exchange Coin to Token",
    Desc = "Automatically Exchange Coin to Selected Token",
    Default = false,
    Callback = function(state)
        getgenv().AutoExchangeShopW1Running = state
        if state then
            task.spawn(function()
                while getgenv().AutoExchangeShopW1Running do
                    if getgenv().SelectedShopTokenW1 and #getgenv().SelectedShopTokenW1 > 0 then
                        for _, ShoptokenName in ipairs(getgenv().SelectedShopTokenW1) do
                            local ShoptokenData = ExchangeShopW1Map[ShoptokenName]
                            if ShoptokenData then
                                game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                    ["Bench_Name"] = ShoptokenData.Bench_Name,
                                    ["Product_Id"] = tonumber(ShoptokenData.Product_Id),
                                    ["Action"] = "Merchant_Purchase",
                                    ["Amount"] = 10,
                                })
                                task.wait(0.1)  -- ç­‰å¾…0.1ç§’åŽå‘é€ä¸‹ä¸€ä¸ª
                            end
                        end
                    end
                end
            end)
        else
            -- stopped
        end
    end,
})

ExchangeShopTab:Divider()

local ExchangeShopW1KeysDropdown = ExchangeShopTab:Dropdown({
    Flag = "ExchangeShopW1KeysDropdown",
    Title = "Select W1 TO W19 Keys to Buy",
    Values = ExchangeShopW1KeysOptions,
    Value = {},
    Multi = true,
    AllowNone = true,
    Callback = function(option)
        getgenv().SelectedShopKeysW1 = option
    end,
})

local ExchangeShopW1KeysToggle = ExchangeShopTab:Toggle({
    Flag = "AutoExchangeShopW1KeysToggle",
    Title = "Auto Exchange Coin to W1 TO W19 Keys",
    Desc = "Automatically Exchange Coin to Selected Keys",
    Default = false,
    Callback = function(state)
        getgenv().AutoExchangeShopW1KeysRunning = state
        if state then
            task.spawn(function()
                while getgenv().AutoExchangeShopW1KeysRunning do
                    if getgenv().SelectedShopKeysW1 and #getgenv().SelectedShopKeysW1 > 0 then
                        for _, ShopKeysName in ipairs(getgenv().SelectedShopKeysW1) do
                            local ShopKeysData = ExchangeShopW1KeysMap[ShopKeysName]
                            if ShopKeysData then
                                game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                    ["Bench_Name"] = ShopKeysData.Bench_Name,
                                    ["Product_Id"] = tonumber(ShopKeysData.Product_Id),
                                    ["Action"] = "Merchant_Purchase",
                                    ["Amount"] = 1,
                                })
                                task.wait(0.1)  -- ç­‰å¾…0.1ç§’åŽå‘é€ä¸‹ä¸€ä¸ª
                            end
                        end
                    end
                end
            end)
        else
        end
    end,
})

ExchangeShopTab:Divider()

local ExchangeShopW1ProductsDropdown = ExchangeShopTab:Dropdown({
    Flag = "ExchangeShopW1ProductsDropdown",
    Title = "Select W1 TO W19 Products to Buy",
    Values = ExchangeShopW1ProductsOptions,
    Value = {},
    Multi = true,
    AllowNone = true,
    Callback = function(option)
        getgenv().SelectedShopProductsW1 = option
    end,
})

local ExchangeShopW1ProductsToggle = ExchangeShopTab:Toggle({
    Flag = "AutoExchangeShopW1ProductsToggle",
    Title = "Auto Exchange Coin to W1 TO W19 Products",
    Desc = "Automatically Exchange Coin to Selected Products",
    Default = false,
    Callback = function(state)
        getgenv().AutoExchangeShopW1ProductsRunning = state
        if state then
            task.spawn(function()
                while getgenv().AutoExchangeShopW1ProductsRunning do
                    if getgenv().SelectedShopProductsW1 and #getgenv().SelectedShopProductsW1 > 0 then
                        for _, ShopProductsName in ipairs(getgenv().SelectedShopProductsW1) do
                            local ShopProductsData = ExchangeShopW1ProductsMap[ShopProductsName]
                            if ShopProductsData then
                                game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                    ["Bench_Name"] = ShopProductsData.Bench_Name,
                                    ["Product_Id"] = tonumber(ShopProductsData.Product_Id),
                                    ["Action"] = "Merchant_Purchase",
                                    ["Amount"] = 1,
                                })
                                task.wait(0.1)  -- ç­‰å¾…0.1ç§’åŽå‘é€ä¸‹ä¸€ä¸ª
                            end
                        end
                    end
                end
            end)
        else
        end
    end,
})

ExchangeShopTab:Divider()

local ExchangeShopW2Dropdown = ExchangeShopTab:Dropdown({
    Flag = "ExchangeShopW2Dropdown",
    Title = "Select W20 TO W30 Token",
    Values = ExchangeShopW2Options,
    Value = {},
    Multi = true,
    AllowNone = true,
    Callback = function(option)
        getgenv().SelectedShopTokenW2 = option
    end,
})

local ExchangeShopW2Toggle = ExchangeShopTab:Toggle({
    Flag = "AutoExchangeShopW2Toggle",
    Title = "Auto Exchange Coin to Token",
    Desc = "Automatically Exchange Coin to Selected Token",
    Default = false,
    Callback = function(state)
        getgenv().AutoExchangeShopW2Running = state
        if state then
            task.spawn(function()
                while getgenv().AutoExchangeShopW2Running do
                    if getgenv().SelectedShopTokenW2 and #getgenv().SelectedShopTokenW2 > 0 then
                        for _, ShoptokenName in ipairs(getgenv().SelectedShopTokenW2) do
                            local ShoptokenData = ExchangeShopW2Map[ShoptokenName]
                            if ShoptokenData then
                                game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                    ["Bench_Name"] = ShoptokenData.Bench_Name,
                                    ["Product_Id"] = tonumber(ShoptokenData.Product_Id),
                                    ["Action"] = "Merchant_Purchase",
                                    ["Amount"] = 10,
                                })
                                task.wait(0.1)  -- ç­‰å¾…0.1ç§’åŽå‘é€ä¸‹ä¸€ä¸ª
                            end
                        end
                    end
                end
            end)
        else
        end
    end,
})

ExchangeShopTab:Divider()

local ExchangeShopW2KeysDropdown = ExchangeShopTab:Dropdown({
    Flag = "ExchangeShopW2KeysDropdown",
    Title = "Select W20 TO W30 Keys to Buy",
    Values = ExchangeShopW2KeysOptions,
    Value = {},
    Multi = true,
    AllowNone = true,
    Callback = function(option)
        getgenv().SelectedShopKeysW2 = option
    end,
})

local ExchangeShopW2KeysToggle = ExchangeShopTab:Toggle({
    Flag = "AutoExchangeShopW2KeysToggle",
    Title = "Auto Exchange Coin to W20 TO W30 Keys",
    Desc = "Automatically Exchange Coin to Selected Keys",
    Default = false,
    Callback = function(state)
        getgenv().AutoExchangeShopW2KeysRunning = state
        if state then
            task.spawn(function()
                while getgenv().AutoExchangeShopW2KeysRunning do
                    if getgenv().SelectedShopKeysW2 and #getgenv().SelectedShopKeysW2 > 0 then
                        for _, ShopKeysName in ipairs(getgenv().SelectedShopKeysW2) do
                            local ShopKeysData = ExchangeShopW2KeysMap[ShopKeysName]
                            if ShopKeysData then
                                game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                    ["Bench_Name"] = ShopKeysData.Bench_Name,
                                    ["Product_Id"] = tonumber(ShopKeysData.Product_Id),
                                    ["Action"] = "Merchant_Purchase",
                                    ["Amount"] = 1,
                                })
                                task.wait(0.1)  -- ç­‰å¾…0.1ç§’åŽå‘é€ä¸‹ä¸€ä¸ª
                            end
                        end
                    end
                end
            end)
        else
        end
    end,
})

ExchangeShopTab:Divider()

local ExchangeShopW2ProductsDropdown = ExchangeShopTab:Dropdown({
    Flag = "ExchangeShopW2ProductsDropdown",
    Title = "Select W20 TO W30 Products to Buy",
    Values = ExchangeShopW2ProductsOptions,
    Value = {},
    Multi = true,
    AllowNone = true,
    Callback = function(option)
        getgenv().SelectedShopProductsW2 = option
    end,
})

local ExchangeShopW2ProductsToggle = ExchangeShopTab:Toggle({
    Flag = "AutoExchangeShopW2ProductsToggle",
    Title = "Auto Exchange Coin to W20 TO W30 Products",
    Desc = "Automatically Exchange Coin to Selected Products",
    Default = false,
    Callback = function(state)
        getgenv().AutoExchangeShopW2ProductsRunning = state
        if state then
            task.spawn(function()
                while getgenv().AutoExchangeShopW2ProductsRunning do
                    if getgenv().SelectedShopProductsW2 and #getgenv().SelectedShopProductsW2 > 0 then
                        for _, ShopProductsName in ipairs(getgenv().SelectedShopProductsW2) do
                            local ShopProductsData = ExchangeShopW2ProductsMap[ShopProductsName]
                            if ShopProductsData then
                                game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                    ["Bench_Name"] = ShopProductsData.Bench_Name,
                                    ["Product_Id"] = tonumber(ShopProductsData.Product_Id),
                                    ["Action"] = "Merchant_Purchase",
                                    ["Amount"] = 1,
                                })
                                task.wait(0.1)  -- ç­‰å¾…0.1ç§’åŽå‘é€ä¸‹ä¸€ä¸ª
                            end
                        end
                    end
                end
            end)
        else
        end
    end,
})

ExchangeShopTab:Divider()

local ExchangeShopChristmasProductsDropdown = ExchangeShopTab:Dropdown({
    Flag = "ExchangeShopChristmasProductsDropdown",
    Title = "Select Christmas Products to Buy",
    Values = ExchangeShopChristmasProductsOptions,
    Value = {},
    Multi = true,
    AllowNone = true,
    Callback = function(option)
        getgenv().SelectedChristmasShopProducts = option
    end,
})

local ExchangeShopChristmasProductsToggle = ExchangeShopTab:Toggle({
    Flag = "AutoExchangeShopChristmasProductsToggle",
    Title = "Auto Exchange Candy Cane to Christmas Products",
    Desc = "Automatically Exchange Candy Cane to Selected Christmas Products",
    Default = false,
    Callback = function(state)
        getgenv().AutoExchangeShopChristmasProductsRunning = state
        if state then
            task.spawn(function()
                while getgenv().AutoExchangeShopChristmasProductsRunning do
                    if getgenv().SelectedChristmasShopProducts and #getgenv().SelectedChristmasShopProducts > 0 then
                        for _, ShopProductsName in ipairs(getgenv().SelectedChristmasShopProducts) do
                            local ShopProductsData = ExchangeShopChristmasProductsMap[ShopProductsName]
                            if ShopProductsData then
                                game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                    ["Bench_Name"] = ShopProductsData.Bench_Name,
                                    ["Product_Id"] = tonumber(ShopProductsData.Product_Id),
                                    ["Action"] = "Merchant_Purchase",
                                    ["Amount"] = 1,
                                })
                                task.wait(0.1)  -- ç­‰å¾…0.1ç§’åŽå‘é€ä¸‹ä¸€ä¸ª
                            end
                        end
                    end
                end
            end)
        else
        end
    end,
})



local FoodTab = Window:Tab({
        Title = "Food",
        Icon = "hamburger",
    })

getgenv().AutoExchangeFoodRunning = false
getgenv().AutoExchangeMacaronRunning = false

local ExchangeFoodOptions = {
    "Chocolate Bar","Cheese Pizza Slice","Milk","Green Gummy Bear","Hot Sauce","Coffee","Doughnut","Fried Egg","Waffle"
}

local ExchangeFoodMap = {
    ["Chocolate Bar"] = {Product_Id = "1", Bench_Name = "Food_Shop"},
    ["Cheese Pizza Slice"] = {Product_Id = "2", Bench_Name = "Food_Shop"},
    ["Milk"] = {Product_Id = "3", Bench_Name = "Food_Shop"},
    ["Green Gummy Bear"] = {Product_Id = "4", Bench_Name = "Food_Shop"},
    ["Hot Sauce"] = {Product_Id = "5", Bench_Name = "Food_Shop"},
    ["Coffee"] = {Product_Id = "6", Bench_Name = "Food_Shop"},
    ["Doughnut"] = {Product_Id = "7", Bench_Name = "Food_Shop"},
    ["Fried Egg"] = {Product_Id = "8", Bench_Name = "Food_Shop"},
    ["Waffle"] = {Product_Id = "9", Bench_Name = "Food_Shop"},
}

local ExchangeMacaronOptions = {
    "Energy Macaron","Coin Macaron","Damage Macaron","Luck Macaron","Exp Macaron","Star Macaron","Soul Macaron","Drop Macaron","Shadow Soul Macaron"
}

local ExchangeMacaronMap = {
    ["Energy Macaron"] = {Product_Id = "1", Bench_Name = "Food_Exchanger"},
    ["Coin Macaron"] = {Product_Id = "2", Bench_Name = "Food_Exchanger"},
    ["Damage Macaron"] = {Product_Id = "3", Bench_Name = "Food_Exchanger"},
    ["Luck Macaron"] = {Product_Id = "4", Bench_Name = "Food_Exchanger"},
    ["Exp Macaron"] = {Product_Id = "5", Bench_Name = "Food_Exchanger"},
    ["Star Macaron"] = {Product_Id = "6", Bench_Name = "Food_Exchanger"},
    ["Soul Macaron"] = {Product_Id = "7", Bench_Name = "Food_Exchanger"},
    ["Drop Macaron"] = {Product_Id = "8", Bench_Name = "Food_Exchanger"},
    ["Shadow Soul Macaron"] = {Product_Id = "9", Bench_Name = "Food_Exchanger"},
}

local ExchangeFoodDropdown = FoodTab:Dropdown({
    Flag = "ExchangeFoodDropdown",
    Title = "Select Food Shop Items",
    Values = ExchangeFoodOptions,
    Value = {},
    Multi = true,
    AllowNone = true,
    Callback = function(option)
        getgenv().SelectedFood = option
    end,
})

local ExchangeFoodToggle = FoodTab:Toggle({
    Flag = "AutoBuyFoodToggle",
    Title = "Auto Exchange Coin to Food",
    Desc = "Automatically Exchange Coin to Selected Food",
    Default = false,
    Callback = function(state)
        getgenv().AutoExchangeFoodRunning = state
        if state then
            task.spawn(function()
                while getgenv().AutoExchangeFoodRunning do
                    if getgenv().SelectedFood and #getgenv().SelectedFood > 0 then
                        for _, FoodName in ipairs(getgenv().SelectedFood) do
                            local FoodData = ExchangeFoodMap[FoodName]
                            if FoodData then
                                game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                    ["Bench_Name"] = FoodData.Bench_Name,
                                    ["Product_Id"] = tonumber(FoodData.Product_Id),
                                    ["Action"] = "Merchant_Purchase",
                                    ["Amount"] = 1,
                                })
                                task.wait(0.1)  -- ç­‰å¾…0.1ç§’åŽå‘é€ä¸‹ä¸€ä¸ª
                            end
                        end
                    end
                end
            end)
        else
            -- stopped
        end
    end,
})

FoodTab:Divider()

local ExchangeMacaronDropdown = FoodTab:Dropdown({
    Flag = "ExchangeMacaronDropdown",
    Title = "Select Macaron",
    Values = ExchangeMacaronOptions,
    Value = {},
    Multi = true,
    AllowNone = true,
    Callback = function(option)
        getgenv().SelectedMacaron = option
    end,
})

local ExchangeMacaronToggle = FoodTab:Toggle({
    Flag = "AutoExchangeMacaronToggle",
    Title = "Auto Exchange Food to Macaron",
    Desc = "Automatically Exchange Food to Selected Macaron",
    Default = false,
    Callback = function(state)
        getgenv().AutoExchangeMacaronRunning = state
        if state then
            task.spawn(function()
                while getgenv().AutoExchangeMacaronRunning do
                    if getgenv().SelectedMacaron and #getgenv().SelectedMacaron > 0 then
                        for _, MacaronName in ipairs(getgenv().SelectedMacaron) do
                            local FoodData = ExchangeMacaronMap[MacaronName]
                            if FoodData then
                                game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                    ["Bench_Name"] = FoodData.Bench_Name,
                                    ["Product_Id"] = tonumber(FoodData.Product_Id),
                                    ["Action"] = "Merchant_Purchase",
                                    ["Amount"] = 1,
                                })
                                task.wait(0.1)  -- ç­‰å¾…0.1ç§’åŽå‘é€ä¸‹ä¸€ä¸ª
                            end
                        end
                    end
                end
            end)
        else
            -- stopped
        end
    end,
})

local QuestTab = Window:Tab({
        Title = "Quests",
        Icon = "scroll-text",
    })

--Auto Get Daily Quest
local DailyQuestToggle = QuestTab:Toggle({
    Flag = "DailyQuest1",
   Title = "Auto Get Daily Quest",
   Desc = "Automatically accept daily quests",
   Default = false,
   Callback = function(state)
   local dailyquests = {"2001","2002","2003","2004","2005","2006","2007"}
   if state then
    getgenv().AutoDailyQuestRunning = true
    task.spawn(function()
        while getgenv().AutoDailyQuestRunning do
            pcall(function()
                for _, dailyquest in ipairs(dailyquests) do
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Id"] = dailyquest,
                        ["Type"] = "Accept",
                        ["Action"] = "_Quest",
                    })
                    task.wait(0.3)
                   end
            end)
            task.wait(5)

        end
    end)
   else
    getgenv().AutoDailyQuestRunning = false
   end
end,
})

QuestTab:Divider()

--Auto Find & Collect Punching Machine
local PunchingMachineQuestToggle = QuestTab:Toggle({
    Flag = "Quest2301",
   Title = "Auto Complete Punching Machine Quest",
   Desc = "Automatically accept and complete Punching Machine quest",
   Default = false,
   Callback = function(state)
   if state then
    getgenv().AutoPunchQuestRunning = true
    task.spawn(function()
        while getgenv().AutoPunchQuestRunning do
            pcall(function()
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Id"] = "2301",
                        ["Type"] = "Accept",
                        ["Action"] = "_Quest",
                    })
                    task.wait(1.5)
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Type"] = "Find_Found",
                        ["Action"] = "_Quest",
                        ["Target"] = "Punching_Machine",
                        ["Object_Index"] = 1,
                        ["Id"] = "2301",
                    })
                    task.wait(1.5)
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Id"] = "2301",
                        ["Type"] = "Complete",
                        ["Action"] = "_Quest",
                    })
            end)
            task.wait(60)

        end
    end)
   else
    getgenv().AutoPunchQuestRunning = false
   end
end,
})

--Auto Hero Quests

--Auto Demon Fruit Quest
local DemonFruitQuestToggle = QuestTab:Toggle({
    Flag = "Quest2302",
   Title = "Auto Complete Demon Fruit Quest",
   Desc = "Automatically accept and complete Demon Fruit quest",
   Default = false,
   Callback = function(state)
   if state then
    getgenv().AutoDemonFruitQuestRunning = true
    task.spawn(function()
        while getgenv().AutoDemonFruitQuestRunning do
            pcall(function()
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Id"] = "2302",
                        ["Type"] = "Accept",
                        ["Action"] = "_Quest",
                    })
                    task.wait(1.5)
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Type"] = "Find_Found",
                        ["Action"] = "_Quest",
                        ["Target"] = "Demon_Fruit",
                        ["Object_Index"] = 1,
                        ["Id"] = "2302",
                    })
                    task.wait(1.5)
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Id"] = "2302",
                        ["Type"] = "Complete",
                        ["Action"] = "_Quest",
                    })
            end)
            task.wait(60)

        end
    end)
   else
    getgenv().AutoDemonFruitQuestRunning = false
   end
end,
})

--Auto Complete Briefcase Quest
local BriefcaseQuestToggle = QuestTab:Toggle({
    Flag = "Quest2601",
   Title = "Auto Complete Briefcase Quest",
   Desc = "Automatically accept and complete Briefcase quest",
   Default = false,
   Callback = function(state)
   if state then
    getgenv().AutoBriefcaseQuestRunning = true
    task.spawn(function()
        while getgenv().AutoBriefcaseQuestRunning do
            pcall(function()
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Id"] = "2601",
                        ["Type"] = "Accept",
                        ["Action"] = "_Quest",
                    })
                    task.wait(1.5)
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Type"] = "Find_Found",
                        ["Action"] = "_Quest",
                        ["Target"] = "_Briefcase",
                        ["Object_Index"] = 1,
                        ["Id"] = "2601",
                    })
                    task.wait(1.5)
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Id"] = "2601",
                        ["Type"] = "Complete",
                        ["Action"] = "_Quest",
                    })
            end)
            task.wait(60)

        end
    end)
   else
    getgenv().AutoBriefcaseQuestRunning = false
   end
end,
})

--Auto Complete Assassin Knife Quest
local AssassinKnifeQuestToggle = QuestTab:Toggle({
    Flag = "Quest2609",
   Title = "Auto Complete Assassin Knife Quest",
   Desc = "Automatically accept and complete Assassin Knife quest",
   Default = false,
   Callback = function(state)
   if state then
    getgenv().AutoAssassinKnifeQuestRunning = true
    task.spawn(function()
        while getgenv().AutoAssassinKnifeQuestRunning do
            pcall(function()
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Id"] = "2609",
                        ["Type"] = "Accept",
                        ["Action"] = "_Quest",
                    })
                    task.wait(1.5)
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Type"] = "Find_Found",
                        ["Action"] = "_Quest",
                        ["Target"] = "Assassin_Knife",
                        ["Object_Index"] = 1,
                        ["Id"] = "2609",
                    })
                    task.wait(1.5)
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Id"] = "2609",
                        ["Type"] = "Complete",
                        ["Action"] = "_Quest",
                    })
            end)
            task.wait(60)

        end
    end)
   else
    getgenv().AutoAssassinKnifeQuestRunning = false
   end
end,
})

--Auto Complete Assassin Pistol Quest
local AssassinPistolQuestToggle = QuestTab:Toggle({
    Flag = "Quest2610",
   Title = "Auto Complete Assassin Pistol Quest",
   Desc = "Automatically accept and complete Assassin Pistol quest",
   Default = false,
   Callback = function(state)
   if state then
    getgenv().AutoAssassinPistolQuestRunning = true
    task.spawn(function()
        while getgenv().AutoAssassinPistolQuestRunning do
            pcall(function()
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Id"] = "2610",
                        ["Type"] = "Accept",
                        ["Action"] = "_Quest",
                    })
                    task.wait(1.5)
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Type"] = "Find_Found",
                        ["Action"] = "_Quest",
                        ["Target"] = "Assassin_Pistol",
                        ["Object_Index"] = 1,
                        ["Id"] = "2610",
                    })
                    task.wait(1.5)
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Id"] = "2610",
                        ["Type"] = "Complete",
                        ["Action"] = "_Quest",
                    })
            end)
            task.wait(60)

        end
    end)
   else
    getgenv().AutoAssassinPistolQuestRunning = false
   end
end,
})

--Auto Complete Exorcise Humans Quest
local ExorciseHumansQuestToggle = QuestTab:Toggle({
    Flag = "Quest2303",
   Title = "Auto Complete Exorcise Humans Quest",
   Desc = "Automatically accept and complete Exorcise Humans quest",
   Default = false,
   Callback = function(state)
   if state then
    getgenv().AutoExorciseHumansQuestRunning = true
    task.spawn(function()
        while getgenv().AutoExorciseHumansQuestRunning do
            pcall(function()
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Id"] = "2303",
                        ["Type"] = "Accept",
                        ["Action"] = "_Quest",
                    })
                    task.wait(1.5)
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Type"] = "Find_Found",
                        ["Action"] = "_Quest",
                        ["Target"] = "Exorcisms",
                        ["Object_Index"] = 1,
                        ["Id"] = "2303",
                    })
                    task.wait(1.5)
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Id"] = "2303",
                        ["Type"] = "Complete",
                        ["Action"] = "_Quest",
                    })
            end)
            task.wait(1)

        end
    end)
   else
    getgenv().AutoExorciseHumansQuestRunning = false
   end
end,
})

--Auto Complete Evil Spirit Quest
local EvilSpiritQuestToggle = QuestTab:Toggle({
    Flag = "Quest2304",
   Title = "Auto Complete Evil Spirit Quest",
   Desc = "Automatically accept and complete Evil Spirit quest",
   Default = false,
   Callback = function(state)
   if state then
    getgenv().AutoEvilSpiritQuestRunning = true
    task.spawn(function()
        while getgenv().AutoEvilSpiritQuestRunning do
            pcall(function()
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Id"] = "2304",
                        ["Type"] = "Accept",
                        ["Action"] = "_Quest",
                    })
                    task.wait(1.5)
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Type"] = "Find_Found",
                        ["Action"] = "_Quest",
                        ["Target"] = "Evil_Spirits",
                        ["Object_Index"] = 1,
                        ["Id"] = "2304",
                    })
                    task.wait(1.5)
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Id"] = "2304",
                        ["Type"] = "Complete",
                        ["Action"] = "_Quest",
                    })
            end)
            task.wait(1)

        end
    end)
   else
    getgenv().AutoExorciseHumansQuestRunning = false
   end
end,
})

--Auto Complete Bento Box Quest
local BentoBoxQuestToggle = QuestTab:Toggle({
    Flag = "Quest2305",
   Title = "Auto Complete Bento Box Quest",
   Desc = "Automatically accept and complete Bento Box quest",
   Default = false,
   Callback = function(state)
   if state then
    getgenv().AutoBentoQuestRunning = true
    task.spawn(function()
        while getgenv().AutoBentoQuestRunning do
            pcall(function()
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Id"] = "2305",
                        ["Type"] = "Accept",
                        ["Action"] = "_Quest",
                    })
                    task.wait(1.5)
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Type"] = "Find_Found",
                        ["Action"] = "_Quest",
                        ["Target"] = "Lost_Bento_Box",
                        ["Object_Index"] = 1,
                        ["Id"] = "2305",
                    })
                    task.wait(1.5)
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Id"] = "2305",
                        ["Type"] = "Complete",
                        ["Action"] = "_Quest",
                    })
            end)
            task.wait(60)

        end
    end)
   else
    getgenv().AutoBentoQuestRunning = false
   end
end,
})

local StarTab = Window:Tab({
        Title = "Star",
        Icon = "star",
    })

--Auto Open Star
local StarDropdown = StarTab:Dropdown({
    Flag = "StarDropdown",
   Title = "Star List",
   Values = {"[W1] Earth City","[W2] Windmill Island","[W3] Soul Society","[W4] Cursed School","[W5] Slayer Village",

    "[W6] Solo Island","[W7] Clover Village","[W8] Leaf Village","[W9] Spirit Residence","[W10] Magic Hunter City",

    "[W11] Titan City","[W12] Village of Sins","[W13] Kaiju Base","[W14] Tempest Capital","[W15] Virtual City",

    "[W16] Cairo","[W17] Ghoul City","[W18] Chainsaw City","[W19] Tokyo Empire","[W20] Green Planet",

    "[W21] Hollow World","[W22] Shadow Academy","[W23] Z City","[W24] Great Tomb","[W25] Thriller Park",

    "[W26] Amusement Park","[W27] Re:Manor","[W28] Asfordo Academy","[W29] Science Village","[W30] Sand Village",

    "[W31] Night Raid Base","[W32] Salty School","[W33] Mugen District","[W34] Easton Academy","[W35] Kuo Academy",

    "[W36] Magnoli Town","[W37] Lute Village"
},
    Value = "[W1] Earth City",
    Callback = function(option)
        getgenv().selectedStars = option
    end,
})

-- Auto Open Star Toggle
local AutoOpenStarToggle = StarTab:Toggle({
    Flag = "AutoOpenStar1",
    Title = "Auto Open Star",
    Desc = "Automatically Open Max Selected Star",
    Default = false,
    Callback = function(state)
        if state then
            getgenv().AutoOpenStar = true
            task.spawn(function()
                while getgenv().AutoOpenStar do
                    pcall(function()
                        -- æå–æ•°å­—å¹¶æž„é€  Name ä¸º "Star_X" æ ¼å¼
                        local worldNumber = string.match(getgenv().selectedStars, "(%d+)")
                        if worldNumber then
                            game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                ["Open_Amount"] = 30,
                                ["Name"] = "Star_" .. worldNumber,
                                ["Action"] = "_Stars",
                            })
                        end
                        task.wait(0.05)
                    end)
                end
            end)
        else
            getgenv().AutoOpenStar = false
        end
    end,
})

local RollTab = Window:Tab({
        Title = "Roll",
        Icon = "dices",
    })

--Auto Roll
local RollDropdown = RollTab:Dropdown({
    Flag = "RollDropdown",
   Title = "Roll List",
   Values = {
    "[W1] Christmas Glove",
    "[W1] Dragon Race","[W1] Saiyan Evolution",
    "[W2] Pirate Crew","[W2] Demon Fruits","[W2] Swords",
    "[W3] Reiatsu Color","[W3] Zanpakuto",
    "[W4] Curses",
    "[W5] Demon Arts",
    "[W6] Solo Hunter Rank",
    "[W7] Grimoire",
    "[W8] Power Eyes",
    "[W9] Psychic Mayhem",
    "[W10] Energy Card Shop","[W10] Damage Card Shop",
    "[W11] Families","[W11] Titans",
    "[W12] Sins","[W12] Commandments",
    "[W13] Kaiju Powers","[W13] Power of Exchange",
    "[W14] Ultimate Skills","[W14] Species",
    "[W15] Power Energy Runes",
    "[W16] Stands","[W16] Onomatopoeia",
    "[W17] Investigators","[W17] Kagune",
    "[W18] Debiru Hunter","[W18] Akuma Powers",
    "[W19] Special Fire Force", "[W19] Mushi Bite",
    "[W20] Grand Elder Power", "[W20] Frost Demon Evolution", "[W20] Power of Friendship",
    "[W21] Scythes","[W21] Espada",
    "[W22] Shadow Garden","[W22] Shadow Arts",
    "[W23] Energy Threat Level","[W23] Punch Power","[W23] Exchange of Power",
    "[W24] Adventurer Rank","[W24] Magic Tier",
    "[W25] Thriller Zombie","[W25] Nightmare Evolution","[W25] Special Zombie",
    "[W26] Assassin Grade","[W26] Assassin Skills",
    "[W27] Spirit Pact","[W27] Witch Factor","[W27] Re:Spirit Pact","[W27] Re:Witch Factor","[W27] Witch Authority",
    "[W28] Geass Potential","[W28] Knightmare Frames",
    "[W29] IQ","[W29] Scientific Weapons",
    "[W30] Shinobi Clan","[W30] Kekkei Genkai","[W30] Power Eyes 2",
    "[W31] Energy Teigu","[W31] Damage Teigu",
    "[W32] Psycho Flow","[W32] Psycho Destruction",
    "[W33] Slayer Marks","[W33] Demon Bloodline",
    "[W34] Magic Type","[W34] The Muscule",
    "[W35] DxD Species","[W35] Sacred Gear",
    "[W36] Mage Class","[W36] Dragon Evolution",
    "[W37] Magic Shield","[W37] Vassal Weapons"
},
    Value = "[W1] Dragon Race",
    Callback = function(option)
        getgenv().selectedRolls = option
    end,
})

-- Auto Roll Toggle
RollTab:Toggle({
    Flag = "AutoRoll1",
    Title = "Auto Roll",
    Desc = "Automatically Roll Max Selected Roll",
    Default = false,
    Callback = function(state)
        if state then
            getgenv().AutoRoll = true
            task.spawn(function()
                while getgenv().AutoRoll do
                    pcall(function()
                        -- ç”Ÿæˆ Nameï¼šç§»é™¤ "[W X] " å‰ç¼€ï¼Œå¹¶å°†ç©ºæ ¼æ›¿æ¢ä¸ºä¸‹åˆ’çº¿
                        local name = string.gsub(getgenv().selectedRolls, "^%[W%d+%] ", ""):gsub(" ", "_")
                        game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                            ["Open_Amount"] = 6,
                            ["Name"] = name,
                            ["Action"] = "_Gacha_Activate",
                        })
                        task.wait(0.05)
                    end)
                end
            end)
        else
            getgenv().AutoRoll = false
        end
    end,
})


-- æ·»åŠ å…¨å±€æŽ§åˆ¶å˜é‡
getgenv().AutoEvolveRunning = false

local WeaponsTab = Window:Tab({
        Title = "Weapons",
        Icon = "sword",
    })

local specialWeapons = {
    "Venomleaf", "Cryoscythe", "Toxinfang", "Crimson Thorn", "Bonehowl", "Ashfang", "Phantom Requiem", "Stormreaver"
}

local WeaponsEvolveToggle = WeaponsTab:Toggle({
    Flag = "WeaponsEvolve1",
    Title = "Auto Evolve Weapons",
    Default = false,
    Callback = function(state)
        getgenv().AutoEvolveRunning = state
        if state then
            -- å¯åŠ¨å¾ªçŽ¯ï¼šæ¯0.5ç§’é‡æ–°æ£€æµ‹æ­¦å™¨åå­—å’ŒTierå¹¶å‘é€Evolveä¿¡å·
            task.spawn(function()
                while getgenv().AutoEvolveRunning do  -- ä½¿ç”¨å…¨å±€å˜é‡æŽ§åˆ¶å¾ªçŽ¯
                    local tier0Groups = {}  -- { ["Weapon Name"] = {list of weapon button names} } for Tier 0 (no Tier Frame)
                    local tier1Groups = {}  -- { ["Weapon Name"] = {list of weapon button names} } for Tier 1 (Tier Frame with ImageLabel Name = "1" only)
                    local tier2Groups = {}  -- { ["Weapon Name"] = {list of weapon button names} } for Tier 2 (Tier Frame with ImageLabel Name = "1" and "2" only, no "3")
                    local player = game:GetService("Players").LocalPlayer
                    local playerGui = player:FindFirstChild("PlayerGui")
                    if playerGui and playerGui:IsA("PlayerGui") then
                        local inventoryGui = playerGui:FindFirstChild("Inventory_1")
                        if inventoryGui and inventoryGui:IsA("ScreenGui") then
                            local hub = inventoryGui:FindFirstChild("Hub")
                            if hub and hub:IsA("Frame") then
                                local weapons = hub:FindFirstChild("Weapons")
                                if weapons and weapons:IsA("Frame") then
                                    local listFrame = weapons:FindFirstChild("List_Frame")
                                    if listFrame and listFrame:IsA("Frame") then
                                        local list = listFrame:FindFirstChild("List")
                                        if list and list:IsA("ScrollingFrame") then
                                            for _, weaponButton in pairs(list:GetChildren()) do
                                                if weaponButton:IsA("ImageButton") and weaponButton:FindFirstChild("Inside") then
                                                    local inside = weaponButton.Inside
                                                    if inside:IsA("Frame") and inside:FindFirstChild("Title") then
                                                        local title = inside.Title
                                                        if title:IsA("TextLabel") then
                                                            local weaponName = title.Text
                                                            local tierFrame = inside:FindFirstChild("Tier")
                                                            if weaponName and weaponName ~= "" then
                                                                if not tierFrame then
                                                                    -- Tier 0: no Tier Frame
                                                                    if not tier0Groups[weaponName] then
                                                                        tier0Groups[weaponName] = {}
                                                                    end
                                                                    table.insert(tier0Groups[weaponName], weaponButton.Name)
                                                                elseif tierFrame:IsA("Frame") then
                                                                    -- æ£€æŸ¥Tieré‡Œé¢çš„ImageLabel
                                                                    local hasImage1 = false
                                                                    local hasImage2 = false
                                                                    local hasImage3 = false
                                                                    for _, child in pairs(tierFrame:GetChildren()) do
                                                                        if child:IsA("ImageLabel") then
                                                                            if child.Name == "1" then
                                                                                hasImage1 = true
                                                                            elseif child.Name == "2" then
                                                                                hasImage2 = true
                                                                            elseif child.Name == "3" then
                                                                                hasImage3 = true
                                                                            end
                                                                        end
                                                                    end
                                                                    if hasImage1 and not hasImage2 and not hasImage3 then
                                                                        -- Tier 1: has ImageLabel Name = "1" only
                                                                        if not tier1Groups[weaponName] then
                                                                            tier1Groups[weaponName] = {}
                                                                        end
                                                                        table.insert(tier1Groups[weaponName], weaponButton.Name)
                                                                    elseif hasImage1 and hasImage2 and not hasImage3 then
                                                                        -- Tier 2: has ImageLabel Name = "1" and "2" only, no "3"
                                                                        if not tier2Groups[weaponName] then
                                                                            tier2Groups[weaponName] = {}
                                                                        end
                                                                        table.insert(tier2Groups[weaponName], weaponButton.Name)
                                                                    end
                                                                end
                                                            end
                                                        end
                                                    end
                                                end
                                            end
                                        end
                                    end
                                end
                            end
                        end
                    end

                    -- å‘é€Evolveä¿¡å·
                    -- Tier 0: Weapon_Evolve or Scythe_Evolve, 5 or 2 weapons
                    for weaponName, weaponList in pairs(tier0Groups) do
                        local isSpecial = table.find(specialWeapons, weaponName) ~= nil
                        local requiredCount = isSpecial and 2 or 5
                        local benchName = isSpecial and "Scythe_Evolve" or "Weapon_Evolve"
                        if #weaponList >= requiredCount then
                            local selected = {}
                            for i = 1, requiredCount do
                                selected[i] = weaponList[i]
                            end
                            game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                ["Selected"] = selected,
                                ["Action"] = "Evolve",
                                ["Bench_Name"] = benchName,
                            })
                            break  -- åªå¤„ç†ç¬¬ä¸€ä¸ªç¬¦åˆçš„ç»„
                        end
                    end

                    -- Tier 1: Weapon_Evolve_2 or Scythe_Evolve_2, 4 or 2 weapons
                    for weaponName, weaponList in pairs(tier1Groups) do
                        local isSpecial = table.find(specialWeapons, weaponName) ~= nil
                        local requiredCount = isSpecial and 2 or 4
                        local benchName = isSpecial and "Scythe_Evolve_2" or "Weapon_Evolve_2"
                        if #weaponList >= requiredCount then
                            local selected = {}
                            for i = 1, requiredCount do
                                selected[i] = weaponList[i]
                            end
                            game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                ["Selected"] = selected,
                                ["Action"] = "Evolve",
                                ["Bench_Name"] = benchName,
                            })
                            break  -- åªå¤„ç†ç¬¬ä¸€ä¸ªç¬¦åˆçš„ç»„
                        end
                    end

                    -- Tier 2: Weapon_Evolve_3 or Scythe_Evolve_3, 2 weapons
                    for weaponName, weaponList in pairs(tier2Groups) do
                        local isSpecial = table.find(specialWeapons, weaponName) ~= nil
                        local benchName = isSpecial and "Scythe_Evolve_3" or "Weapon_Evolve_3"
                        if #weaponList >= 2 then
                            local selected = {}
                            for i = 1, 2 do
                                selected[i] = weaponList[i]
                            end
                            game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                ["Selected"] = selected,
                                ["Action"] = "Evolve",
                                ["Bench_Name"] = benchName,
                            })
                            break  -- åªå¤„ç†ç¬¬ä¸€ä¸ªç¬¦åˆçš„ç»„
                        end
                    end

                    if not next(tier0Groups) and not next(tier1Groups) and not next(tier2Groups) then
                    end

                    task.wait(0.5)  -- æ¯0.5ç§’é‡æ–°æ£€æµ‹æ­¦å™¨åå­—å’ŒTier
                end
            end)
        else
            -- Toggleå…³é—­æ—¶ï¼Œè®¾ç½®å…¨å±€å˜é‡ä¸ºfalseï¼Œå¾ªçŽ¯åœæ­¢
        end
    end,
})

WeaponsTab:Divider()

-- è¾…åŠ©å‡½æ•°ï¼šæ ¹æ®weaponNameèŽ·å–UniqueIdï¼ˆbutton Nameï¼‰
local function getWeaponUniqueId(weaponName)
    local player = game:GetService("Players").LocalPlayer
    local playerGui = player:FindFirstChild("PlayerGui")
    if playerGui and playerGui:IsA("PlayerGui") then
        local inventoryGui = playerGui:FindFirstChild("Inventory_1")
        if inventoryGui and inventoryGui:IsA("ScreenGui") then
            local hub = inventoryGui:FindFirstChild("Hub")
            if hub and hub:IsA("Frame") then
                local weapons = hub:FindFirstChild("Weapons")
                if weapons and weapons:IsA("Frame") then
                    local listFrame = weapons:FindFirstChild("List_Frame")
                    if listFrame and listFrame:IsA("Frame") then
                        local list = listFrame:FindFirstChild("List")
                        if list and list:IsA("ScrollingFrame") then
                            for _, weaponButton in pairs(list:GetChildren()) do
                                if weaponButton:IsA("ImageButton") and weaponButton:FindFirstChild("Inside") then
                                    local inside = weaponButton.Inside
                                    if inside:IsA("Frame") and inside:FindFirstChild("Title") then
                                        local title = inside.Title
                                        if title:IsA("TextLabel") and title.Text == weaponName then
                                            return weaponButton.Name  -- è¿”å›žbuttonçš„Nameä½œä¸ºUniqueId
                                        end
                                    end
                                end
                            end
                        end
                    end
                end
            end
        end
    end
    return nil
end

local WeaponsDropdown = WeaponsTab:Dropdown({
    Flag = "WeaponsDropdown1",
    Title = "Select Weapons to Evolve",
    Values = {},  -- åˆå§‹ä¸ºç©º
    Value = {},
    Multi = true,
    AllowNone = true,
    Callback = function(option)
        getgenv().SelectedWeapons = option
    end,
})

local WeaponRefreshButton = WeaponsTab:Button({
    Flag = "RefreshButton2",
    Title = "Refresh Weapons List",
    Callback = function()
        -- ç±»ä¼¼Mobåˆ·æ–°é€»è¾‘ï¼šé‡æ–°æ‰«æå¹¶åˆ·æ–°dropdown
        local weaponList = {}
        local player = game:GetService("Players").LocalPlayer
        local playerGui = player:FindFirstChild("PlayerGui")
        if playerGui and playerGui:IsA("PlayerGui") then
            local inventoryGui = playerGui:FindFirstChild("Inventory_1")
            if inventoryGui and inventoryGui:IsA("ScreenGui") then
                local hub = inventoryGui:FindFirstChild("Hub")
                if hub and hub:IsA("Frame") then
                    local weapons = hub:FindFirstChild("Weapons")
                    if weapons and weapons:IsA("Frame") then
                        local listFrame = weapons:FindFirstChild("List_Frame")
                        if listFrame and listFrame:IsA("Frame") then
                            local list = listFrame:FindFirstChild("List")
                            if list and list:IsA("ScrollingFrame") then
                                for _, weaponButton in pairs(list:GetChildren()) do
                                    if weaponButton:IsA("ImageButton") and weaponButton:FindFirstChild("Inside") then
                                        local inside = weaponButton.Inside
                                        if inside:IsA("Frame") and inside:FindFirstChild("Title") then
                                            local title = inside.Title
                                            if title:IsA("TextLabel") then
                                                local weaponName = title.Text  -- ç›´æŽ¥èŽ·å–Textå±žæ€§
                                                if weaponName and weaponName ~= "" then
                                                    table.insert(weaponList, weaponName)
                                                end
                                            end
                                        end
                                    end
                                end
                            end
                        end
                    end
                end
            end
        end

        if #weaponList == 0 then
            WeaponsDropdown:Refresh({"None"})
        else
            WeaponsDropdown:Refresh(weaponList)
        end
    end,
})

WeaponsTab:Divider()

-- å…¨å±€æŽ§åˆ¶å˜é‡
getgenv().AutoBreathingsRunning = false
getgenv().AutoBankaiRunning = false
getgenv().AutoChakraRunning = false
getgenv().AutoScytheRunning = false

local AutoBreathingsToggle = WeaponsTab:Toggle({
    Flag = "AutoBreathings1",
    Title = "Auto Roll Breathings",
    Desc = "Automatically Roll Breathings Using Selected Weapon",
    Default = false,
    Callback = function(state)
        getgenv().AutoBreathingsRunning = state
        if state then
            task.spawn(function()
                while getgenv().AutoBreathingsRunning do
                    if getgenv().SelectedWeapons and #getgenv().SelectedWeapons > 0 then
                        for _, weaponName in ipairs(getgenv().SelectedWeapons) do
                            -- èŽ·å–weaponçš„UniqueIdï¼ˆbutton Nameï¼‰
                            local uniqueId = getWeaponUniqueId(weaponName)
                            if uniqueId then
                                game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                    ["UniqueId"] = uniqueId,
                                    ["Type"] = "Enchant",
                                    ["Action"] = "Enchantment",
                                    ["Enchantment_Name"] = "Breathings",
                                })
                            else
                            end
                        end
                    end
                    task.wait(0.2)
                end
            end)
        else
        end
    end,
})

local AutoBankaiToggle = WeaponsTab:Toggle({
    Flag = "AutoBankai1",
    Title = "Auto Roll Bankai",
    Desc = "Automatically Roll Bankai Using Selected Weapon",
    Default = false,
    Callback = function(state)
        getgenv().AutoBankaiRunning = state
        if state then
            task.spawn(function()
                while getgenv().AutoBankaiRunning do
                    if getgenv().SelectedWeapons and #getgenv().SelectedWeapons > 0 then
                        for _, weaponName in ipairs(getgenv().SelectedWeapons) do
                            local uniqueId = getWeaponUniqueId(weaponName)
                            if uniqueId then
                                game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                    ["Type"] = "Enchant",
                                    ["UniqueId"] = uniqueId,
                                    ["Action"] = "Enchantment",
                                    ["Enchantment_Name"] = "Bankai",
                                })
                            else
                            end
                        end
                    end
                    task.wait(0.2)
                end
            end)
        else
        end
    end,
})

local AutoChakraToggle = WeaponsTab:Toggle({
    Flag = "AutoChakra1",
    Title = "Auto Roll Chakra Infusion",
    Desc = "Automatically Roll Chakra Infusion Using Selected Weapon",
    Default = false,
    Callback = function(state)
        getgenv().AutoChakraRunning = state
        if state then
            task.spawn(function()
                while getgenv().AutoChakraRunning do
                    if getgenv().SelectedWeapons and #getgenv().SelectedWeapons > 0 then
                        for _, weaponName in ipairs(getgenv().SelectedWeapons) do
                            local uniqueId = getWeaponUniqueId(weaponName)
                            if uniqueId then
                                game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                    ["Type"] = "Enchant",
                                    ["UniqueId"] = uniqueId,
                                    ["Action"] = "Enchantment",
                                    ["Enchantment_Name"] = "Chakra_Infusion",
                                })
                            else
                            end
                        end
                    end
                    task.wait(0.2)
                end
            end)
        else
        end
    end,
})

local AutoScytheToggle = WeaponsTab:Toggle({
    Flag = "AutoScythe1",
    Title = "Auto Upgrade Scythe Leveling",
    Desc = "Automatically Upgrade Scythe Leveling Using Selected Weapon",
    Default = false,
    Callback = function(state)
        getgenv().AutoScytheRunning = state
        if state then
            task.spawn(function()
                while getgenv().AutoScytheRunning do
                    if getgenv().SelectedWeapons and #getgenv().SelectedWeapons > 0 then
                        for _, weaponName in ipairs(getgenv().SelectedWeapons) do
                            local uniqueId = getWeaponUniqueId(weaponName)
                            if uniqueId then
                                game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                    ["Upgrade_Name"] = "Level",
                                    ["UniqueId"] = uniqueId,
                                    ["Action"] = "Prog_Lv_Items",
                                    ["Bench_Name"] = "Scythe_Leveling",
                                })
                            end
                        end
                    end
                    task.wait(0.2)
                end
            end)
        else
        end
    end,
})

local TitansTab = Window:Tab({
        Title = "Titans",
        Icon = "person-standing",
    })

getgenv().AutoTitansEvolveRunning = false

local TitansEvolveToggle = TitansTab:Toggle({
    Flag = "TitansEvolve1",
    Title = "Auto Evolve Titans",
    Default = false,
    Callback = function(state)
        getgenv().AutoTitansEvolveRunning = state
        if state then
            -- å¯åŠ¨å¾ªçŽ¯ï¼šæ¯0.5ç§’é‡æ–°æ£€æµ‹titanåå­—å’ŒTierå¹¶å‘é€Evolveä¿¡å·
            task.spawn(function()
                while getgenv().AutoTitansEvolveRunning do  -- ä½¿ç”¨å…¨å±€å˜é‡æŽ§åˆ¶å¾ªçŽ¯
                    local titantier0Groups = {}  -- { ["Titan Name"] = {list of titan button names} } for Tier 0 (no Tier Frame)
                    local titantier1Groups = {}  -- { ["Titan Name"] = {list of titan button names} } for Tier 1 (Tier Frame with ImageLabel Name = "1" only)
                    local titantier2Groups = {}  -- { ["Titan Name"] = {list of titan button names} } for Tier 2 (Tier Frame with ImageLabel Name = "1" and "2" only, no "3")
                    local player = game:GetService("Players").LocalPlayer
                    local playerGui = player:FindFirstChild("PlayerGui")
                    if playerGui and playerGui:IsA("PlayerGui") then
                        local inventoryGui = playerGui:FindFirstChild("Inventory_1")
                        if inventoryGui and inventoryGui:IsA("ScreenGui") then
                            local hub = inventoryGui:FindFirstChild("Hub")
                            if hub and hub:IsA("Frame") then
                                local titans = hub:FindFirstChild("Titans")
                                if titans and titans:IsA("Frame") then
                                    local listFrame = titans:FindFirstChild("List_Frame")
                                    if listFrame and listFrame:IsA("Frame") then
                                        local list = listFrame:FindFirstChild("List")
                                        if list and list:IsA("ScrollingFrame") then
                                            local children = list:GetChildren()
                                            for _, titanButton in pairs(children) do
                                                if titanButton:IsA("ImageButton") then
                                                    local inside = titanButton:FindFirstChild("Inside")
                                                    if inside then
                                                        if inside:IsA("CanvasGroup") then
                                                            local title = inside:FindFirstChild("Title")
                                                            if title then
                                                                if title:IsA("TextLabel") then
                                                                    local titanName = title.Text
                                                                    local titantierFrame = inside:FindFirstChild("Tier")
                                                                    if titanName and titanName ~= "" then
                                                                        if not titantierFrame then
                                                                            -- Tier 0: no Tier Frame
                                                                            if not titantier0Groups[titanName] then
                                                                                titantier0Groups[titanName] = {}
                                                                            end
                                                                            table.insert(titantier0Groups[titanName], titanButton.Name)
                                                                        elseif titantierFrame:IsA("Frame") then
                                                                            -- æ£€æŸ¥Tieré‡Œé¢çš„ImageLabel
                                                                            local hasImage1 = false
                                                                            local hasImage2 = false
                                                                            local hasImage3 = false
                                                                            for _, child in pairs(titantierFrame:GetChildren()) do
                                                                                if child:IsA("ImageLabel") then
                                                                                    if child.Name == "1" then
                                                                                        hasImage1 = true
                                                                                    elseif child.Name == "2" then
                                                                                        hasImage2 = true
                                                                                    elseif child.Name == "3" then
                                                                                        hasImage3 = true
                                                                                    end
                                                                                end
                                                                            end
                                                                            if hasImage1 and not hasImage2 and not hasImage3 then
                                                                                -- Tier 1: has ImageLabel Name = "1" only
                                                                                if not titantier1Groups[titanName] then
                                                                                    titantier1Groups[titanName] = {}
                                                                                end
                                                                                table.insert(titantier1Groups[titanName], titanButton.Name)
                                                                            elseif hasImage1 and hasImage2 and not hasImage3 then
                                                                                -- Tier 2: has ImageLabel Name = "1" and "2" only, no "3"
                                                                                if not titantier2Groups[titanName] then
                                                                                    titantier2Groups[titanName] = {}
                                                                                end
                                                                                table.insert(titantier2Groups[titanName], titanButton.Name)
                                                                            end
                                                                        end
                                                                    end
                                                                end
                                                            end
                                                        end
                                                    end
                                                end
                                            end
                                        end
                                    end
                                end
                            end
                        end
                    end

                    -- å‘é€Evolveä¿¡å·
                    -- Tier 0: Titan_Evolve, 2 titans
                    for titanName, titanList in pairs(titantier0Groups) do
                        if #titanList >= 2 then
                            local selected = {}
                            for i = 1, 2 do
                                selected[i] = titanList[i]
                            end
                            game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                ["Selected"] = selected,
                                ["Action"] = "Evolve",
                                ["Bench_Name"] = "Titan_Evolve",
                            })
                            break  -- åªå¤„ç†ç¬¬ä¸€ä¸ªç¬¦åˆçš„ç»„
                        end
                    end

                    -- Tier 1: Titan_Evolve_2, 2 titans
                    for titanName, titanList in pairs(titantier1Groups) do
                        if #titanList >= 2 then
                            local selected = {}
                            for i = 1, 2 do
                                selected[i] = titanList[i]
                            end
                            game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                ["Selected"] = selected,
                                ["Action"] = "Evolve",
                                ["Bench_Name"] = "Titan_Evolve_2",
                            })
                            break  -- åªå¤„ç†ç¬¬ä¸€ä¸ªç¬¦åˆçš„ç»„
                        end
                    end

                    -- Tier 2: Titan_Evolve_3, 2 titans
                    for titanName, titanList in pairs(titantier2Groups) do
                        if #titanList >= 2 then
                            local selected = {}
                            for i = 1, 2 do
                                selected[i] = titanList[i]
                            end
                            game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                ["Selected"] = selected,
                                ["Action"] = "Evolve",
                                ["Bench_Name"] = "Titan_Evolve_3",
                            })
                            break  -- åªå¤„ç†ç¬¬ä¸€ä¸ªç¬¦åˆçš„ç»„
                        end
                    end

                    task.wait(0.5)  -- æ¯0.5ç§’é‡æ–°æ£€æµ‹titanåå­—å’ŒTier
                end
            end)
        else
            -- Toggleå…³é—­æ—¶ï¼Œè®¾ç½®å…¨å±€å˜é‡ä¸ºfalseï¼Œå¾ªçŽ¯åœæ­¢
        end
    end,
})

TitansTab:Divider()

local function getTitanUniqueId(titanName)
    local player = game:GetService("Players").LocalPlayer
    local playerGui = player:FindFirstChild("PlayerGui")
    if playerGui and playerGui:IsA("PlayerGui") then
        local inventoryGui = playerGui:FindFirstChild("Inventory_1")
        if inventoryGui and inventoryGui:IsA("ScreenGui") then
            local hub = inventoryGui:FindFirstChild("Hub")
            if hub and hub:IsA("Frame") then
                local titans = hub:FindFirstChild("Titans")
                if titans and titans:IsA("Frame") then
                    local listFrame = titans:FindFirstChild("List_Frame")
                    if listFrame and listFrame:IsA("Frame") then
                        local list = listFrame:FindFirstChild("List")
                        if list and list:IsA("ScrollingFrame") then
                            for _, titanButton in pairs(list:GetChildren()) do
                                if titanButton:IsA("ImageButton") and titanButton:FindFirstChild("Inside") then
                                    local inside = titanButton.Inside
                                    if inside:IsA("CanvasGroup") and inside:FindFirstChild("Title") then
                                        local title = inside.Title
                                        if title:IsA("TextLabel") and title.Text == titanName then
                                            return titanButton.Name  -- è¿”å›žbuttonçš„Nameä½œä¸ºUniqueId
                                        end
                                    end
                                end
                            end
                        end
                    end
                end
            end
        end
    end
    return nil
end

local TitansDropdown = TitansTab:Dropdown({
    Flag = "TitansDropdown1",
    Title = "Select Titans to Inject",
    Values = {},  -- åˆå§‹ä¸ºç©º
    Value = {},
    Multi = true,
    AllowNone = true,
    Callback = function(option)
        getgenv().SelectedTitans = option
    end,
})

local TitanRefreshButton = TitansTab:Button({
    Flag = "RefreshButton3",
    Title = "Refresh Titans List",
    Callback = function()
        -- ç±»ä¼¼Mobåˆ·æ–°é€»è¾‘ï¼šé‡æ–°æ‰«æå¹¶åˆ·æ–°dropdown
        local titanList = {}
        local player = game:GetService("Players").LocalPlayer
        local playerGui = player:FindFirstChild("PlayerGui")
        if playerGui and playerGui:IsA("PlayerGui") then
            local inventoryGui = playerGui:FindFirstChild("Inventory_1")
            if inventoryGui and inventoryGui:IsA("ScreenGui") then
                local hub = inventoryGui:FindFirstChild("Hub")
                if hub and hub:IsA("Frame") then
                    local titans = hub:FindFirstChild("Titans")
                    if titans and titans:IsA("Frame") then
                        local listFrame = titans:FindFirstChild("List_Frame")
                        if listFrame and listFrame:IsA("Frame") then
                            local list = listFrame:FindFirstChild("List")
                            if list and list:IsA("ScrollingFrame") then
                                for _, titanButton in pairs(list:GetChildren()) do
                                    if titanButton:IsA("ImageButton") and titanButton:FindFirstChild("Inside") then
                                        local inside = titanButton.Inside
                                        if inside:IsA("CanvasGroup") and inside:FindFirstChild("Title") then
                                            local title = inside.Title
                                            if title:IsA("TextLabel") then
                                                local titanName = title.Text  -- ç›´æŽ¥èŽ·å–Textå±žæ€§
                                                if titanName and titanName ~= "" then
                                                    table.insert(titanList, titanName)
                                                end
                                            end
                                        end
                                    end
                                end
                            end
                        end
                    end
                end
            end
        end

        if #titanList == 0 then
            TitansDropdown:Refresh({"None"})
        else
            TitansDropdown:Refresh(titanList)
        end
    end,
})

TitansTab:Divider()

getgenv().AutoInjectionRunning = false

local AutoInjectionTitanToggle = TitansTab:Toggle({
    Flag = "AutoInjection1",
    Title = "Auto Roll Injection",
    Desc = "Automatically Roll Injection Using Selected Titan",
    Default = false,
    Callback = function(state)
        getgenv().AutoInjectionRunning = state
        if state then
            task.spawn(function()
                while getgenv().AutoInjectionRunning do
                    if getgenv().SelectedTitans and #getgenv().SelectedTitans > 0 then
                        for _, titanName in ipairs(getgenv().SelectedTitans) do
                            -- èŽ·å–weaponçš„UniqueIdï¼ˆbutton Nameï¼‰
                            local uniqueId = getTitanUniqueId(titanName)
                            if uniqueId then
                                game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                    ["Type"] = "Enchant",
                                    ["UniqueId"] = uniqueId,
                                    ["Action"] = "Enchantment",
                                    ["Enchantment_Name"] = "Titan_Injection",
                                })
                            else
                            end
                        end
                    end
                    task.wait(0.2)
                end
            end)
        else
        end
    end,
})

local StandsTab = Window:Tab({
        Title = "Stands",
        Icon = "arrow-up-from-dot",
    })

getgenv().AutoStandsEvolveRunning = false

local StandsEvolveToggle = StandsTab:Toggle({
    Flag = "StandsEvolve1",
    Title = "Auto Evolve Stands",
    Default = false,
    Callback = function(state)
        getgenv().AutoStandsEvolveRunning = state
        if state then
            -- å¯åŠ¨å¾ªçŽ¯ï¼šæ¯0.5ç§’é‡æ–°æ£€æµ‹titanåå­—å’ŒTierå¹¶å‘é€Evolveä¿¡å·
            task.spawn(function()
                while getgenv().AutoStandsEvolveRunning do  -- ä½¿ç”¨å…¨å±€å˜é‡æŽ§åˆ¶å¾ªçŽ¯
                    local standtier0Groups = {}  -- { ["Titan Name"] = {list of titan button names} } for Tier 0 (no Tier Frame)
                    local standtier1Groups = {}  -- { ["Titan Name"] = {list of titan button names} } for Tier 1 (Tier Frame with ImageLabel Name = "1" only)
                    local standtier2Groups = {}  -- { ["Titan Name"] = {list of titan button names} } for Tier 2 (Tier Frame with ImageLabel Name = "1" and "2" only, no "3")
                    local player = game:GetService("Players").LocalPlayer
                    local playerGui = player:FindFirstChild("PlayerGui")
                    if playerGui and playerGui:IsA("PlayerGui") then
                        local inventoryGui = playerGui:FindFirstChild("Inventory_1")
                        if inventoryGui and inventoryGui:IsA("ScreenGui") then
                            local hub = inventoryGui:FindFirstChild("Hub")
                            if hub and hub:IsA("Frame") then
                                local stands = hub:FindFirstChild("Stands")
                                if stands and stands:IsA("Frame") then
                                    local listFrame = stands:FindFirstChild("List_Frame")
                                    if listFrame and listFrame:IsA("Frame") then
                                        local list = listFrame:FindFirstChild("List")
                                        if list and list:IsA("ScrollingFrame") then
                                            local children = list:GetChildren()
                                            for _, standButton in pairs(children) do
                                                if standButton:IsA("ImageButton") then
                                                    local inside = standButton:FindFirstChild("Inside")
                                                    if inside then
                                                        if inside:IsA("CanvasGroup") then
                                                            local title = inside:FindFirstChild("Title")
                                                            if title then
                                                                if title:IsA("TextLabel") then
                                                                    local standName = title.Text
                                                                    local standtierFrame = inside:FindFirstChild("Tier")
                                                                    if standName and standName ~= "" then
                                                                        if not standtierFrame then
                                                                            -- Tier 0: no Tier Frame
                                                                            if not standtier0Groups[standName] then
                                                                                standtier0Groups[standName] = {}
                                                                            end
                                                                            table.insert(standtier0Groups[standName], standButton.Name)
                                                                        elseif standtierFrame:IsA("Frame") then
                                                                            -- æ£€æŸ¥Tieré‡Œé¢çš„ImageLabel
                                                                            local hasImage1 = false
                                                                            local hasImage2 = false
                                                                            local hasImage3 = false
                                                                            for _, child in pairs(standtierFrame:GetChildren()) do
                                                                                if child:IsA("ImageLabel") then
                                                                                    if child.Name == "1" then
                                                                                        hasImage1 = true
                                                                                    elseif child.Name == "2" then
                                                                                        hasImage2 = true
                                                                                    elseif child.Name == "3" then
                                                                                        hasImage3 = true
                                                                                    end
                                                                                end
                                                                            end
                                                                            if hasImage1 and not hasImage2 and not hasImage3 then
                                                                                -- Tier 1: has ImageLabel Name = "1" only
                                                                                if not standtier1Groups[standName] then
                                                                                    standtier1Groups[standName] = {}
                                                                                end
                                                                                table.insert(standtier1Groups[standName], standButton.Name)
                                                                            elseif hasImage1 and hasImage2 and not hasImage3 then
                                                                                -- Tier 2: has ImageLabel Name = "1" and "2" only, no "3"
                                                                                if not standtier2Groups[standName] then
                                                                                    standtier2Groups[standName] = {}
                                                                                end
                                                                                table.insert(standtier2Groups[standName], standButton.Name)
                                                                            end
                                                                        end
                                                                    end
                                                                end
                                                            end
                                                        end
                                                    end
                                                end
                                            end
                                        end
                                    end
                                end
                            end
                        end
                    end

                    -- å‘é€Evolveä¿¡å·
                    -- Tier 0: Titan_Evolve, 2 titans
                    for standName, standList in pairs(standtier0Groups) do
                        if #standList >= 2 then
                            local selected = {}
                            for i = 1, 2 do
                                selected[i] = standList[i]
                            end
                            game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                ["Selected"] = selected,
                                ["Action"] = "Evolve",
                                ["Bench_Name"] = "Stand_Evolve",
                            })
                            break  -- åªå¤„ç†ç¬¬ä¸€ä¸ªç¬¦åˆçš„ç»„
                        end
                    end

                    -- Tier 1: Titan_Evolve_2, 2 titans
                    for standName, standList in pairs(standtier1Groups) do
                        if #standList >= 2 then
                            local selected = {}
                            for i = 1, 2 do
                                selected[i] = standList[i]
                            end
                            game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                ["Selected"] = selected,
                                ["Action"] = "Evolve",
                                ["Bench_Name"] = "Stand_Evolve_2",
                            })
                            break  -- åªå¤„ç†ç¬¬ä¸€ä¸ªç¬¦åˆçš„ç»„
                        end
                    end

                    -- Tier 2: Titan_Evolve_3, 2 titans
                    for standName, standList in pairs(standtier2Groups) do
                        if #standList >= 2 then
                            local selected = {}
                            for i = 1, 2 do
                                selected[i] = standList[i]
                            end
                            game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                ["Selected"] = selected,
                                ["Action"] = "Evolve",
                                ["Bench_Name"] = "Stand_Evolve_3",
                            })
                            break  -- åªå¤„ç†ç¬¬ä¸€ä¸ªç¬¦åˆçš„ç»„
                        end
                    end

                    task.wait(0.5)  -- æ¯0.5ç§’é‡æ–°æ£€æµ‹titanåå­—å’ŒTier
                end
            end)
        else
            -- Toggleå…³é—­æ—¶ï¼Œè®¾ç½®å…¨å±€å˜é‡ä¸ºfalseï¼Œå¾ªçŽ¯åœæ­¢
        end
    end,
})

StandsTab:Divider()

local function getStandUniqueId(standName)
    local player = game:GetService("Players").LocalPlayer
    local playerGui = player:FindFirstChild("PlayerGui")
    if playerGui and playerGui:IsA("PlayerGui") then
        local inventoryGui = playerGui:FindFirstChild("Inventory_1")
        if inventoryGui and inventoryGui:IsA("ScreenGui") then
            local hub = inventoryGui:FindFirstChild("Hub")
            if hub and hub:IsA("Frame") then
                local stands = hub:FindFirstChild("Stands")
                if stands and stands:IsA("Frame") then
                    local listFrame = stands:FindFirstChild("List_Frame")
                    if listFrame and listFrame:IsA("Frame") then
                        local list = listFrame:FindFirstChild("List")
                        if list and list:IsA("ScrollingFrame") then
                            for _, standButton in pairs(list:GetChildren()) do
                                if standButton:IsA("ImageButton") and standButton:FindFirstChild("Inside") then
                                    local inside = standButton.Inside
                                    if inside:IsA("CanvasGroup") and inside:FindFirstChild("Title") then
                                        local title = inside.Title
                                        if title:IsA("TextLabel") and title.Text == standName then
                                            return standButton.Name  -- è¿”å›žbuttonçš„Nameä½œä¸ºUniqueId
                                        end
                                    end
                                end
                            end
                        end
                    end
                end
            end
        end
    end
    return nil
end

local StandsDropdown = StandsTab:Dropdown({
    Flag = "StandsDropdown1",
    Title = "Select Stands to Inject",
    Values = {},  -- åˆå§‹ä¸ºç©º
    Value = {},
    Multi = true,
    AllowNone = true,
    Callback = function(option)
        getgenv().SelectedStands = option
    end,
})

local StandRefreshButton = StandsTab:Button({
    Flag = "RefreshButton4",
    Title = "Refresh Stands List",
    Callback = function()
        -- ç±»ä¼¼Mobåˆ·æ–°é€»è¾‘ï¼šé‡æ–°æ‰«æå¹¶åˆ·æ–°dropdown
        local standList = {}
        local player = game:GetService("Players").LocalPlayer
        local playerGui = player:FindFirstChild("PlayerGui")
        if playerGui and playerGui:IsA("PlayerGui") then
            local inventoryGui = playerGui:FindFirstChild("Inventory_1")
            if inventoryGui and inventoryGui:IsA("ScreenGui") then
                local hub = inventoryGui:FindFirstChild("Hub")
                if hub and hub:IsA("Frame") then
                    local stands = hub:FindFirstChild("Stands")
                    if stands and stands:IsA("Frame") then
                        local listFrame = stands:FindFirstChild("List_Frame")
                        if listFrame and listFrame:IsA("Frame") then
                            local list = listFrame:FindFirstChild("List")
                            if list and list:IsA("ScrollingFrame") then
                                for _, standButton in pairs(list:GetChildren()) do
                                    if standButton:IsA("ImageButton") and standButton:FindFirstChild("Inside") then
                                        local inside = standButton.Inside
                                        if inside:IsA("CanvasGroup") and inside:FindFirstChild("Title") then
                                            local title = inside.Title
                                            if title:IsA("TextLabel") then
                                                local standName = title.Text  -- ç›´æŽ¥èŽ·å–Textå±žæ€§
                                                if standName and standName ~= "" then
                                                    table.insert(standList, standName)
                                                end
                                            end
                                        end
                                    end
                                end
                            end
                        end
                    end
                end
            end
        end

        if #standList == 0 then
            StandsDropdown:Refresh({"None"})
        else
            StandsDropdown:Refresh(standList)
        end
    end,
})

StandsTab:Divider()

getgenv().AutoStandsInjectionRunning = false

local AutoStandsInjectionToggle = StandsTab:Toggle({
    Flag = "AutoInjection2",
    Title = "Auto Roll Requiem Injection",
    Desc = "Automatically Roll Requiem Injection Using Selected Stand",
    Default = false,
    Callback = function(state)
        getgenv().AutoStandsInjectionRunning = state
        if state then
            task.spawn(function()
                while getgenv().AutoStandsInjectionRunning do
                    if getgenv().SelectedStands and #getgenv().SelectedStands > 0 then
                        for _, standName in ipairs(getgenv().SelectedStands) do
                            -- èŽ·å–weaponçš„UniqueIdï¼ˆbutton Nameï¼‰
                            local uniqueId = getStandUniqueId(standName)
                            if uniqueId then
                                game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                    ["Type"] = "Enchant",
                                    ["UniqueId"] = uniqueId,
                                    ["Action"] = "Enchantment",
                                    ["Enchantment_Name"] = "Requiem_Injection",
                                })
                            else
                            end
                        end
                    end
                    task.wait(0.2)
                end
            end)
        else
        end
    end,
})

local ProgressionTab = Window:Tab({
        Title = "Progression",
        Icon = "chevrons-up",
    })

--Auto Progression Upgrade
local ProgressionDropdown = ProgressionTab:Dropdown({
    Flag = "ProgressionDropdown",
   Title = "Progression List",
   Values = {
    "[W1] Christmas Materials","[W1] Christmas Damage","[W1] Christmas Damage 2","[W1] Christmas Damage 3","[W1] Christmas Damage 4",
    "[W2] Haki Upgrade",
    "[W3] Spiritual Pressure",
    "[W4] Cursed Progression",
    "[W5] Slayer Energy Progression",
    "[W6] ReAwakening Progression","[W6] Monarch Progression",
    "[W7] Water Spirit Progression","[W7] Fire Spirit Progression","[W7] Wind Spirit Progression",
    "[W8] Chakra Progression",
    "[W9] Spiritual Upgrade","[W9] Lucky Spirit",
    "[W10] Ten Progression","[W10] Contract of Greed",
    "[W12] Sins Upgrades (Energy)","[W12] Sins Upgrades (Coins)","[W12] Sins Upgrades (Star_Luck)","[W12] Sins Upgrades (Damage)","[W12] Energy Progression",
    "[W13] Fortitude Level", "[W13] Kaiju Energy",
    "[W14] Demon Lord Energy", "[W14] Demon Lord Damage","[W14] Demon Lord Luck","[W14] Demon Lord Coins",
    "[W15] Swordsman Energy","[W15] Swordsman Damage",
    "[W16] Ripple Energy",
    "[W17] Damange Cells",
    "[W18] Akuma Damage","[W18] Akuma Energy",
    "[W20] Dragon Energy","[W20] Dragon Damage",
    "[W22] Eminence Energy","[W22] Eminence Damage","[W22] Eminence Luck","[W22] Eminence Coins",
    "[W23] Punch Power Leveling",
    "[W24] Mana Growth","[W24] Ultimate Cast",
    "[W26] Assassin Energy","[W26] Assassin Damage","[W26] Assassin Critical Energy","[W26] Assassin Critical Damage",
    "[W29] Science Materials Upgrade","[W29] Science Upgrades (Energy)","[W29] Science Upgrades (Damage)",
    "[W34] House of Eagle","[W34] House of Killer Whale","[W34] House of Wolf",
    "[W35] Dragon Booster"
},
    Value = "[W2] Haki Upgrade",
    Callback = function(option)
        getgenv().selectedProgression = option
    end,
})

local ProgressionMap = { -- Upgrade_Name, Bench_Name, Action
    ["[W1] Christmas Materials"] = {"Christmas_Materials", "Christmas_Materials_Upgrade", "_Progression"},
    ["[W1] Christmas Damage"] = {"Christmas_Damage", "Christmas_Damage_Upgrade", "_Progression"},
    ["[W1] Christmas Damage 2"] = {"Christmas_Damage", "Christmas_Damage_Upgrade_2", "_Progression"},
    ["[W1] Christmas Damage 3"] = {"Christmas_Damage", "Christmas_Damage_Upgrade_3", "_Progression"},
    ["[W1] Christmas Damage 4"] = {"Christmas_Damage", "Christmas_Damage_Upgrade_4", "_Progression"},
    ["[W2] Haki Upgrade"] = {"Haki_Upgrade", "Haki_Upgrade", "_Upgrades"},
    ["[W3] Spiritual Pressure"] = {"Spiritual_Pressure", "Spiritual_Pressure", "_Upgrades"},
    ["[W4] Cursed Progression"] = {"Curse", "Cursed_Progression", "_Upgrades"},
    ["[W5] Slayer Energy Progression"] = {"Energy", "Slayer_Energy_Progression", "_Progression"},
    ["[W6] ReAwakening Progression"] = {"ReAwakening", "ReAwakening_Progression", "_Upgrades"},
    ["[W6] Monarch Progression"] = {"Monarch", "Monarch_Progression", "_Upgrades"},
    ["[W7] Water Spirit Progression"] = {"Water_Spirit", "Water_Spirit_Progression", "_Upgrades"},
    ["[W7] Fire Spirit Progression"] = {"Fire_Spirit", "Fire_Spirit_Progression", "_Upgrades"},
    ["[W7] Wind Spirit Progression"] = {"Wind_Spirit", "Wind_Spirit_Progression", "_Upgrades"},
    ["[W8] Chakra Progression"] = {"Chakra", "Chakra_Progression", "_Upgrades"},
    ["[W9] Spiritual Upgrade"] = {"Spiritual_Upgrade", "Spiritual_Upgrade", "_Upgrades"},
    ["[W9] Lucky Spirit"] = {"Luck", "Lucky_Spirit", "_Progression"},
    ["[W10] Ten Progression"] = {"Ten", "Ten_Progression", "_Upgrades"},
    ["[W10] Contract of Greed"] = {"Coins", "Contract_of_Greed", "_Progression"},
    ["[W12] Sins Upgrades (Energy)"] = {"Energy", "Sin_Upgrades", "_Upgrades"},
    ["[W12] Sins Upgrades (Coins)"] = {"Coins", "Sin_Upgrades", "_Upgrades"},
    ["[W12] Sins Upgrades (Star_Luck)"] = {"Star_Luck", "Sin_Upgrades", "_Upgrades"},
    ["[W12] Sins Upgrades (Damage)"] = {"Damage", "Sin_Upgrades", "_Upgrades"},
    ["[W12] Energy Progression"] = {"Strenght", "Energy_Progression", "_Progression"},
    ["[W13] Fortitude Level"] = {"Strenght", "Fortitude_Level", "_Progression"},
    ["[W13] Kaiju Energy"] = {"Energy", "Kaiju_Energy", "_Progression"},
    ["[W14] Demon Lord Energy"] = {"Energy", "Demon_Lord_Energy", "_Progression"},
    ["[W14] Demon Lord Damage"] = {"Damage", "Demon_Lord_Damage", "_Progression"},
    ["[W14] Demon Lord Luck"] = {"Luck", "Demon_Lord_Luck", "_Progression"},
    ["[W14] Demon Lord Coins"] = {"Coins", "Demon_Lord_Coins", "_Progression"},
    ["[W15] Swordsman Energy"] = {"Energy", "Swordsman_Energy", "_Progression"},
    ["[W15] Swordsman Damage"] = {"Damage", "Swordsman_Damage", "_Progression"},
    ["[W16] Ripple Energy"] = {"Energy", "Ripple_Energy", "_Progression"},
    ["[W17] Damange Cells"] = {"Damage", "Damage_Cells", "_Progression"},
    ["[W18] Akuma Damage"] = {"Damage", "Akuma_Damage", "_Progression"},
    ["[W18] Akuma Energy"] = {"Energy", "Akuma_Energy", "_Progression"},
    ["[W20] Dragon Energy"] = {"Energy", "Dragon_Energy", "_Progression"},
    ["[W20] Dragon Damage"] = {"Damage", "Dragon_Damage", "_Progression"},
    ["[W22] Eminence Energy"] = {"Energy", "Eminence_Energy", "_Progression"},
    ["[W22] Eminence Damage"] = {"Damage", "Eminence_Damage", "_Progression"},
    ["[W22] Eminence Luck"] = {"Luck", "Eminence_Luck", "_Progression"},
    ["[W22] Eminence Coins"] = {"Coins", "Eminence_Coins", "_Progression"},
    ["[W23] Punch Power Leveling"] = {"Damage", "Hide_n_Punch_Progression", "_Progression"},
    ["[W24] Mana Growth"] = {"Energy", "Mana_Growth", "_Progression"},
    ["[W24] Ultimate Cast"] = {"Damage", "Ultimate_Cast", "_Progression"},
    ["[W26] Assassin Energy"] = {"Energy", "Assassin_Energy", "_Progression"},
    ["[W26] Assassin Damage"] = {"Damage", "Assassin_Damage", "_Progression"},
    ["[W26] Assassin Critical Energy"] = {"Critical_Energy", "Assassin_Critical_Energy", "_Progression"},
    ["[W26] Assassin Critical Damage"] = {"Critical_Damage", "Assassin_Critical_Damage", "_Progression"},
    ["[W29] Science Materials Upgrade"] = {"Science_Materials", "Science_Materials_Upgrade", "_Progression"},
    ["[W29] Science Upgrades (Energy)"] = {"Energy", "Science_Upgrades", "_Upgrades"},
    ["[W29] Science Upgrades (Damage)"] = {"Damage", "Science_Upgrades", "_Upgrades"},
    ["[W34] House of Eagle"] = {"Coins_and_Luck", "House_of_Eagle", "_Progression"},
    ["[W34] House of Killer Whale"] = {"Energy", "House_of_Killer_Whale", "_Progression"},
    ["[W34] House of Wolf"] = {"Damage", "House_of_Wolf", "_Progression"},
    ["[W35] Dragon Booster"] = {"Damage", "Dragon_Booster", "_Progression"},
}

-- Auto Progression Toggle
local UpgradeProgressionToggle = ProgressionTab:Toggle({
    Flag = "AutoProgression1",
    Title = "Auto Progression",
    Desc = "Automatically Upgrade Selected Progression",
    Default = false,
    Callback = function(state)
        if state then
            getgenv().AutoProgression = true
            task.spawn(function()
                while getgenv().AutoProgression do
                    pcall(function()
                        local progressionData = ProgressionMap[getgenv().selectedProgression]
                        if progressionData then
                            local upgradingName, upgradeName, action = progressionData[1], progressionData[2], progressionData[3]
                            if action == "_Progression" then
                                game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                    ["Upgrade_Name"] = upgradingName,
                                    ["Action"] = "_Progression",
                                    ["Bench_Name"] = upgradeName,
                                })
                            else
                                game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                    ["Upgrading_Name"] = upgradingName,
                                    ["Action"] = "_Upgrades",
                                    ["Upgrade_Name"] = upgradeName,
                                })
                            end
                        else
                        end
                        task.wait(0.05)
                    end)
                end
            end)
        else
            getgenv().AutoProgression = false
        end
    end,
})

local LevelingTab = Window:Tab({
    Title = "Leveling",
    Icon = "arrow-big-up",
})

local AutoLevelIceSwordToggle = LevelingTab:Toggle({
    Flag = "AutoLevelIceSword",
    Title = "Auto Level Up Ice Sword",
    Desc = "Will works only if you have [Weapon] Ice Sword in your inventory *Do not change weapon name!*",
    Default = false,
    Callback = function(state)
        if state then
            getgenv().AutoLevelIceSwordRunning = true
            task.spawn(function()
                -- å…ˆæŸ¥æ‰¾ä¸€æ¬¡å†°å‰‘ï¼ŒèŽ·å–ID
                local iceSwordId = nil
                
                -- èŽ·å–çŽ©å®¶èƒŒåŒ…
                local player = game:GetService("Players").LocalPlayer
                local playerGui = player:FindFirstChild("PlayerGui")
                
                if playerGui and playerGui:IsA("PlayerGui") then
                    local inventoryGui = playerGui:FindFirstChild("Inventory_1")
                    if inventoryGui and inventoryGui:IsA("ScreenGui") then
                        local hub = inventoryGui:FindFirstChild("Hub")
                        if hub and hub:IsA("Frame") then
                            local wepons = hub:FindFirstChild("Weapons")
                            if wepons and wepons:IsA("Frame") then
                                local listFrame = wepons:FindFirstChild("List_Frame")
                                if listFrame and listFrame:IsA("Frame") then
                                    local list = listFrame:FindFirstChild("List")
                                    if list and list:IsA("ScrollingFrame") then
                                        -- éåŽ†æ‰€æœ‰å­é¡¹æŸ¥æ‰¾å†°å‰‘
                                        for _, itemButton in pairs(list:GetChildren()) do
                                            if itemButton:IsA("ImageButton") then
                                                local inside = itemButton:FindFirstChild("Inside")
                                                if inside and inside:IsA("Frame") then
                                                    local title = inside:FindFirstChild("Title")
                                                    if title and title:IsA("TextLabel") then
                                                        local itemName = title.Text
                                                        if itemName == "Ice Sword" then
                                                            iceSwordId = itemButton.Name
                                                            break
                                                        end
                                                    end
                                                end
                                            end
                                        end
                                    end
                                end
                            end
                        end
                    end
                end
                
                if not iceSwordId then
                    getgenv().AutoLevelIceSwordRunning = false
                    WindUI:Notify({
                        Title = "Lights Hub",
                        Content = "Unable to find [Weapon] Ice Sword in your inventory. Auto Leveling Stopped.",
                        Duration = 3,
                    })
                    return
                end

                -- æ‰¾åˆ°äº†å†°å‰‘ï¼Œå¼€å§‹æ¯0.1ç§’å‘é€å‡çº§è¯·æ±‚
                while getgenv().AutoLevelIceSwordRunning and task.wait(0.1) do
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Upgrade_Name"] = "Level",
                        ["UniqueId"] = iceSwordId,
                        ["Action"] = "Prog_Lv_Items",
                        ["Bench_Name"] = "Ice_Sword_Leveling",
                    })
                end    
            end)
        else
            getgenv().AutoLevelIceSwordRunning = false
        end
    end
})

LevelingTab:Divider()

local AutoLevelChristmasGloveToggle = LevelingTab:Toggle({
    Flag = "AutoLevelChristmasGlove1",
    Title = "Auto Level Up Christmas Glove",
    Desc = "Will works only if you have [Exotic] Christmas Glove in your inventory",
    Default = false,
    Callback = function(state)
        if state then
            getgenv().AutoLevelChristmasGloveRunning = true
            task.spawn(function()
                -- å…ˆæŸ¥æ‰¾ä¸€æ¬¡åœ£è¯žæ‰‹å¥—ï¼ŒèŽ·å–ID
                local christmasGloveId = nil
                
                -- èŽ·å–çŽ©å®¶èƒŒåŒ…
                local player = game:GetService("Players").LocalPlayer
                local playerGui = player:FindFirstChild("PlayerGui")
                
                if playerGui and playerGui:IsA("PlayerGui") then
                    local inventoryGui = playerGui:FindFirstChild("Inventory_1")
                    if inventoryGui and inventoryGui:IsA("ScreenGui") then
                        local hub = inventoryGui:FindFirstChild("Hub")
                        if hub and hub:IsA("Frame") then
                            local powers = hub:FindFirstChild("Powers")
                            if powers and powers:IsA("Frame") then
                                local listFrame = powers:FindFirstChild("List_Frame")
                                if listFrame and listFrame:IsA("Frame") then
                                    local list = listFrame:FindFirstChild("List")
                                    if list and list:IsA("ScrollingFrame") then
                                        -- éåŽ†æ‰€æœ‰å­é¡¹æŸ¥æ‰¾åœ£è¯žæ‰‹å¥—
                                        for _, itemButton in pairs(list:GetChildren()) do
                                            if itemButton:IsA("ImageButton") then
                                                local inside = itemButton:FindFirstChild("Inside")
                                                if inside and inside:IsA("CanvasGroup") then
                                                    local title = inside:FindFirstChild("Title")
                                                    if title and title:IsA("TextLabel") then
                                                        local itemName = title.Text
                                                        if itemName == "Exotic Christmas Glove" then
                                                            christmasGloveId = itemButton.Name
                                                            break
                                                        end
                                                    end
                                                end
                                            end
                                        end
                                    end
                                end
                            end
                        end
                    end
                end
                
                if not christmasGloveId then
                    getgenv().AutoLevelChristmasGloveRunning = false
                    WindUI:Notify({
                        Title = "Lights Hub",
                        Content = "Unable to find [Exotic] Christmas Glove in your inventory. Auto Leveling Stopped.",
                        Duration = 3,
                    })
                    return
                end
                
                -- æ‰¾åˆ°äº†åœ£è¯žæ‰‹å¥—ï¼Œå¼€å§‹æ¯0.1ç§’å‘é€å‡çº§è¯·æ±‚
                while getgenv().AutoLevelChristmasGloveRunning and task.wait(0.1) do
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Upgrade_Name"] = "Level",
                        ["UniqueId"] = christmasGloveId,
                        ["Action"] = "Prog_Lv_Items",
                        ["Bench_Name"] = "Christmas_Glove_Leveling",
                    })
                end    
            end)
        else
            getgenv().AutoLevelChristmasGloveRunning = false
        end
    end
})

LevelingTab:Divider()

local KaguneListDropdown = LevelingTab:Dropdown({
    Flag = "KaguneDropdown1",
    Title = "Select Kagune to Level Up",
    Values = {
        "[Supreme] Koumyaku",
        "[Phantom] Mukade",
        "[Mythical] Hakuja",
        "[Legendary] Shidare",
        "[Epic] Tetsuba",
        "[Rare] Shinku",
        "[Uncommon] Hakuro",
        "[Common] Retto"
    },
    Value = "[Supreme] Koumyaku",
    Callback = function(option)
        getgenv().SelectedKagune = option
    end,
})

local AutoLevelKaguneToggle = LevelingTab:Toggle({
    Flag = "AutoLevelKagune1",
    Title = "Auto Level Up Kagune",
    Desc = "Will works only if you have the selected [Powers] Kagune in your inventory",
    Default = false,
    Callback = function(state)
        if state then
            if not getgenv().SelectedKagune then
                WindUI:Notify({
                    Title = "Lights Hub",
                    Content = "Please select a Kagune from the dropdown first.",
                    Duration = 3,
                })
                return
            end
            
            getgenv().AutoLevelKaguneRunning = true
            task.spawn(function()
                -- æå–é€‰ä¸­çš„Kaguneåç§°ï¼ˆåŽ»æŽ‰å‰ç¼€ï¼Œå¦‚ [Phantom] Mukade -> Mukadeï¼‰
                local selectedKagune = getgenv().SelectedKagune
                local kaguneName = string.match(selectedKagune, "%] (.+)")  -- æå– ] åŽçš„éƒ¨åˆ†
                
                if not kaguneName then
                    getgenv().AutoLevelKaguneRunning = false
                    WindUI:Notify({
                        Title = "Lights Hub",
                        Content = "Invalid Kagune selection. Auto Leveling Stopped.",
                        Duration = 3,
                    })
                    return
                end
                
                -- å…ˆæŸ¥æ‰¾ä¸€æ¬¡é€‰ä¸­çš„Kaguneï¼ŒèŽ·å–ID
                local kaguneId = nil
                
                -- èŽ·å–çŽ©å®¶èƒŒåŒ…
                local player = game:GetService("Players").LocalPlayer
                local playerGui = player:FindFirstChild("PlayerGui")
                
                if playerGui and playerGui:IsA("PlayerGui") then
                    local inventoryGui = playerGui:FindFirstChild("Inventory_1")
                    if inventoryGui and inventoryGui:IsA("ScreenGui") then
                        local hub = inventoryGui:FindFirstChild("Hub")
                        if hub and hub:IsA("Frame") then
                            local powers = hub:FindFirstChild("Powers")
                            if powers and powers:IsA("Frame") then
                                local listFrame = powers:FindFirstChild("List_Frame")
                                if listFrame and listFrame:IsA("Frame") then
                                    local list = listFrame:FindFirstChild("List")
                                    if list and list:IsA("ScrollingFrame") then
                                        -- éåŽ†æ‰€æœ‰å­é¡¹æŸ¥æ‰¾é€‰ä¸­çš„Kagune
                                        for _, itemButton in pairs(list:GetChildren()) do
                                            if itemButton:IsA("ImageButton") then
                                                local inside = itemButton:FindFirstChild("Inside")
                                                if inside and inside:IsA("CanvasGroup") then
                                                    local title = inside:FindFirstChild("Title")
                                                    if title and title:IsA("TextLabel") then
                                                        local itemName = title.Text
                                                        if itemName == kaguneName then
                                                            kaguneId = itemButton.Name
                                                            break
                                                        end
                                                    end
                                                end
                                            end
                                        end
                                    end
                                end
                            end
                        end
                    end
                end
                
                if not kaguneId then
                    getgenv().AutoLevelKaguneRunning = false
                    WindUI:Notify({
                        Title = "Lights Hub",
                        Content = "Unable to find Kagune in your inventory. Auto Leveling Stopped.",
                        Duration = 3,
                    })
                    return
                end
                
                -- æ‰¾åˆ°äº†Kaguneï¼Œå¼€å§‹æ¯0.1ç§’å‘é€å‡çº§è¯·æ±‚
                while getgenv().AutoLevelKaguneRunning and task.wait(0.1) do
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["UniqueId"] = kaguneId,
                        ["Action"] = "Leveling_Items",
                        ["Bench_Name"] = "Kagune_Leveling",
                    })
                end    
            end)
        else
            getgenv().AutoLevelKaguneRunning = false
        end
    end
})

LevelingTab:Divider()

local PokitaListDropdown = LevelingTab:Dropdown({
    Flag = "PokitaDropdown1",
    Title = "Select Pokita to Level Up",
    Values = {
        "Supreme Pokita",
        "Phantom Pokita",
        "Mythical Pokita",
        "Legendary Pokita",
        "Epic Pokita",
        "Rare Pokita",
        "Uncommon Pokita",
        "Common Pokita"
    },
    Value = "Supreme Pokita",
    Callback = function(option)
        getgenv().SelectedPokita = option
    end,
})

local AutoLevelPokitaToggle = LevelingTab:Toggle({
    Flag = "AutoLevelPokita1",
    Title = "Auto Level Up Pokita",
    Desc = "Will works only if you have the selected [Powers] Pokita in your inventory",
    Default = false,
    Callback = function(state)
        if state then
            if not getgenv().SelectedPokita then
                WindUI:Notify({
                    Title = "Lights Hub",
                    Content = "Please select a Pokita from the dropdown first.",
                    Duration = 3,
                })
                return
            end
            
            getgenv().AutoLevelPokitaRunning = true
            task.spawn(function()
                -- æå–é€‰ä¸­çš„Pokitaåç§°ï¼ˆåŽ»æŽ‰å‰ç¼€ï¼Œå¦‚ [Phantom] Mukade -> Mukadeï¼‰
                local selectedPokita = getgenv().SelectedPokita
                local pokitaName = selectedPokita
                
                if not pokitaName then
                    getgenv().AutoLevelPokitaRunning = false
                    WindUI:Notify({
                        Title = "Lights Hub",
                        Content = "Invalid Pokita selection. Auto Leveling Stopped.",
                        Duration = 3,
                    })
                    return
                end

                -- å…ˆæŸ¥æ‰¾ä¸€æ¬¡é€‰ä¸­çš„Pokitaï¼ŒèŽ·å–ID
                local pokitaId = nil
                
                -- èŽ·å–çŽ©å®¶èƒŒåŒ…
                local player = game:GetService("Players").LocalPlayer
                local playerGui = player:FindFirstChild("PlayerGui")
                
                if playerGui and playerGui:IsA("PlayerGui") then
                    local inventoryGui = playerGui:FindFirstChild("Inventory_1")
                    if inventoryGui and inventoryGui:IsA("ScreenGui") then
                        local hub = inventoryGui:FindFirstChild("Hub")
                        if hub and hub:IsA("Frame") then
                            local powers = hub:FindFirstChild("Powers")
                            if powers and powers:IsA("Frame") then
                                local listFrame = powers:FindFirstChild("List_Frame")
                                if listFrame and listFrame:IsA("Frame") then
                                    local list = listFrame:FindFirstChild("List")
                                    if list and list:IsA("ScrollingFrame") then
                                        -- éåŽ†æ‰€æœ‰å­é¡¹æŸ¥æ‰¾é€‰ä¸­çš„Pokita
                                        for _, itemButton in pairs(list:GetChildren()) do
                                            if itemButton:IsA("ImageButton") then
                                                local inside = itemButton:FindFirstChild("Inside")
                                                if inside and inside:IsA("CanvasGroup") then
                                                    local title = inside:FindFirstChild("Title")
                                                    if title and title:IsA("TextLabel") then
                                                        local itemName = title.Text
                                                        if itemName == pokitaName then
                                                            pokitaId = itemButton.Name
                                                            break
                                                        end
                                                    end
                                                end
                                            end
                                        end
                                    end
                                end
                            end
                        end
                    end
                end
                
                if not pokitaId then
                    getgenv().AutoLevelPokitaRunning = false
                    WindUI:Notify({
                        Title = "Lights Hub",
                        Content = "Unable to find Pokita in your inventory. Auto Leveling Stopped.",
                        Duration = 3,
                    })
                    return
                end

                -- æ‰¾åˆ°äº†Pokitaï¼Œå¼€å§‹æ¯0.1ç§’å‘é€å‡çº§è¯·æ±‚
                while getgenv().AutoLevelPokitaRunning and task.wait(0.1) do
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["UniqueId"] = pokitaId,
                        ["Action"] = "Leveling_Items",
                        ["Bench_Name"] = "Pokita_Leveling",
                    })
                end    
            end)
        else
            getgenv().AutoLevelPokitaRunning = false
        end
    end
})

LevelingTab:Divider()

local AutoLevelDemonArtsToggle = LevelingTab:Toggle({
    Flag = "AutoLevelDemonArts1",
    Title = "Auto Level Up [Phantom] Demon Arts",
    Desc = "Will works only if you have [Phantom] Blood Control (Demon Arts) in your inventory",
    Default = false,
    Callback = function(state)
        if state then
            getgenv().AutoLevelDemonArtsRunning = true
            task.spawn(function()
                local demonArtsId = nil
                
                -- èŽ·å–çŽ©å®¶èƒŒåŒ…
                local player = game:GetService("Players").LocalPlayer
                local playerGui = player:FindFirstChild("PlayerGui")
                
                if playerGui and playerGui:IsA("PlayerGui") then
                    local inventoryGui = playerGui:FindFirstChild("Inventory_1")
                    if inventoryGui and inventoryGui:IsA("ScreenGui") then
                        local hub = inventoryGui:FindFirstChild("Hub")
                        if hub and hub:IsA("Frame") then
                            local powers = hub:FindFirstChild("Powers")
                            if powers and powers:IsA("Frame") then
                                local listFrame = powers:FindFirstChild("List_Frame")
                                if listFrame and listFrame:IsA("Frame") then
                                    local list = listFrame:FindFirstChild("List")
                                    if list and list:IsA("ScrollingFrame") then

                                        for _, itemButton in pairs(list:GetChildren()) do
                                            if itemButton:IsA("ImageButton") then
                                                local inside = itemButton:FindFirstChild("Inside")
                                                if inside and inside:IsA("CanvasGroup") then
                                                    local title = inside:FindFirstChild("Title")
                                                    if title and title:IsA("TextLabel") then
                                                        local itemName = title.Text
                                                        if itemName == "Blood Control" then
                                                            demonArtsId = itemButton.Name
                                                            break
                                                        end
                                                    end
                                                end
                                            end
                                        end
                                    end
                                end
                            end
                        end
                    end
                end
                
                if not demonArtsId then
                    getgenv().AutoLevelDemonArtsRunning = false
                    WindUI:Notify({
                        Title = "Lights Hub",
                        Content = "Unable to find [Phantom] Blood Control (Demon Arts) in your inventory. Auto Leveling Stopped.",
                        Duration = 3,
                    })
                    return
                end

                -- æ‰¾åˆ°äº†[Phantom] Demon Artsï¼Œå¼€å§‹æ¯0.1ç§’å‘é€å‡çº§è¯·æ±‚
                while getgenv().AutoLevelDemonArtsRunning and task.wait(0.1) do
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Upgrade_Name"] = "Level",
                        ["UniqueId"] = demonArtsId,
                        ["Action"] = "Prog_Lv_Items",
                        ["Bench_Name"] = "Demon_Arts_Leveling",
                    })
                end    
            end)
        else
            getgenv().AutoLevelDemonArtsRunning = false
        end
    end
})

LevelingTab:Divider()

local MagicItemsListDropdown = LevelingTab:Dropdown({
    Flag = "MagicItemsListDropdown",
    Title = "Select Magic Item to Level Up",
    Values = {
        "[Exotic] Judgment Field",
        "[Supreme] Celestial Spirit Banishment",
        "[Phantom] Magic Stone",
        "[Mythical] Light Pen",
        "[Legendary] Ice Cutting Pen",
        "[Epic] Memory Days Book",
        "[Rare] Magic Power Finder",
        "[Uncommon] ColorS",
        "[Common] X-Balls"
    },
    Value = "[Common] X-Balls",
    Callback = function(option)
        getgenv().SelectedMagicItem = option
    end,
})

local AutoLevelMagicItemToggle = LevelingTab:Toggle({
    Flag = "AutoLevelMagicItem1",
    Title = "Auto Level Up Magic Item",
    Desc = "Will works only if you have the selected [Powers] Magic Item in your inventory",
    Default = false,
    Callback = function(state)
        if state then
            if not getgenv().SelectedMagicItem then
                WindUI:Notify({
                    Title = "Lights Hub",
                    Content = "Please select a Magic Item from the dropdown first.",
                    Duration = 3,
                })
                return
            end

            getgenv().AutoLevelMagicItemRunning = true
            task.spawn(function()
                -- æå–é€‰ä¸­çš„Magic Itemåç§°ï¼ˆåŽ»æŽ‰å‰ç¼€ï¼Œå¦‚ [Phantom] Magic Stone -> Magic Stoneï¼‰
                local selectedMagicItem = getgenv().SelectedMagicItem
                local magicItemName = string.match(selectedMagicItem, "%] (.+)")  -- æå– ] åŽçš„éƒ¨åˆ†
                
                if not magicItemName then
                    getgenv().AutoLevelMagicItemRunning = false
                    WindUI:Notify({
                        Title = "Lights Hub",
                        Content = "Invalid Magic Item selection. Auto Leveling Stopped.",
                        Duration = 3,
                    })
                    return
                end

                -- å…ˆæŸ¥æ‰¾ä¸€æ¬¡é€‰ä¸­çš„Magic Itemï¼ŒèŽ·å–ID
                local magicItemId = nil
                
                -- èŽ·å–çŽ©å®¶èƒŒåŒ…
                local player = game:GetService("Players").LocalPlayer
                local playerGui = player:FindFirstChild("PlayerGui")
                
                if playerGui and playerGui:IsA("PlayerGui") then
                    local inventoryGui = playerGui:FindFirstChild("Inventory_1")
                    if inventoryGui and inventoryGui:IsA("ScreenGui") then
                        local hub = inventoryGui:FindFirstChild("Hub")
                        if hub and hub:IsA("Frame") then
                            local powers = hub:FindFirstChild("Powers")
                            if powers and powers:IsA("Frame") then
                                local listFrame = powers:FindFirstChild("List_Frame")
                                if listFrame and listFrame:IsA("Frame") then
                                    local list = listFrame:FindFirstChild("List")
                                    if list and list:IsA("ScrollingFrame") then
                                        -- éåŽ†æ‰€æœ‰å­é¡¹æŸ¥æ‰¾é€‰ä¸­çš„Kagune
                                        for _, itemButton in pairs(list:GetChildren()) do
                                            if itemButton:IsA("ImageButton") then
                                                local inside = itemButton:FindFirstChild("Inside")
                                                if inside and inside:IsA("CanvasGroup") then
                                                    local title = inside:FindFirstChild("Title")
                                                    if title and title:IsA("TextLabel") then
                                                        local itemName = title.Text
                                                        if itemName == magicItemName then
                                                            magicItemId = itemButton.Name
                                                            break
                                                        end
                                                    end
                                                end
                                            end
                                        end
                                    end
                                end
                            end
                        end
                    end
                end

                if not magicItemId then
                    getgenv().AutoLevelMagicItemRunning = false
                    WindUI:Notify({
                        Title = "Lights Hub",
                        Content = "Unable to find Magic Item in your inventory. Auto Leveling Stopped.",
                        Duration = 3,
                    })
                    return
                end
                
                -- æ‰¾åˆ°äº†Magic Itemï¼Œå¼€å§‹æ¯0.1ç§’å‘é€å‡çº§è¯·æ±‚
                while getgenv().AutoLevelMagicItemRunning and task.wait(0.1) do
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Upgrade_Name"] = "Level",
                        ["UniqueId"] = magicItemId,
                        ["Action"] = "Prog_Lv_Items",
                        ["Bench_Name"] = "Magic_Items_Evolve",
                    })
                end    
            end)
        else
            getgenv().AutoLevelMagicItemRunning = false
        end
    end
})




local UpgradesTab = Window:Tab({
        Title = "Upgrades",
        Icon = "square-plus",
    })

local UpgradeOptions = {
    "Star Luck","Damage","Energy","Coins",
    "Drops","Avatar Souls Drop","Movement Speed","Fast Roll","Star Speed",
    "Critical Energy","Energy Critical Chance","Exp","Champions Inventory Slots",
    "Accessories Inventory Slots","Weapons Inventory Slots","Titans Inventory Slots","Stands Inventory Slots",
    "Jewelry Inventory Slots","Attack Range","Attack Range 2"
}

local upgradeMap = {
    ["Star Luck"] = {Upgrading_Name = "Star_Luck", Upgrade_Name = "Upgrades"},
    ["Damage"] = {Upgrading_Name = "Damage", Upgrade_Name = "Upgrades"},
    ["Energy"] = {Upgrading_Name = "Energy", Upgrade_Name = "Upgrades"},
    ["Coins"] = {Upgrading_Name = "Coins", Upgrade_Name = "Upgrades"},
    ["Drops"] = {Upgrading_Name = "Drops", Upgrade_Name = "Upgrades"},
    ["Avatar Souls Drop"] = {Upgrading_Name = "Avatar_Souls_Drop", Upgrade_Name = "Upgrades"},
    ["Movement Speed"] = {Upgrading_Name = "Movement_Speed", Upgrade_Name = "Upgrades"},
    ["Fast Roll"] = {Upgrading_Name = "Fast_Roll", Upgrade_Name = "Upgrades"},
    ["Star Speed"] = {Upgrading_Name = "Star_Speed", Upgrade_Name = "Upgrades"},
    ["Critical Energy"] = {Upgrading_Name = "Critical_Energy", Upgrade_Name = "Upgrades"},
    ["Energy Critical Chance"] = {Upgrading_Name = "Energy_Critical_Chance", Upgrade_Name = "Upgrades"},
    ["Exp"] = {Upgrading_Name = "Exp", Upgrade_Name = "Upgrades"},
    ["Champions Inventory Slots"] = {Upgrading_Name = "Champions_Inventory_Slots", Upgrade_Name = "Upgrades"},
    ["Accessories Inventory Slots"] = {Upgrading_Name = "Accessories_Inventory_Slots", Upgrade_Name = "Upgrades"},
    ["Weapons Inventory Slots"] = {Upgrading_Name = "Weapons_Inventory_Slots", Upgrade_Name = "Upgrades"},
    ["Titans Inventory Slots"] = {Upgrading_Name = "Titans_Inventory_Slots", Upgrade_Name = "Upgrades"},
    ["Stands Inventory Slots"] = {Upgrading_Name = "Stands_Inventory_Slots", Upgrade_Name = "Upgrades"},
    ["Jewelry Inventory Slots"] = {Upgrading_Name = "Jewelry_Inventory_Slots", Upgrade_Name = "Upgrades"},
    ["Attack Range"] = {Upgrading_Name = "Attack_Range", Upgrade_Name = "Attack_Range"},
    ["Attack Range 2"] = {Upgrading_Name = "Attack_Range", Upgrade_Name = "Attack_Range_2"},
}

local AutoUpgradeDropdown = UpgradesTab:Dropdown({
    Flag = "UpgradeSelect1",
    Title = "Select Upgrades",
    Values = UpgradeOptions,
    Value = {},
    Multi = true,
    Callback = function(option)
        getgenv().selectedUpgrades = option
    end,
})

-- å…¨å±€æŽ§åˆ¶å˜é‡
getgenv().AutoUpgradeRunning = false

local AutoUpgradesToggle = UpgradesTab:Toggle({
    Flag = "AutoUpgrades1",
    Title = "Auto Upgrades",
    Desc = "Automatically Upgrade Selected Dungeon Upgrades",
    Default = false,
    Callback = function(state)
        getgenv().AutoUpgradeRunning = state
        if state then
            -- å¯åŠ¨å¾ªçŽ¯ï¼šæ¯0.5ç§’å‘é€æ¯ä¸ªé€‰æ‹©çš„upgradeä¿¡å·
            task.spawn(function()
                while getgenv().AutoUpgradeRunning do
                    if getgenv().selectedUpgrades and #getgenv().selectedUpgrades > 0 then
                        for _, upgradeName in ipairs(getgenv().selectedUpgrades) do
                            local upgradeData = upgradeMap[upgradeName]
                            if upgradeData then
                                game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                    ["Upgrading_Name"] = upgradeData.Upgrading_Name,
                                    ["Action"] = "_Upgrades",
                                    ["Upgrade_Name"] = upgradeData.Upgrade_Name,
                                })
                            end
                        end
                    end
                    task.wait(0.5)  -- æ¯0.5ç§’å‘é€ä¸€æ¬¡æ‰€æœ‰é€‰æ‹©çš„upgrades
                end
            end)
        else
            -- Toggleå…³é—­æ—¶ï¼Œè®¾ç½®å…¨å±€å˜é‡ä¸ºfalseï¼Œå¾ªçŽ¯åœæ­¢
        end
    end,
})
UpgradesTab:Divider()
local AutoUpgradeAllToggle = UpgradesTab:Toggle({
    Flag = "AutoUpgradeAll1",
    Title = "Auto Upgrades ALL",
    Desc = "Automatically Upgrade ALL Dungeon Upgrades",
    Default = false,
    Callback = function(state)
        getgenv().AutoUpgradeAllRunning = state
        if state then
            -- å¯åŠ¨å¾ªçŽ¯ï¼šæ¯0.5ç§’å‘é€æ‰€æœ‰upgradeä¿¡å·
            task.spawn(function()
                while getgenv().AutoUpgradeAllRunning do
                    for _, upgradeName in ipairs(UpgradeOptions) do
                        local upgradeData = upgradeMap[upgradeName]
                        if upgradeData then
                            game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                ["Upgrading_Name"] = upgradeData.Upgrading_Name,
                                ["Action"] = "_Upgrades",
                                ["Upgrade_Name"] = upgradeData.Upgrade_Name,
                            })
                        end
                    end
                    task.wait(0.5)  -- æ¯0.5ç§’å‘é€ä¸€æ¬¡æ‰€æœ‰upgrades
                end
            end)
        else
            -- Toggleå…³é—­æ—¶ï¼Œè®¾ç½®å…¨å±€å˜é‡ä¸ºfalseï¼Œå¾ªçŽ¯åœæ­¢
        end
    end,
})

-------------------------------------------------
--ðŸŒ¾ Farm Tab
-------------------------------------------------
local mobNames = {}
local mobMap = {}
local selectedMobs = {}
local player = game.Players.LocalPlayer
local rootPart = player.Character:WaitForChild("HumanoidRootPart")

-- å…¨å±€æŽ§åˆ¶å˜é‡
getgenv().AutoFarmRunning = false
getgenv().FarmTargetChanged = false
getgenv().InDungeon = false
getgenv().InRaid = false
getgenv().AutoDungeonFarmRunning = false
getgenv().WasAutoFarmRunning = false

--Farm Tab
local FarmTab = Window:Tab({
        Title = "Farm",
        Icon = "sprout",
    })

-- âœ… Mob åˆ—è¡¨ Dropdown
local MobDropdown = FarmTab:Dropdown({
    Flag = "Dropdown1",
    Title = "Mobs List",
    Values = {"None"},
    Value = {"None"},
    Multi = true,
    AllowNone = true,
    Callback = function(option)
        selectedMobs = option or {}
        getgenv().FarmTargetChanged = true
    end,
})

-- âœ… åˆ·æ–°æŒ‰é’®
local MobRefreshButton = FarmTab:Button({
    Flag = "RefreshButton1",
    Title = "Refresh Mobs List",
    Callback = function()
        mobNames, mobMap, selectedMobs = {}, {}, {}
        local monstersFolder = workspace:FindFirstChild("Debris") and workspace.Debris:FindFirstChild("Monsters")

        if not monstersFolder then
            MobDropdown:Refresh({"None"})
            return
        end

        for _, mob in pairs(monstersFolder:GetChildren()) do
            if mob and mob:IsA("Model") then
                local mobsname = mob:GetAttribute("Title") or mob.Name
                local mobsrank = mob:GetAttribute("Rank")
                local mobsdisplayname = mobsrank and mobsrank ~= "" and string.format("[%s] %s", mobsrank, mobsname) or mobsname
                if not mobMap[mobsdisplayname] then
                    mobMap[mobsdisplayname] = {}
                    table.insert(mobNames, mobsdisplayname)
                end
                table.insert(mobMap[mobsdisplayname], mob)
            end
        end

        if #mobNames == 0 then
            MobDropdown:Refresh({"None"})
        else
            MobDropdown:Refresh(mobNames)
        end
    end,
})

-- âœ… æ™®é€š Auto Farm é€»è¾‘
local AutoFarmToggle = FarmTab:Toggle({
    Flag = "AutoFarm1",
    Title = "Auto Farm",
    Default = false,
    Callback = function(state)
        if state then
            getgenv().AutoFarmRunning = true
            getgenv().FarmTargetChanged = true
            getgenv().WasAutoFarmRunning = true
                
            task.spawn(function()
                while getgenv().AutoFarmRunning and not getgenv().InDungeon do
                    if getgenv().FarmTargetChanged then
                        getgenv().FarmTargetChanged = false
                    end

                    local char = player.Character
                    local hrp = char and char:FindFirstChild("HumanoidRootPart")
                    if not hrp then task.wait(1) continue end

                    local monstersFolder = workspace:FindFirstChild("Debris") and workspace.Debris:FindFirstChild("Monsters")
                    if monstersFolder then
                        mobMap = {}
                        for _, mob in pairs(monstersFolder:GetChildren()) do
                            if mob and mob:IsA("Model") then
                                local mobsname = mob:GetAttribute("Title") or mob.Name
                                local mobsrank = mob:GetAttribute("Rank")
                                local mobsdisplayname = mobsrank and mobsrank ~= "" and string.format("[%s] %s", mobsrank, mobsname) or mobsname
                                if not mobMap[mobsdisplayname] then
                                    mobMap[mobsdisplayname] = {}
                                end
                                table.insert(mobMap[mobsdisplayname], mob)
                            end
                        end
                    end

                    for _, mobName in ipairs(selectedMobs) do
                        if not getgenv().AutoFarmRunning or getgenv().FarmTargetChanged or getgenv().InDungeon then break end
                        local mobList = mobMap[mobName]
                        if mobList then
                            for _, mob in ipairs(mobList) do
                                if not getgenv().AutoFarmRunning or getgenv().FarmTargetChanged or getgenv().InDungeon then break end
                                local mobHRP = mob:FindFirstChild("HumanoidRootPart")
                                if mobHRP then
                                    hrp.CFrame = mobHRP.CFrame + Vector3.new(0, 0, 2)
                                    repeat task.wait(0.05) until not mob.Parent or not getgenv().AutoFarmRunning or getgenv().FarmTargetChanged or getgenv().InDungeon
                                end
                            end
                        end
                    end
                    task.wait(0.05)
                end
            end)
        else
            getgenv().AutoFarmRunning = false
            getgenv().FarmTargetChanged = true
            getgenv().WasAutoFarmRunning = false
        end
    end,
})

-------------------------------------------------
-- CONSTANTS / TABLES
-------------------------------------------------

-- Dungeon é€‰é¡¹
local DungeonOptions = {
    "Dungeon Easy","Dungeon Medium","Dungeon Hard","Dungeon Insane",
    "Dungeon Crazy","Dungeon Nightmare","Leaf Raid"
}

-- Raid / KeyDungeon / Defense é€‰é¡¹
local RaidOptions = {
    "Restaurant Raid","Cursed Raid","Progression Raid","Titan Defense",
    "Sin Raid","Kaiju Dungeon","Dragon Room Raid","Gleam Raid","Progression Raid 2",
    "Ghoul Raid","Chainsaw Defense","Netherworld Defense","Green Planet Raid",
    "Hollow Raid","One Hero Raid","Tomb Arena Raid","Halloween Raid","Graveyard Defense",
    "Dungeon Suffering","Dungeon Adventurer","Dungeon Torment","Maze Level 1","Maze Level 2","Maze Level 3","Maze Level 4","Maze Level 5","Maze Level 6","Dungeon Labyrinth","Crimson Canyon",
    "Body Improvement Challenge","Breathing Raid","Mugen Dungeon","Ice Raid","Santa Raid"

}

local SpeedRaids = {
    ["Cursed Raid"] = true,
    ["Progression Raid"] = true,
    ["Progression Raid 2"] = true,
    ["Restaurant Raid"] = true,
    ["Dungeon Labyrinth"] = true,
    ["Maze Level 1"] = true,
    ["Maze Level 2"] = true,
    ["Maze Level 3"] = true,
    ["Maze Level 4"] = true,
    ["Maze Level 5"] = true,
    ["Maze Level 6"] = true,
    ["One Hero Raid"] = true
}

local RaidSpeedOptions = {"1x Speed", "2x Speed", "3x Speed"}

-- éœ€è¦ Auto Farm çš„ Dungeon å’Œ Mazeï¼ˆæ¥è‡ª DungeonOptions å’Œ RaidOptionsï¼‰
local AutoFarmDungeons = {
    "Dungeon Easy", "Dungeon Medium", "Dungeon Hard", "Dungeon Insane", "Dungeon Crazy", "Dungeon Nightmare",
    "Kaiju Dungeon", "Dungeon Suffering", "Dungeon Adventurer", "Dungeon Torment", "Dungeon Labyrinth", "Crimson Canyon", "Maze Level 1", "Maze Level 2", "Maze Level 3", "Maze Level 4", "Maze Level 5", "Maze Level 6",
    "Body Improvement Challenge","Mugen Dungeon"

}

-- Dungeon åç§°æ˜ å°„åˆ°ä¿¡å·ä¸­çš„ Nameï¼ˆä¾‹å¦‚ Dungeon Easy -> Dungeon_Easyï¼‰
local DungeonNameMap = {
    ["Dungeon Easy"] = "Dungeon_Easy",
    ["Dungeon Medium"] = "Dungeon_Medium",
    ["Dungeon Hard"] = "Dungeon_Hard",
    ["Dungeon Insane"] = "Dungeon_Insane",
    ["Dungeon Crazy"] = "Dungeon_Crazy",
    ["Dungeon Nightmare"] = "Dungeon_Nightmare",
    ["Leaf Raid"] = "Leaf_Raid",
}

-- Raid åç§°æ˜ å°„åˆ°ä¿¡å·ä¸­çš„ Nameï¼ˆä¾‹å¦‚ Kaiju Dungeon -> Kaiju_Dungeonï¼‰
local RaidNameMap = {
    ["Restaurant Raid"] = "Restaurant_Raid",
    ["Cursed Raid"] = "Cursed_Raid",
    ["Progression Raid"] = "Progression_Raid",
    ["Titan Defense"] = "Titan_Defense",
    ["Sin Raid"] = "Sin_Raid",
    ["Kaiju Dungeon"] = "Kaiju_Dungeon",
    ["Dragon Room Raid"] = "Dragon_Room_Raid",
    ["Gleam Raid"] = "Gleam_Raid",
    ["Progression Raid 2"] = "Progression_Raid_2",
    ["Ghoul Raid"] = "Ghoul_Raid",
    ["Chainsaw Defense"] = "Chainsaw_Defense",
    ["Netherworld Defense"] = "Netherworld_Defense",
    ["Green Planet Raid"] = "Green_Planet_Raid",
    ["Hollow Raid"] = "Hollow_Raid",
    ["Tomb Arena Raid"] = "Tomb_Arena_Raid",
    ["Halloween Raid"] = "Halloween_Raid",
    ["Graveyard Defense"] = "Graveyard_Defense",
    ["Dungeon Suffering"] = "Dungeon_Suffering",
    ["Dungeon Adventurer"] = "Dungeon_Adventurer",
    ["Dungeon Torment"] = "Dungeon_Torment",
    ["Maze Level 1"] = "Maze_Level_1",
    ["Maze Level 2"] = "Maze_Level_2",
    ["Maze Level 3"] = "Maze_Level_3",
    ["Maze Level 4"] = "Maze_Level_4",
    ["Maze Level 5"] = "Maze_Level_5",
    ["Maze Level 6"] = "Maze_Level_6",
    ["Dungeon Labyrinth"] = "Dungeon_Labyrinth",
    ["Crimson Canyon"] = "Crimson_Canyon",
    ["One Hero Raid"] = "One_Hero_Raid",
    ["Body Improvement Challenge"] = "Body_Improvement_Challenge",
    ["Breathing Raid"] = "Breathing_Raid",
    ["Mugen Dungeon"] = "Mugen_Dungeon",
    ["Ice Raid"] = "Ice_Raid",
    ["Santa Raid"] = "Santa_Raid"

}

-------------------------------------------------
-- GLOBAL VARIABLES
-------------------------------------------------
-- Dungeon Auto Farm
getgenv().SelectedDungeons = {}
getgenv().AutoDungeonEnabled = false
getgenv().InDungeon = false
getgenv().AutoDungeonFarmRunning = false
getgenv().CurrentDungeonName = nil

-- Raid / KeyDungeon Auto Farm
getgenv().SelectedRaids = {}
getgenv().SelectedRaidSpeed = "1x Speed"
getgenv().AutoRaidEnabled = false
getgenv().InRaid = false
getgenv().AutoRaidFarmRunning = false
getgenv().IsCurrentKeyDungeon = false
getgenv().CurrentRaidIndex = 1  -- ç”¨äºŽå¾ªçŽ¯ Raid
getgenv().CurrentRaidName = nil
getgenv().IsEnteringRaid = false

-- æ™®é€š AutoFarm æš‚åœæ¢å¤æŽ§åˆ¶
getgenv().AutoFarmRunning = false
getgenv().WasAutoFarmRunning = false
getgenv().FarmTargetChanged = false

-- Auto Leave Raid At Wave
getgenv().AutoLeaveRaidOnWaveEnabled = false
getgenv().LeaveRaidWave = 0

-- å…¶ä»–å˜é‡
local player = game:GetService("Players").LocalPlayer
local Remote = game:GetService("ReplicatedStorage").Events.To_Client
local ToServer = game:GetService("ReplicatedStorage").Events.To_Server

-------------------------------------------------
-- FUNCTIONS
-------------------------------------------------

-- æ£€æŸ¥æ˜¯å¦æ˜¯éœ€è¦ Auto Farm çš„ Dungeon
local function IsAutoFarmDungeon(dungeonName)
    for _, name in ipairs(AutoFarmDungeons) do
        if name == dungeonName then
            return true
        end
    end
    return false
end

-- å¯åŠ¨ Dungeon Auto Farm
local function StartDungeonAutoFarm()
    if getgenv().AutoDungeonFarmRunning then return end
    getgenv().AutoDungeonFarmRunning = true
    task.wait(1)  -- è¿›å…¥raidåŽç­‰å¾…1ç§’
    local LeaveTimerStarted = false  -- é˜²æ­¢é‡å¤å¯åŠ¨ç¦»å¼€timer
    local LeaveTimer = nil  -- timerå¯¹è±¡

    -- æ·»åŠ äº‹ä»¶ç›‘å¬å™¨ï¼šå½“æ€ªç‰©æ·»åŠ æ—¶ï¼Œå¦‚æžœæ˜¯Is_Dungeonä¸”timerå­˜åœ¨ï¼Œç«‹å³å–æ¶ˆtimer
    local monstersFolder = workspace:FindFirstChild("Debris") and workspace.Debris:FindFirstChild("Monsters")
    if monstersFolder then
        monstersFolder.ChildAdded:Connect(function(child)
            if child:IsA("Model") and child:GetAttribute("Is_Dungeon") == true and LeaveTimer then
                task.cancel(LeaveTimer)
                LeaveTimer = nil
                LeaveTimerStarted = false
            end
        end)
    end

    task.spawn(function()
        while getgenv().AutoDungeonFarmRunning and getgenv().InDungeon do
            local char = player.Character
            local hrp = char and char:FindFirstChild("HumanoidRootPart")
            if not hrp then task.wait(0.2) continue end

            -- æ£€æµ‹é€»è¾‘ï¼šæ£€æŸ¥æ˜¯å¦æœ‰ ClassName = Model ä¸” Attributes: Is_Dungeon = true çš„æ€ªç‰©
            local hasMonsters = false
            if monstersFolder then
                for _, mob in pairs(monstersFolder:GetChildren()) do
                    if mob:IsA("Model") and mob:GetAttribute("Is_Dungeon") == true then
                        hasMonsters = true
                        break
                    end
                end
            end

            -- æ£€æŸ¥æ˜¯å¦æ˜¯ç‰¹å®šraidï¼ˆMaze Level 1,2,3, Dungeon Labyrinthï¼‰
            local isSpecificRaid = getgenv().CurrentRaidName and (getgenv().CurrentRaidName == "Maze Level 1" or getgenv().CurrentRaidName == "Maze Level 2" or getgenv().CurrentRaidName == "Maze Level 3" or getgenv().CurrentRaidName == "Dungeon Labyrinth" or getgenv().CurrentRaidName == "Maze Level 4" or getgenv().CurrentRaidName == "Maze Level 5" or getgenv().CurrentRaidName == "Maze Level 6")

            -- å¦‚æžœæœ‰æ€ªç‰©ä¸”timerå­˜åœ¨ï¼Œç«‹å³å–æ¶ˆtimerï¼ˆæ— è®ºå½“å‰åˆ†æ”¯ï¼‰
            if hasMonsters and LeaveTimer then
                task.cancel(LeaveTimer)
                LeaveTimer = nil
                LeaveTimerStarted = false
            end

            -- å¦‚æžœraidä¸­æœ‰æ€ªç‰©ï¼Œå…ˆæ¸…æŽ‰
            if hasMonsters then
                if monstersFolder then
                    for _, mob in pairs(monstersFolder:GetChildren()) do
                        if not getgenv().AutoDungeonFarmRunning or not getgenv().InDungeon then break end
                        if mob:IsA("Model") and mob:GetAttribute("Is_Dungeon") == true then
                            local mobHRP = mob:FindFirstChild("HumanoidRootPart")
                            if mobHRP then
                                hrp.CFrame = mobHRP.CFrame + Vector3.new(0, 0, 2)
                                repeat task.wait(0.05) until not mob.Parent or not getgenv().AutoDungeonFarmRunning or not getgenv().InDungeon
                            end
                        end
                    end
                end
            else
                -- å¦‚æžœæ²¡æœ‰æ€ªç‰©ï¼Œä¸”æ˜¯ç‰¹å®šraidï¼Œå¯åŠ¨ç¦»å¼€timerï¼ˆå¦‚æžœæœªå¯åŠ¨ï¼‰
                if isSpecificRaid and not LeaveTimerStarted then
                    LeaveTimerStarted = true
                    LeaveTimer = task.delay(10, function()
                        if not getgenv().AutoDungeonFarmRunning or not getgenv().InDungeon then return end
                        -- å†æ¬¡æ£€æŸ¥æ˜¯å¦æœ‰æ€ªç‰©ï¼ˆä»¥é˜²åœ¨timeræœŸé—´å‡ºçŽ°ï¼‰
                        local monstersFolder = workspace:FindFirstChild("Debris") and workspace.Debris:FindFirstChild("Monsters")
                        local hasMonsters = false
                        if monstersFolder then
                            for _, mob in pairs(monstersFolder:GetChildren()) do
                                if mob:IsA("Model") and mob:GetAttribute("Is_Dungeon") == true then
                                    hasMonsters = true
                                    break
                                end
                            end
                        end
                        if not hasMonsters then
                            game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                ["Action"] = "Dungeon_Leave",
                            })
                        end
                        LeaveTimerStarted = false
                        LeaveTimer = nil
                    end)
                end
                -- å¦‚æžœæ²¡æœ‰æ€ªç‰©ï¼Œæ£€æµ‹Doorå¹¶æŒ‰ä¼˜å…ˆçº§å¼€ï¼ˆMonster_Roomä¿å­˜å¹¶å¼€ -> Treasure_Room -> Merchant_Room -> End_Roomï¼‰
                pcall(function()
                    local openedDoor = false
                    -- å¾ªçŽ¯workspace.Dungeonsçš„æ‰€æœ‰raid
                    for _, dungeon in pairs(workspace.Dungeons:GetChildren()) do
                        if dungeon:IsA("Folder") and (dungeon.Name:find("Dungeon_Labyrinth") or dungeon.Name:find("Maze_Level_1") or dungeon.Name:find("Maze_Level_2") or dungeon.Name:find("Maze_Level_3") or dungeon.Name:find("Maze_Level_4") or dungeon.Name:find("Maze_Level_5") or dungeon.Name:find("Maze_Level_6")) then
                            -- ä¿å­˜Doorä½ç½®ï¼ŒæŒ‰ç±»åž‹åˆ†ç»„ï¼ˆraidç»“æŸåŽlocalå˜é‡æ¸…é™¤ï¼‰
                            local Monster_Room_Doors = {}
                            local Treasure_Room_Doors = {}
                            local Merchant_Room_Doors = {}
                            local End_Room_Doors = {}
                            for _, room in pairs(dungeon:GetChildren()) do
                                if room:IsA("Model") and room:FindFirstChild("Doors") then
                                    local doorsFolder = room:FindFirstChild("Doors")
                                    for _, door in pairs(doorsFolder:GetChildren()) do
                                        if door.Name == "ModelX" then
                                            local doorPart = door:FindFirstChild("Door")
                                            if doorPart and doorPart:IsA("BasePart") then
                                                local hasWall = false
                                                for _, child in pairs(door:GetChildren()) do
                                                    if child.ClassName == "Part" and child.Name == "Wall" then
                                                        hasWall = true
                                                        break
                                                    end
                                                end
                                                if not hasWall then
                                                    if room.Name:find("^Monsters_Room_") then
                                                        table.insert(Monster_Room_Doors, doorPart)
                                                    elseif room.Name:find("^Treasure_Room_") then
                                                        table.insert(Treasure_Room_Doors, doorPart)
                                                    elseif room.Name:find("^Merchant_Room_") then
                                                        table.insert(Merchant_Room_Doors, doorPart)
                                                    elseif room.Name:find("^End_Room_") then
                                                        table.insert(End_Room_Doors, doorPart)
                                                    end
                                                end
                                            end
                                        end
                                    end
                                end
                            end
                            -- å…ˆå¼€Monster_Roomçš„Doorï¼ˆä¿å­˜çš„ï¼‰ï¼Œå¼€ä¸€ä¸ªåŽç§»é™¤
                            for i = #Monster_Room_Doors, 1, -1 do
                                local doorPart = Monster_Room_Doors[i]
                                if doorPart and doorPart:IsA("BasePart") then
                                    -- ä¼ é€è¿‡åŽ»Doorçš„CFrameä½ç½®ï¼ˆæ›´è¿‘-5ç¡®ä¿Interactï¼‰
                                    local teleportPos = doorPart.Position + (doorPart.CFrame.LookVector * -5)
                                    hrp.CFrame = CFrame.new(teleportPos)
                                    -- è®¾ç½®è§’è‰²é¢å‘é—¨
                                    hrp.CFrame = CFrame.lookAt(hrp.Position, doorPart.Position)
                                    -- ä¼ é€åŽcaptureä½ç½®å¹¶è°ƒæ•´ç›¸æœºé¢å‘é—¨
                                    local capturedPosition = hrp.Position
                                    local cam = workspace.CurrentCamera
                                    repeat cam.CameraType = Enum.CameraType.Scriptable until cam.CameraType == Enum.CameraType.Scriptable
                                    cam.CFrame = CFrame.lookAt(capturedPosition, doorPart.Position)
                                    task.delay(1/60, function()
	                                cam.CameraType = Enum.CameraType.Custom
                                    end)
                                    task.wait(0.35)  -- ç­‰å¾…ä¼ é€å’Œè§†è§’è°ƒæ•´
                                    game:GetService("VirtualInputManager"):SendKeyEvent(true, Enum.KeyCode.E, false, game)
                                    task.wait(0.35)
                                    game:GetService("VirtualInputManager"):SendKeyEvent(false, Enum.KeyCode.E, false, game)
                                    task.wait(0.2)  -- ç­‰å¾…å¼€é—¨åŽç»§ç»­
                                    openedDoor = true
                                    -- å¼€é—¨åŽç§»é™¤è¿™ä¸ªDoor
                                    table.remove(Monster_Room_Doors, i)
                                    -- å¼€é—¨åŽæ¸…æ€ªç‰©
                                    local monstersFolder = workspace:FindFirstChild("Debris") and workspace.Debris:FindFirstChild("Monsters")
                                    local hasMonsters = false
                                    if monstersFolder then
                                        for _, mob in pairs(monstersFolder:GetChildren()) do
                                            if mob:IsA("Model") and mob:GetAttribute("Is_Dungeon") == true then
                                                hasMonsters = true
                                                break
                                            end
                                        end
                                    end
                                    if hasMonsters then
                                        if monstersFolder then
                                            for _, mob in pairs(monstersFolder:GetChildren()) do
                                                if not getgenv().AutoDungeonFarmRunning or not getgenv().InDungeon then break end
                                                if mob:IsA("Model") and mob:GetAttribute("Is_Dungeon") == true then
                                                    local mobHRP = mob:FindFirstChild("HumanoidRootPart")
                                                    if mobHRP then
                                                        hrp.CFrame = mobHRP.CFrame + Vector3.new(0, 0, 2)
                                                        repeat task.wait(0.05) until not mob.Parent or not getgenv().AutoDungeonFarmRunning or not getgenv().InDungeon
                                                    end
                                                end
                                            end
                                        end
                                    end
                                    break  -- å¼€ä¸€ä¸ªMonster_Room DooråŽåœæ­¢
                                end
                            end
                            -- ç„¶åŽå¼€ä¿å­˜çš„Doorï¼šTreasure -> Merchant -> End
                            local doorGroups = {Treasure_Room_Doors, Merchant_Room_Doors, End_Room_Doors}
                            for groupIndex, doorGroup in ipairs(doorGroups) do
                                for _, doorPart in ipairs(doorGroup) do
                                    -- ä¼ é€è¿‡åŽ»Doorçš„CFrameä½ç½®ï¼ˆæ›´è¿‘-5ç¡®ä¿Interactï¼‰
                                    local teleportPos = doorPart.Position + (doorPart.CFrame.LookVector * -5)
                                    hrp.CFrame = CFrame.new(teleportPos)
                                    -- è®¾ç½®è§’è‰²é¢å‘é—¨
                                    hrp.CFrame = CFrame.lookAt(hrp.Position, doorPart.Position)
                                    -- ä¼ é€åŽcaptureä½ç½®å¹¶è°ƒæ•´ç›¸æœºé¢å‘é—¨
                                    local capturedPosition = hrp.Position
                                    local cam = workspace.CurrentCamera
                                    repeat cam.CameraType = Enum.CameraType.Scriptable until cam.CameraType == Enum.CameraType.Scriptable
                                    cam.CFrame = CFrame.lookAt(capturedPosition, doorPart.Position)
                                    task.delay(1/60, function()
	                                cam.CameraType = Enum.CameraType.Custom
                                    end)
                                    task.wait(0.35)  -- ç­‰å¾…ä¼ é€å’Œè§†è§’è°ƒæ•´
                                    game:GetService("VirtualInputManager"):SendKeyEvent(true, Enum.KeyCode.E, false, game)
                                    task.wait(0.35)
                                    game:GetService("VirtualInputManager"):SendKeyEvent(false, Enum.KeyCode.E, false, game)
                                    task.wait(0.2)  -- ç­‰å¾…å¼€é—¨åŽç»§ç»­
                                    openedDoor = true
                                    -- å¼€é—¨åŽæ¸…æ€ªç‰©
                                    local monstersFolder = workspace:FindFirstChild("Debris") and workspace.Debris:FindFirstChild("Monsters")
                                    local hasMonsters = false
                                    if monstersFolder then
                                        for _, mob in pairs(monstersFolder:GetChildren()) do
                                            if mob:IsA("Model") and mob:GetAttribute("Is_Dungeon") == true then
                                                hasMonsters = true
                                                break
                                            end
                                        end
                                    end
                                    if hasMonsters then
                                        if monstersFolder then
                                            for _, mob in pairs(monstersFolder:GetChildren()) do
                                                if not getgenv().AutoDungeonFarmRunning or not getgenv().InDungeon then break end
                                                if mob:IsA("Model") and mob:GetAttribute("Is_Dungeon") == true then
                                                    local mobHRP = mob:FindFirstChild("HumanoidRootPart")
                                                    if mobHRP then
                                                        hrp.CFrame = mobHRP.CFrame + Vector3.new(0, 0, 2)
                                                        repeat task.wait(0.05) until not mob.Parent or not getgenv().AutoDungeonFarmRunning or not getgenv().InDungeon
                                                    end
                                                end
                                            end
                                        end
                                    end
                                end
                            end
                            if openedDoor then break end  -- å¦‚æžœå¼€äº†é—¨ï¼Œåœæ­¢æ£€æŸ¥å…¶ä»–raid
                        end
                    end
                end)
            end
            task.wait(0.1)  -- å‡å°‘ç­‰å¾…æ—¶é—´ä»¥æ›´å¿«æ£€æµ‹æ€ªç‰©
        end
    end)
end

-- åœæ­¢ Dungeon Auto Farm
local function StopDungeonAutoFarm()
    getgenv().AutoDungeonFarmRunning = false
end

-- å¯åŠ¨æ™®é€š Auto Farm
local function StartNormalAutoFarm()
    if getgenv().AutoFarmRunning then return end
    getgenv().AutoFarmRunning = true
    getgenv().FarmTargetChanged = true
    getgenv().WasAutoFarmRunning = true
    task.spawn(function()
        while getgenv().AutoFarmRunning and not getgenv().InDungeon do
            if getgenv().FarmTargetChanged then
                getgenv().FarmTargetChanged = false
            end

            local char = player.Character
            local hrp = char and char:FindFirstChild("HumanoidRootPart")
            if not hrp then task.wait(1) continue end

            local monstersFolder = workspace:FindFirstChild("Debris") and workspace.Debris:FindFirstChild("Monsters")
            if monstersFolder then
                mobMap = {}
                for _, mob in pairs(monstersFolder:GetChildren()) do
                    if mob and mob:IsA("Model") then
                        local mobsname = mob:GetAttribute("Title") or mob.Name
                        local mobsrank = mob:GetAttribute("Rank")
                        local mobsdisplayname = mobsrank and mobsrank ~= "" and string.format("[%s] %s", mobsrank, mobsname) or mobsname
                        if not mobMap[mobsdisplayname] then
                            mobMap[mobsdisplayname] = {}
                        end
                        table.insert(mobMap[mobsdisplayname], mob)
                    end
                end
            end

            for _, mobName in ipairs(selectedMobs) do
                if not getgenv().AutoFarmRunning or getgenv().FarmTargetChanged or getgenv().InDungeon then break end
                local mobList = mobMap[mobName]
                if mobList then
                    for _, mob in ipairs(mobList) do
                        if not getgenv().AutoFarmRunning or getgenv().FarmTargetChanged or getgenv().InDungeon then break end
                        local mobHRP = mob:FindFirstChild("HumanoidRootPart")
                        if mobHRP then
                            hrp.CFrame = mobHRP.CFrame + Vector3.new(0, 0, 2)
                            repeat task.wait(0.05) until not mob.Parent or not getgenv().AutoFarmRunning or getgenv().FarmTargetChanged or getgenv().InDungeon
                        end
                    end
                end
            end
            task.wait(0.05)
        end
    end)
end

-- åœæ­¢æ™®é€š Auto Farm
local function StopNormalAutoFarm()
    if getgenv().AutoFarmRunning then
        getgenv().AutoFarmRunning = false
        getgenv().WasAutoFarmRunning = true
        getgenv().FarmTargetChanged = true
    end
end

-- è¿›å…¥ Raid
local function EnterRaid(raidName)
    if getgenv().IsEnteringRaid then return end
    getgenv().IsEnteringRaid = true
    local name = RaidNameMap[raidName]
    if not name then getgenv().IsEnteringRaid = false return end

    local data = { ["Action"] = "_Enter_Dungeon", ["Name"] = name }

    if SpeedRaids[raidName] then
        data["Is_New"] = true
        if getgenv().SelectedRaidSpeed == "2x Speed" then
            data["Name"] = name .. "_x2"
        elseif getgenv().SelectedRaidSpeed == "3x Speed" then
            data["Name"] = name .. "_x3"
        end
    end

    getgenv().CurrentRaidName = raidName
    ToServer:FireServer(data)

    -- Timeout: å¦‚æžœ5ç§’åŽä»æ²¡æœ‰è¿›å…¥raidï¼Œé‡ç½®flag
    task.delay(5, function()
        if not getgenv().InRaid then
            getgenv().IsEnteringRaid = false
        end
    end)
end

-- å¾ªçŽ¯è¿›å…¥ä¸‹ä¸€ä¸ª Raid
local function EnterNextRaid()
    if #getgenv().SelectedRaids == 0 or getgenv().IsEnteringRaid then return end
    local raidName = getgenv().SelectedRaids[getgenv().CurrentRaidIndex]
    EnterRaid(raidName)
    getgenv().CurrentRaidIndex = getgenv().CurrentRaidIndex % #getgenv().SelectedRaids + 1
end

-- æ¢å¤æ™®é€š Auto Farm
local function ResumeAutoFarm()
    task.delay(5, function()
        if not getgenv().InDungeon and not getgenv().InRaid and getgenv().WasAutoFarmRunning then
            StartNormalAutoFarm()
        end
    end)
end

-------------------------------------------------
-- LISTENERS
-------------------------------------------------

-- æ·»åŠ å…¨å±€å˜é‡æ¥è·Ÿè¸ªæ‰‹åŠ¨è¿›å…¥çš„Raid
getgenv().InRaidManual = false

-- ç›‘å¬ Dungeon Opened ä¿¡å·ï¼ˆç”¨äºŽè‡ªåŠ¨è¿›å…¥ Dungeonï¼‰
Remote.OnClientEvent:Connect(function(data)
    if data.Action == "System_Message" and data.Text and data.Text.Type == "Dungeon_Message" then
        local text = data.Text.Text
        for dungeonName, signalName in pairs(DungeonNameMap) do
            if string.find(text, dungeonName) and getgenv().AutoDungeonEnabled and table.find(getgenv().SelectedDungeons, dungeonName) then
                StopNormalAutoFarm()  -- åœ¨è¿›å…¥ Dungeon ä¹‹å‰åœæ­¢æ™®é€š Auto Farm
                -- å‘é€è¿›å…¥ Dungeon çš„ä¿¡å·
                ToServer:FireServer({
                    ["Action"] = "_Enter_Dungeon",
                    ["Name"] = signalName,
                })
                getgenv().CurrentDungeonName = dungeonName
                getgenv().CurrentRaidName = nil  -- ç¡®ä¿æ¸…ç©ºRaidåç§°
                break
            end
        end
    elseif data.Action == "Dungeon" and data.Type == "Outlines" then
        if data.Players then
            -- è¿›å…¥ Dungeon/Raid
            getgenv().InDungeon = true
            
            -- æ£€æµ‹å½“å‰æ˜¯è¿›å…¥Raidè¿˜æ˜¯Dungeon
            if getgenv().CurrentRaidName then
                getgenv().InRaid = true
                getgenv().InRaidManual = false  -- æ¸…ç©ºæ‰‹åŠ¨æ ‡å¿—
                StopNormalAutoFarm()  -- è¿›å…¥ Raid åŽåœæ­¢æ™®é€š Auto Farm
            elseif getgenv().CurrentDungeonName then
                getgenv().InRaid = false
                getgenv().InRaidManual = false  -- æ¸…ç©ºæ‰‹åŠ¨æ ‡å¿—
            else
                -- æ‰‹åŠ¨è¿›å…¥çš„æƒ…å†µï¼Œæ ‡è®°ä¸ºæ‰‹åŠ¨Raid
                getgenv().InRaid = false
                getgenv().InRaidManual = true
            end
            
            local currentName = getgenv().CurrentDungeonName or getgenv().CurrentRaidName
            if currentName and IsAutoFarmDungeon(currentName) then
                StartDungeonAutoFarm()
            end
        else
            -- ç¦»å¼€ Dungeon/Raid
            local wasRaid = getgenv().InRaid or getgenv().InRaidManual
            local previousName = getgenv().CurrentDungeonName or getgenv().CurrentRaidName
            
            -- æ£€æŸ¥æ˜¯å¦æ˜¯ä»ŽRaidè¿›å…¥Dungeonçš„è½¬æ¢
            local isTransition = wasRaid and getgenv().CurrentDungeonName
            
            if isTransition then
                -- ä¿æŒ CurrentDungeonName ä¸å˜ï¼Œåªæ¸…é™¤Raidç›¸å…³çŠ¶æ€
                getgenv().InRaid = false
                getgenv().InRaidManual = false
                getgenv().CurrentRaidName = nil
            else
                -- æ­£å¸¸ç¦»å¼€ï¼Œæ¸…é™¤æ‰€æœ‰çŠ¶æ€
                getgenv().InDungeon = false
                getgenv().InRaid = false
                getgenv().InRaidManual = false
                getgenv().CurrentDungeonName = nil
                getgenv().CurrentRaidName = nil
                getgenv().IsEnteringRaid = false
                 
                StopDungeonAutoFarm()
                ResumeAutoFarm()
                
                if getgenv().AutoRaidEnabled then
                    EnterNextRaid()
                end
            end
        end
    elseif data.Action == "Message" and data.Type == "Normal" and data.Color == "Green" then
        -- æ–°å¢žï¼šå¤„ç† Wave Cleared æ¶ˆæ¯å¹¶è‡ªåŠ¨ç¦»å¼€ Raid
        local waveText = data.Text
        local waveNum = string.match(waveText, "Wave (%d+) Cleared!")
        if waveNum and tonumber(waveNum) == getgenv().LeaveRaidWave and getgenv().AutoLeaveRaidOnWaveEnabled and (getgenv().InRaid or getgenv().InRaidManual) then
            ToServer:FireServer({
                ["Action"] = "Dungeon_Leave",
            })
        end
    end
end)

-- å¾ªçŽ¯ Raid è¿›å…¥ï¼ˆå¦‚æžœå¯ç”¨ï¼‰
task.spawn(function()
    while true do
        if getgenv().AutoRaidEnabled and not getgenv().InRaid and not getgenv().InRaidManual and not getgenv().InDungeon and #getgenv().SelectedRaids > 0 and not getgenv().IsEnteringRaid then
            EnterNextRaid()
        end
        task.wait(1)  -- æ£€æŸ¥é—´éš”
    end
end)

-------------------------------------------------
-- UI: Dungeon Tab
-------------------------------------------------
local AutoDungeonTab = Window:Tab({
        Title = "Dungeon",
        Icon = "castle",
    })

local AutoDungeonDropdown = AutoDungeonTab:Dropdown({
    Flag = "DungeonSelect1",
    Title = "Select Dungeons",
    Values = DungeonOptions,
    Value = {"None"},
    Multi = true,
    AllowNone = true,
    Callback = function(option)
        getgenv().SelectedDungeons = option
    end,
})

local AutoDungeonToggle = AutoDungeonTab:Toggle({
    Flag = "AutoJoinDungeon1",
    Title = "Auto Join Dungeon + Auto Farm",
    Default = false,
    Callback = function(state)
        getgenv().AutoDungeonEnabled = state
    end,
})

-------------------------------------------------
-- UI: Raid / KeyDungeon / Defense Tab
-------------------------------------------------
local AutoRaidTab = Window:Tab({
        Title = "Raid",
        Icon = "skull",
    })

local AutoRaidDropdown = AutoRaidTab:Dropdown({
    Flag = "RaidSelect1",
    Title = "Select Raid",
    Values = RaidOptions,
    Value = {},
    Multi = true,
    AllowNone = true,
    Callback = function(option)
        getgenv().SelectedRaids = option
        getgenv().CurrentRaidIndex = 1
    end,
})

local AutoRaidSpeedDropdown = AutoRaidTab:Dropdown({
    Flag = "RaidSpeedSelect1",
    Title = "Raid Speed",
    Values = RaidSpeedOptions,
    Value = "1x Speed",
    Multi = false,
    Callback = function(option)
        getgenv().SelectedRaidSpeed = option
    end,
})

AutoRaidTab:Divider()

local AutoLeaveRaidOnWaveSlider = AutoRaidTab:Slider({
    Flag = "AutoLeaveRaidOnWaveSlider1",
    Title = "Leave Raid At Wave",
    Step = 5,
    Value = {
        Min = 0,
        Max = 995,
        Default = 0,
    },
    Callback = function(Value)
        getgenv().LeaveRaidWave = Value
    end,
})

local AutoLeaveRaidOnWaveToggle = AutoRaidTab:Toggle({
    Flag = "AutoLeaveRaidOnWaveToggle1",
    Title = "Enable Auto Leave Raid At Selected Wave",
    Default = false,
    Callback = function(state)
        getgenv().AutoLeaveRaidOnWaveEnabled = state
    end,
})

AutoRaidTab:Divider()

local AutoRaidToggle = AutoRaidTab:Toggle({
    Flag = "AutoJoinRaid1",
    Title = "Auto Join Raid + Auto Farm",
    Default = false,
    Callback = function(state)
        getgenv().AutoRaidEnabled = state
    end,
})






























































elseif game.PlaceId == 75992362647444 then




    
else
    warn("Not Supported This Game ! : " .. tostring(game.PlaceId))
end
