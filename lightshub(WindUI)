local WindUI = loadstring(game:HttpGet("https://github.com/Footagesus/WindUI/releases/latest/download/main.lua"))()
local Icons = loadstring(game:HttpGetAsync("https://raw.githubusercontent.com/Footagesus/Icons/main/Main.lua"))()
Icons.SetIconsType("lucide")

local Window = WindUI:CreateWindow({
    Title = "Lights Hub",
    Author = "by Ryo",
    Folder = "LightsHub",
    
    -- ‚Üì This all is Optional. You can remove it.
    Size = UDim2.fromOffset(580, 460),
    MinSize = Vector2.new(560, 350),
    MaxSize = Vector2.new(850, 560),
    Transparent = true,
    Theme = "Dark",
    Resizable = true,
    SideBarWidth = 200,
    BackgroundImageTransparency = 0.42,
    HideSearchBar = true,
    ScrollBarEnabled = false,
    ToggleKey = Enum.KeyCode.K,
})                                                                                                          

-- üß† ÂàùÂßãÂåñÂÖ®Â±ÄÂèòÈáè
getgenv().UserSetWalkSpeed = nil
getgenv().UserSetJumpPower = nil
getgenv().SpeedMonitorRunning = false

-- ‚úÖ ÊçïÊçâÂΩìÂâçËßíËâ≤ WalkSpeed / JumpPower
local player = game.Players.LocalPlayer

local function captureCurrentStats()
    local char = player.Character or player.CharacterAdded:Wait()
    local humanoid = char:WaitForChild("Humanoid")
    getgenv().CurrentWalkSpeed = humanoid.WalkSpeed
    getgenv().CurrentJumpPower = humanoid.JumpPower
end

-- ‚úÖ Áª¥ÊåÅËÆæÂÆöÁöÑÈÄüÂ∫¶‰∏éË∑≥Ë∑ÉÂäõ
task.spawn(function()
    getgenv().SpeedMonitorRunning = true
    while getgenv().SpeedMonitorRunning do
        pcall(function()
            local char = player.Character
            local humanoid = char and char:FindFirstChild("Humanoid")
            if humanoid then
                if getgenv().UserSetWalkSpeed and humanoid.WalkSpeed ~= getgenv().UserSetWalkSpeed then
                    humanoid.WalkSpeed = getgenv().UserSetWalkSpeed
                end
                if getgenv().UserSetJumpPower and humanoid.JumpPower ~= getgenv().UserSetJumpPower then
                    humanoid.JumpPower = getgenv().UserSetJumpPower
                end
            end
        end)
        task.wait(0.3)
    end
end)

--Main Tab
local MainTab = Window:Tab({
    Title = "About",
    Icon = "lightbulb",
}) 

MainTab:Section({
        Title = [[Lights Hub - Anime Eternal [Update 29]

This Script is still in development, so you may encounter bugs.
More function is coming very soon.
I appreciate you to use my script as I will continue improving the experience.

Discord Server: https://discord.gg/ryenf7d6C5]],
        TextSize = 18,
        TextTransparency = .35,
        FontWeight = Enum.FontWeight.Medium,
    })

local ConfigTab = Window:Tab({
    Title = "Config",
    Icon = "settings",
})

-- Á°Æ‰øù‰Ω†Â∑≤ÁªèÂàùÂßãÂåñ‰∫Ü ConfigManager
-- ‰æãÂ¶ÇÔºàÂÖ∑‰ΩìÁúãWindUIÊñáÊ°£/‰Ω†ÁöÑÁâàÊú¨Êö¥Èú≤ÊñπÂºèÔºâÔºö
-- local ConfigManager = WindUI.ConfigManager or getgenv().ConfigManager

local ConfigNameInput = ConfigTab:Input({
    Flag = "ConfigName",
    Title = "Config Name",
    Value = "Example Config",
    Type = "Input",
    Placeholder = "Enter name...",
})

local ConfigDropdown = ConfigTab:Dropdown({
    Flag = "Configs",
    Title = "Configs",
    Values = ConfigManager:AllConfigs(),
    Multi = false,
    AllowNone = true,
    Callback = function() end,
})

local CreateConfigButton = ConfigTab:Button({
    Flag = "CreateConfig",
    Title = "Create Config",
    Callback = function()
        local name = ConfigNameInput.Value
        if not name or name == "" then
            return
        end

        ConfigManager:CreateConfig(name):Save()
        ConfigDropdown:Refresh(ConfigManager:AllConfigs())
    end,
})

local LoadConfigButton = ConfigTab:Button({
    Flag = "LoadConfig",
    Title = "Load Config",
    Callback = function()
        local selected = ConfigDropdown.Value
        if not selected or selected == "" then
            return
        end

        ConfigManager:CreateConfig(selected):Load()
    end,
})

local RefreshConfigButton = ConfigTab:Button({
    Title = "Refresh Config List",
    Desc = "Refresh the list of saved configs",
    Callback = function()
        ConfigDropdown:Refresh(ConfigManager:AllConfigs())
    end,
})


local PlayerTab = Window:Tab({
    Title = "Player",
    Icon = "user",
})
-------------------------------------------------
-- Áé©ÂÆ∂ËÆæÂÆöÔºàWalkSpeed„ÄÅJumpÔºâ
-------------------------------------------------
PlayerTab:Slider({
    Flag = "Slider1",
    Title = "Walk Speed",
    Desc = "Adjust Your Walk Speed",
    Step = 1,
    Value = {
        Min = 30,
        Max = 150,
        Default = getgenv().CurrentWalkSpeed or 35,
    },
    Callback = function(Value)
        local char = player.Character
        local humanoid = char and char:FindFirstChild("Humanoid")
        if humanoid then
            humanoid.WalkSpeed = Value
            getgenv().UserSetWalkSpeed = Value
        end
    end,
})

PlayerTab:Slider({
    Flag = "Slider2",
    Title = "Jump Height",
    Desc = "Adjust Your Jump Height",
    Step = 1,
    Value = {
        Min = 50,
        Max = 200,
        Default = getgenv().CurrentJumpPower or 50,
    },
    Callback = function(Value)
        local char = player.Character
        local humanoid = char and char:FindFirstChild("Humanoid")
        if humanoid then
            humanoid.JumpPower = Value
            getgenv().UserSetJumpPower = Value
        end
    end,
})

PlayerTab:Divider()


local AttackRangeOptions = {"Low Range", "Medium Range", "High Range"}

local rangeValues = {
    ["Low Range"] = 50,
    ["Medium Range"] = 60,
    ["High Range"] = 70,
}

local FastKillAuraDropdown = PlayerTab:Dropdown({
    Flag = "KillAuraRange",
    Title = "Attack Range",
    Values = AttackRangeOptions,
    Value = "Low Range",
    Multi = false,
    Callback = function(option)
        getgenv().SelectedAttackRange = option
    end,
})

local FastKillAuraToggle = PlayerTab:Toggle({
    Flag = "FastKillAura1",
    Title = "Fast Kill Aura",
    Desc = "Very Fast Auto Click + More Attack Range",
    Value = false,
    Callback = function(state)
        getgenv().FastKillAuraRunning = state
        getgenv().CurrentTargetMob = nil  -- ÂàùÂßãÂåñÂΩìÂâçÁõÆÊ†áÊÄ™Áâ©
        if state then
            -- ÂêØÂä®Âæ™ÁéØÔºöÊØè0.01ÁßíÂèëÈÄÅÁÇπÂáª‰∫ã‰ª∂
            task.spawn(function()
                while getgenv().FastKillAuraRunning do
                    pcall(function()
                        local player = game.Players.LocalPlayer
                        local char = player.Character
                        local hrp = char and char:FindFirstChild("HumanoidRootPart")
                        if not hrp then 
                            task.wait(0.01)
                            return 
                        end
                        local playerPos = hrp.Position
                        
                        local rangeNum = rangeValues[getgenv().SelectedAttackRange] or 50
                        
                        local monstersFolder = workspace:FindFirstChild("Debris") and workspace.Debris:FindFirstChild("Monsters")
                        local mobsInRange = {}  -- Â≠òÂÇ®Âú®ËåÉÂõ¥ÂÜÖÁöÑÊÄ™Áâ©
                        
                        if monstersFolder then
                            -- ÈÅçÂéÜMonsters‰∏≠ÁöÑModel
                            for _, mob in pairs(monstersFolder:GetChildren()) do
                                if mob and mob:IsA("Model") then
                                    local mobHRP = mob:FindFirstChild("HumanoidRootPart")
                                    if mobHRP then
                                        local mobPos = mobHRP.Position
                                        local distance = (playerPos - mobPos).Magnitude
                                        if distance <= rangeNum then
                                            table.insert(mobsInRange, mob)  -- Ê∑ªÂä†ÊÄ™Áâ©ÂØπË±°
                                        end
                                    end
                                end
                            end
                        end
                        
                        -- Ê£ÄÊü•ÂΩìÂâçÁõÆÊ†áÊÄ™Áâ©ÊòØÂê¶ËøòÂ≠òÂú®‰∏îÂú®ËåÉÂõ¥ÂÜÖ
                        local targetMob = getgenv().CurrentTargetMob
                        if targetMob and targetMob.Parent and targetMob:FindFirstChild("HumanoidRootPart") then
                            -- Ê£ÄÊü•ÁõÆÊ†áÊòØÂê¶‰ªçÂú®ËåÉÂõ¥ÂÜÖ
                            local mobHRP = targetMob:FindFirstChild("HumanoidRootPart")
                            local mobPos = mobHRP.Position
                            local distance = (playerPos - mobPos).Magnitude
                            if distance <= rangeNum then
                                -- ÂΩìÂâçÁõÆÊ†áËøòÊ¥ªÁùÄ‰∏îÂú®ËåÉÂõ¥ÂÜÖÔºåÁªßÁª≠ÂèëÈÄÅÂÆÉÁöÑId
                                local mobId = targetMob.Name
                                game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                    ["Action"] = "_Mouse_Click",
                                    ["Id"] = mobId,
                                })
                            else
                                -- ÁõÆÊ†á‰∏çÂú®ËåÉÂõ¥ÂÜÖÔºåÈáçÁΩÆÂπ∂ÈÄâÊã©‰∏ã‰∏Ä‰∏™
                                getgenv().CurrentTargetMob = nil
                            end
                        else
                            -- ÂΩìÂâçÁõÆÊ†áÊ≠ª‰∫ÜÊàñ‰∏çÂ≠òÂú®ÔºåÈÄâÊã©‰∏ã‰∏Ä‰∏™
                            if #mobsInRange > 0 then
                                getgenv().CurrentTargetMob = mobsInRange[1]  -- ÈÄâÊã©Á¨¨‰∏Ä‰∏™
                                local mobId = getgenv().CurrentTargetMob.Name
                                game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                    ["Action"] = "_Mouse_Click",
                                    ["Id"] = mobId,
                                })
                            else
                                -- Ê≤°ÊúâÊÄ™Áâ©ÔºåÂèëÈÄÅÊôÆÈÄöÁÇπÂáª
                                game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                    ["Action"] = "_Mouse_Click",
                                })
                                getgenv().CurrentTargetMob = nil  -- ÈáçÁΩÆÁõÆÊ†á
                            end
                        end
                    end)
                    task.wait(0.01)
                end
            end)
        end
    end,
})

PlayerTab:Divider()

-------------------------------------------------
-- üõ°Ô∏è Anti AFK
-------------------------------------------------

local bb = game:service'VirtualUser'
local afkConnection

PlayerTab:Toggle({
    Flag = "Toggle1",
    Title = "Anti AFK",
    Desc = "Prevents you from being kicked for being AFK",
    Value = false,
    Callback = function(state)
        if state then
            game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                ["Value"] = false,
                ["Path"] = {"Settings", "AFK_MODE"},
                ["Action"] = "Settings",
            })
            afkConnection = player.Idled:Connect(function()
                bb:CaptureController()
                bb:ClickButton2(Vector2.new())
                wait(2)
            end)
        else
            if afkConnection then
                afkConnection:Disconnect()
                afkConnection = nil
            end
        end
    end,
})

-------------------------------------------------
-- üõë Anti Public ServerÔºàÂäüËÉΩÂÆåÊï¥Êï¥ÂêàÔºâ
-------------------------------------------------

getgenv().AntiPublicEnabled = false
getgenv().AntiPublicWhitelist = {}

--‚ú® Â∞ÜËæìÂÖ•Ê°ÜÂÜÖÂÆπ ‚Üí Ë°®ËΩ¨Êç¢
local function updateWhitelist(text)
    local list = {}
    for name in string.gmatch(text, "([^,%s]+)") do
        table.insert(list, name)
    end
    getgenv().AntiPublicWhitelist = list
end

--‚ú® ‰∏ªÂäüËÉΩÔºöÊ£ÄÊµãÊòØÂê¶Ë¶Å kick Ëá™Â∑±
local function checkServerPlayers()
    while getgenv().AntiPublicEnabled do
        task.wait(3)

        if not getgenv().AntiPublicEnabled then break end

        local Players = game:GetService("Players")
        local others = {}
        local whitelistFound = false

        for _, p in ipairs(Players:GetPlayers()) do
            if p ~= player then
                local name = p.Name

                -- Ê£ÄÊü•ÊòØ‰∏çÊòØ whitelist ‰∫∫
                local isWhitelisted = table.find(getgenv().AntiPublicWhitelist, name) ~= nil

                if isWhitelisted then
                    whitelistFound = true
                else
                    table.insert(others, name)
                end
            end
        end

        -- üü¢ Â¶ÇÊûú whitelist ÈáåÈù¢ÁöÑ‰∫∫Âú®Ôºå‰ΩÜÊ≤°ÊúâÂÖ∂‰ªñ‰∫∫ ‚Üí ‰∏ç kick
        if whitelistFound and #others == 0 then
            continue
        end

        -- ‚ùå ÊúâÈôåÁîüÁé©ÂÆ∂Ôºàothers > 0Ôºâ‚Üí Kick
        if #others > 0 then
            local reason = "Anti Public Server: Detected Non-Whitelist Player(s): " .. table.concat(others, ", ")
            player:Kick(reason)
            break
        end
    end
end

--üü¢ Anti Public Server Toggle
PlayerTab:Toggle({
    Flag = "Toggle2",
    Title = "Anti Public Server",
    Desc = "Automatically kicks you from public servers when non-whitelisted players are detected.",
    Value = false,
    Callback = function(state)
        getgenv().AntiPublicEnabled = state

        if state then
            task.spawn(checkServerPlayers)
        end
    end,
})

--üìù Whitelist ËæìÂÖ•Ê°Ü
PlayerTab:Input({
    Flag = "Input1",
    Title = "Whitelist Player",
    Desc = "Enter player username (Not Display Name) separated by commas to whitelist them.",
    Value = "",
    Type = "Textarea",
    Placeholder = "User1, User2, User3",
    Callback = function(input)
        updateWhitelist(input)
    end,
})


local RankingTab = Window:Tab({
        Title = "Ranking",
        Icon = "chart-line",
    })

-- ‚úÖ Auto Rank Up
RankingTab:Toggle({
    Flag = "RankUp1",
    Title = "Auto Rank Up",
    Desc = "Automatically rank up",
    Default = false,
    Callback = function(state)
        if state then
            getgenv().AutoRankUpRunning = true
            task.spawn(function()
                while getgenv().AutoRankUpRunning do
                    pcall(function()
                        game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                            ["Upgrading_Name"] = "Rank",
                            ["Action"] = "_Upgrades",
                            ["Upgrade_Name"] = "Rank_Up",
                        })
                    end)
                    task.wait(10)
                end
            end)
        else
            getgenv().AutoRankUpRunning = false
        end
    end,
})

--Auto Prestige
RankingTab:Toggle({
    Flag = "AutoPrestige1",
    Title = "Auto Prestige",
    Desc = "Automatically prestige levels",
    Default = false,
    Callback = function(state)
        if state then
            getgenv().AutoPrestigeRunning = true
            task.spawn(function()
                while getgenv().AutoPrestigeRunning do
                    pcall(function()
                        -- ‚úÖ Ëá™Âä®ÂçáÁ∫ßÂ£∞Êúõ
                        game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Action"] = "Level_Up_Prestige",
                        })
                    end)

                    task.wait(5)
                end
            end)
        else
            getgenv().AutoPrestigeRunning = false
        end
    end,
})

local CodesTab = Window:Tab({
        Title = "Codes",
        Icon = "ticket",
    })

-- ‚úÖ Redeem Codes Button
CodesTab:Button({
    Flag = "RedeemCodes1",
    Title = "Redeem All Codes",
    Desc = "Redeem all codes automatically.",
    Locked = false,
    Callback = function()
    local codes = {"SlashX", "Derp", "Heyyyo", 
    "Update27P2", "765KFav", "770KFav", "Update27P2Code", "255MVisits", "NothanksgivingCode2",
    "Update28", "Update28Code", "775KFav", "260MVisits", "Update28Code2",
    "Update28P2", "Update28P2Code", "405KLikes", "265MVisits", "Update28P2Code2",
    "Update28P3","Update28P2Code","Update28P2Code2","Update28P2Code3","780KFav","Update28P3Code","Update28P3Code2",
    "Update29","Update29Code","270MVisits","Update29Code2","Update29Code3","ChristmasSoon?!","Update29RestartCode"

}
    for _, code in ipairs(codes) do
         game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
            ["Action"] = "_Redeem_Code", 
			["Text"] = code,
         })
                task.wait(0.20)
            end
   end,
})

-------------------------------------------------
local CollectTab = Window:Tab({
        Title = "Collect",
        Icon = "gift",
    })

--Auto Collect Hourly and Daily Rewards
CollectTab:Toggle({
    Flag = "HourlyDailyRewards1",
    Title = "Auto Collect Hourly and Daily Rewards",
    Desc = "Automatically collect hourly and daily rewards",
    Default = false,
    Callback = function(state)
        if state then
            getgenv().HourlyDailyRewardsRunning = true
            task.spawn(function()
                while getgenv().HourlyDailyRewardsRunning do
                    pcall(function()
                        -- ‚úÖ Ëá™Âä®È¢ÜÂèñÊØèÂ∞èÊó∂Â•ñÂä±
                        game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                            ["Value"] = true,
                            ["Path"] = {
                                [1] = "Settings",
                                [2] = "Auto_Hourly_Rewards",
                            },
                            ["Action"] = "Settings",
                        })

                        -- ‚úÖ Ëá™Âä®È¢ÜÂèñÊØèÊó•Â•ñÂä±
                        game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                            ["Value"] = true,
                            ["Path"] = {
                                [1] = "Settings",
                                [2] = "Auto_Daily_Rewards",
                            },
                            ["Action"] = "Settings",
                        })
                    end)

                    -- ÊØè 5 ÂàÜÈíüÊ£ÄÊü•‰∏ÄÊ¨°Ôºà300 ÁßíÔºâ
                    task.wait(5)
                end
            end)
        else
            getgenv().HourlyDailyRewardsRunning = false
        end
    end,
})

CollectTab:Divider()

--Auto Claim Group Chest
CollectTab:Toggle({
    Flag = "ClaimGroupChest1",
    Title = "Auto Claim Group Chest",
    Desc = "Automatically claim group chest",
    Default = false,
    Callback = function(state)
        if state then
            getgenv().ClaimGroupChestRunning = true
            task.spawn(function()
                while getgenv().ClaimGroupChestRunning do
                    pcall(function()
                        -- ‚úÖ Ëá™Âä®ÂçáÁ∫ßÂ£∞Êúõ
                        game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Action"] = "_Chest_Claim",
                        ["Name"] = "Group",
                        })
                    end)

                    task.wait(60)
                end
            end)
        else
            getgenv().ClaimGroupChestRunning = false
        end
    end,
})

--Auto Claim Premium Chest
CollectTab:Toggle({
    Flag = "ClaimPremiumChest1",
    Title = "Auto Claim Premium Chest",
    Desc = "Automatically claim premium chest",
    Default = false,
    Callback = function(state)
        if state then
            getgenv().ClaimPremiumChestRunning = true
            task.spawn(function()
                while getgenv().ClaimPremiumChestRunning do
                    pcall(function()
                        -- ‚úÖ Ëá™Âä®ÂçáÁ∫ßÂ£∞Êúõ
                        game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Action"] = "_Chest_Claim",
                        ["Name"] = "Premium",
                        })
                    end)

                    task.wait(60)
                end
            end)
        else
            getgenv().ClaimPremiumChestRunning = false
        end
    end,
})

--Auto Claim VIP Chest
CollectTab:Toggle({
    Flag = "ClaimVIPChest1",
    Title = "Auto Claim VIP Chest",
    Desc = "Automatically claim VIP chest",
    Default = false,
    Callback = function(state)
        if state then
            getgenv().ClaimVIPChestRunning = true
            task.spawn(function()
                while getgenv().ClaimVIPChestRunning do
                    pcall(function()
                        -- ‚úÖ Ëá™Âä®ÂçáÁ∫ßÂ£∞Êúõ
                        game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Action"] = "_Chest_Claim",
                        ["Name"] = "Vip",
                        })
                    end)

                    task.wait(60)
                end
            end)
        else
            getgenv().ClaimVIPChestRunning = false
        end
    end,
})

--Auto Claim Daily Chest
CollectTab:Toggle({
    Name = "Auto Claim Daily Chest",
    Title = "Auto Claim Daily Chest",
    Desc = "Automatically claim daily chest",
    Default = false,
    Callback = function(state)
        if state then
            getgenv().ClaimDailyChestRunning = true
            task.spawn(function()
                while getgenv().ClaimDailyChestRunning do
                    pcall(function()
                        game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Action"] = "_Chest_Claim",
                        ["Name"] = "Daily",
                        })
                    end)

                    task.wait(60)
                end
            end)
        else
            getgenv().ClaimDailyChestRunning = false
        end
    end,
})


local ExchangeTab = Window:Tab({
        Title = "Exchange",
        Icon = "repeat",
    })

getgenv().AutoExchangeW1Running = false
getgenv().AutoExchangeW2Running = false
getgenv().AutoExchangeCoinsRunning = false
getgenv().AutoExchangeMaterialsRunning = false

local ExchangeW1Options = {
    "Green Upgrade Token","Dragon Race Token","Saiyan Token","Sword Token","Pirate Crew Token","Demon Fruit Token","Haki Token","Reiatsu Token","Zanpakuto Token","Pressure Token","Cursed Token","Cursed Finger","Breathing Token","Demon Arts Token",
    "Hunter Rank Token","ReAwakening Token","Monarch Token","Grimoire Token","Water Spirit Token","Wind Spirit Token","Fire Spirit Token","Chakra Token","Eye Token","Orange Upgrade Token","Granny Token","Gold Ball Token","Lucky Spirit Token","Energy TCG Token","Damage TCG Token","Ten Token","Greedy Token",
    "Families Token","Titan Token","Spinal Fluid Token","Sins Token","Commandments Token","Fortitude Token","Kaiju Token","Kaiju Energy Token","Ultimate Skill Token","Species Token","Demon Energy Token","Demon Damage Token","Demon Luck Token","Demon Coins Token","Energy Rune Token","Weapon Rune Token","Swordsman Energy Token","Swordsman Damage Token","Sin Upgrade Token",
    "Stand Token","Ripple Token","Onomatopoeia Token","Requiem Token","CCG Token","Kagune Token","Kakuhou Token","Debiru Token","Akuma Token","Akuma Damange Token","Flesh Token","Akuma Energy Token","Pokita Token","Mushi Token","Infernal Token","Flare Token","Ignition Token","Hellfire Token","Adolla Token","Fire Company Token","Adolla Blessing Token"
}

local ExchangeW1Map = {
    --W1 TO W5
    ["Green Upgrade Token"] = {Product_Id = "1", Bench_Name = "Token_Exchange_World_1_to_5"},
    ["Dragon Race Token"] = {Product_Id = "2", Bench_Name = "Token_Exchange_World_1_to_5"},
    ["Saiyan Token"] = {Product_Id = "3", Bench_Name = "Token_Exchange_World_1_to_5"},
    ["Sword Token"] = {Product_Id = "4", Bench_Name = "Token_Exchange_World_1_to_5"},
    ["Pirate Crew Token"] = {Product_Id = "5", Bench_Name = "Token_Exchange_World_1_to_5"},
    ["Demon Fruit Token"] = {Product_Id = "6", Bench_Name = "Token_Exchange_World_1_to_5"},
    ["Haki Token"] = {Product_Id = "7", Bench_Name = "Token_Exchange_World_1_to_5"},
    ["Reiatsu Token"] = {Product_Id = "8", Bench_Name = "Token_Exchange_World_1_to_5"},
    ["Zanpakuto Token"] = {Product_Id = "9", Bench_Name = "Token_Exchange_World_1_to_5"},
    ["Pressure Token"] = {Product_Id = "10", Bench_Name = "Token_Exchange_World_1_to_5"},
    ["Cursed Token"] = {Product_Id = "11", Bench_Name = "Token_Exchange_World_1_to_5"},
    ["Cursed Finger"] = {Product_Id = "12", Bench_Name = "Token_Exchange_World_1_to_5"},
    ["Breathing Token"] = {Product_Id = "13", Bench_Name = "Token_Exchange_World_1_to_5"},
    ["Demon Arts Token"] = {Product_Id = "14", Bench_Name = "Token_Exchange_World_1_to_5"},

    --W6 TO W10
    ["Hunter Rank Token"] = {Product_Id = "1", Bench_Name = "Token_Exchange_World_6_to_10"},
    ["ReAwakening Token"] = {Product_Id = "2", Bench_Name = "Token_Exchange_World_6_to_10"},
    ["Monarch Token"] = {Product_Id = "3", Bench_Name = "Token_Exchange_World_6_to_10"},
    ["Grimoire Token"] = {Product_Id = "4", Bench_Name = "Token_Exchange_World_6_to_10"},
    ["Water Spirit Token"] = {Product_Id = "5", Bench_Name = "Token_Exchange_World_6_to_10"},
    ["Wind Spirit Token"] = {Product_Id = "6", Bench_Name = "Token_Exchange_World_6_to_10"},
    ["Fire Spirit Token"] = {Product_Id = "7", Bench_Name = "Token_Exchange_World_6_to_10"},
    ["Chakra Token"] = {Product_Id = "8", Bench_Name = "Token_Exchange_World_6_to_10"},
    ["Eye Token"] = {Product_Id = "9", Bench_Name = "Token_Exchange_World_6_to_10"},
    ["Orange Upgrade Token"] = {Product_Id = "10", Bench_Name = "Token_Exchange_World_6_to_10"},
    ["Granny Token"] = {Product_Id = "11", Bench_Name = "Token_Exchange_World_6_to_10"},
    ["Gold Ball Token"] = {Product_Id = "12", Bench_Name = "Token_Exchange_World_6_to_10"},
    ["Lucky Spirit Token"] = {Product_Id = "13", Bench_Name = "Token_Exchange_World_6_to_10"},
    ["Energy TCG Token"] = {Product_Id = "14", Bench_Name = "Token_Exchange_World_6_to_10"},
    ["Damage TCG Token"] = {Product_Id = "15", Bench_Name = "Token_Exchange_World_6_to_10"},
    ["Ten Token"] = {Product_Id = "16", Bench_Name = "Token_Exchange_World_6_to_10"},
    ["Greedy Token"] = {Product_Id = "17", Bench_Name = "Token_Exchange_World_6_to_10"},

    --W11 TO W15
    ["Families Token"] = {Product_Id = "1", Bench_Name = "Token_Exchange_World_11_to_15"},
    ["Titan Token"] = {Product_Id = "2", Bench_Name = "Token_Exchange_World_11_to_15"},
    ["Spinal Fluid Token"] = {Product_Id = "3", Bench_Name = "Token_Exchange_World_11_to_15"},
    ["Sins Token"] = {Product_Id = "4", Bench_Name = "Token_Exchange_World_11_to_15"},
    ["Commandments Token"] = {Product_Id = "5", Bench_Name = "Token_Exchange_World_11_to_15"},
    ["Fortitude Token"] = {Product_Id = "6", Bench_Name = "Token_Exchange_World_11_to_15"},
    ["Kaiju Token"] = {Product_Id = "7", Bench_Name = "Token_Exchange_World_11_to_15"},
    ["Kaiju Energy Token"] = {Product_Id = "8", Bench_Name = "Token_Exchange_World_11_to_15"},
    ["Ultimate Skill Token"] = {Product_Id = "9", Bench_Name = "Token_Exchange_World_11_to_15"},
    ["Species Token"] = {Product_Id = "10", Bench_Name = "Token_Exchange_World_11_to_15"},
    ["Demon Energy Token"] = {Product_Id = "11", Bench_Name = "Token_Exchange_World_11_to_15"},
    ["Demon Damage Token"] = {Product_Id = "12", Bench_Name = "Token_Exchange_World_11_to_15"},
    ["Demon Luck Token"] = {Product_Id = "13", Bench_Name = "Token_Exchange_World_11_to_15"},
    ["Demon Coins Token"] = {Product_Id = "14", Bench_Name = "Token_Exchange_World_11_to_15"},
    ["Energy Rune Token"] = {Product_Id = "15", Bench_Name = "Token_Exchange_World_11_to_15"},
    ["Weapon Rune Token"] = {Product_Id = "16", Bench_Name = "Token_Exchange_World_11_to_15"},
    ["Swordsman Energy Token"] = {Product_Id = "17", Bench_Name = "Token_Exchange_World_11_to_15"},
    ["Swordsman Damage Token"] = {Product_Id = "18", Bench_Name = "Token_Exchange_World_11_to_15"},
    ["Sin Upgrade Token"] = {Product_Id = "19", Bench_Name = "Token_Exchange_World_11_to_15"},

    --W16 TO W19
    ["Stand Token"] = {Product_Id = "1", Bench_Name = "Token_Exchange_World_16_to_19"},
    ["Ripple Token"] = {Product_Id = "2", Bench_Name = "Token_Exchange_World_16_to_19"},
    ["Onomatopoeia Token"] = {Product_Id = "3", Bench_Name = "Token_Exchange_World_16_to_19"},
    ["Requiem Token"] = {Product_Id = "4", Bench_Name = "Token_Exchange_World_16_to_19"},
    ["CCG Token"] = {Product_Id = "5", Bench_Name = "Token_Exchange_World_16_to_19"},
    ["Kagune Token"] = {Product_Id = "6", Bench_Name = "Token_Exchange_World_16_to_19"},
    ["Kakuhou Token"] = {Product_Id = "7", Bench_Name = "Token_Exchange_World_16_to_19"},
    ["Debiru Token"] = {Product_Id = "8", Bench_Name = "Token_Exchange_World_16_to_19"},
    ["Akuma Token"] = {Product_Id = "9", Bench_Name = "Token_Exchange_World_16_to_19"},
    ["Akuma Damange Token"] = {Product_Id = "10", Bench_Name = "Token_Exchange_World_16_to_19"},
    ["Flesh Token"] = {Product_Id = "11", Bench_Name = "Token_Exchange_World_16_to_19"},
    ["Akuma Energy Token"] = {Product_Id = "12", Bench_Name = "Token_Exchange_World_16_to_19"},
    ["Pokita Token"] = {Product_Id = "13", Bench_Name = "Token_Exchange_World_16_to_19"},
    ["Mushi Token"] = {Product_Id = "14", Bench_Name = "Token_Exchange_World_16_to_19"},
    ["Infernal Token"] = {Product_Id = "15", Bench_Name = "Token_Exchange_World_16_to_19"},
    ["Flare Token"] = {Product_Id = "16", Bench_Name = "Token_Exchange_World_16_to_19"},
    ["Ignition Token"] = {Product_Id = "17", Bench_Name = "Token_Exchange_World_16_to_19"},
    ["Hellfire Token"] = {Product_Id = "18", Bench_Name = "Token_Exchange_World_16_to_19"},
    ["Adolla Token"] = {Product_Id = "19", Bench_Name = "Token_Exchange_World_16_to_19"},
    ["Fire Company Token"] = {Product_Id = "20", Bench_Name = "Token_Exchange_World_16_to_19"},
    ["Adolla Blessing Token"] = {Product_Id = "21", Bench_Name = "Token_Exchange_World_16_to_19"},
}

local ExchangeW2Options = {
    "Frost Demon Token","Grand Elder Token","Saiyan Lvl Token","Dragon Race Lvl Token","Eternal Dragon Token","Dragon Blessing Token","Scythe Token","Baikai Token","Espada Token","Reiatsu Lvl Token","Zanpakuto Lvl Token","Shadow Garden Token","Shadow Arts Token","Garden Lvl Token","Arts Lvl Token","Threat Level Token","Punch Token","Threat Lvl Token","Punch Lvl Token","Adventurer Token","Magic Tier Token","Mana Growth Token","Ultimate Cast Token","Adventurer Lvl Token","Magic Tier Lvl Token","Thriller Zombie Token","Nightmare Evo Token","Special Zombie Token","Zombie Booster Token",
    "Assassin Grade Token","Assassin Skill Token","Assassin Energy Token","Assassin Damage Token","Spirit Pact Token","Witch Factor Token","Artificial Spirit Token","Gospel Cursed Token","Geass Potential Token","Geass Perception Token","Geass Soul Token","Geass Creation Token","Geass Precognition Token","Geass Time Token","Geass Telepathic Token","Geass Manipulation Token","Geass Obedience Token","Knightmare Token","IQ Token","Scientific Token","Eye Token 2","Shinobi Clan Token","Genkai Token","Chakra Infusion Token","Energy Teigu Token","Damage Teigu Token","Psycho Flow Token","Psycho Destruction Token"
}

local ExchangeW2Map = {
    --W20 TO W25
    ["Frost Demon Token"] = {Product_Id = "1", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Grand Elder Token"] = {Product_Id = "2", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Saiyan Lvl Token"] = {Product_Id = "3", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Dragon Race Lvl Token"] = {Product_Id = "4", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Eternal Dragon Token"] = {Product_Id = "5", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Dragon Blessing Token"] = {Product_Id = "6", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Scythe Token"] = {Product_Id = "7", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Baikai Token"] = {Product_Id = "8", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Espada Token"] = {Product_Id = "9", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Reiatsu Lvl Token"] = {Product_Id = "10", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Zanpakuto Lvl Token"] = {Product_Id = "11", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Shadow Garden Token"] = {Product_Id = "12", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Shadow Arts Token"] = {Product_Id = "13", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Garden Lvl Token"] = {Product_Id = "14", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Arts Lvl Token"] = {Product_Id = "15", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Threat Level Token"] = {Product_Id = "16", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Punch Token"] = {Product_Id = "17", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Threat Lvl Token"] = {Product_Id = "18", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Punch Lvl Token"] = {Product_Id = "19", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Adventurer Token"] = {Product_Id = "20", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Magic Tier Token"] = {Product_Id = "21", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Mana Growth Token"] = {Product_Id = "22", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Ultimate Cast Token"] = {Product_Id = "23", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Adventurer Lvl Token"] = {Product_Id = "24", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Magic Tier Lvl Token"] = {Product_Id = "25", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Thriller Zombie Token"] = {Product_Id = "26", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Nightmare Evo Token"] = {Product_Id = "27", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Special Zombie Token"] = {Product_Id = "28", Bench_Name = "Token_Exchange_World_20_to_25"},
    ["Zombie Booster Token"] = {Product_Id = "29", Bench_Name = "Token_Exchange_World_20_to_25"},

    --W26 TO W30
    ["Assassin Grade Token"] = {Product_Id = "1", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Assassin Skill Token"] = {Product_Id = "2", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Assassin Energy Token"] = {Product_Id = "3", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Assassin Damage Token"] = {Product_Id = "4", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Spirit Pact Token"] = {Product_Id = "5", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Witch Factor Token"] = {Product_Id = "6", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Artificial Spirit Token"] = {Product_Id = "7", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Gospel Cursed Token"] = {Product_Id = "8", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Geass Potential Token"] = {Product_Id = "9", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Geass Perception Token"] = {Product_Id = "10", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Geass Soul Token"] = {Product_Id = "11", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Geass Creation Token"] = {Product_Id = "12", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Geass Precognition Token"] = {Product_Id = "13", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Geass Time Token"] = {Product_Id = "14", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Geass Telepathic Token"] = {Product_Id = "15", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Geass Manipulation Token"] = {Product_Id = "16", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Geass Obedience Token"] = {Product_Id = "17", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Knightmare Token"] = {Product_Id = "18", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["IQ Token"] = {Product_Id = "19", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Scientific Token"] = {Product_Id = "20", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Eye Token 2"] = {Product_Id = "21", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Shinobi Clan Token"] = {Product_Id = "22", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Genkai Token"] = {Product_Id = "23", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Chakra Infusion Token"] = {Product_Id = "24", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Energy Teigu Token"] = {Product_Id = "25", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Damage Teigu Token"] = {Product_Id = "26", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Psycho Flow Token"] = {Product_Id = "27", Bench_Name = "Token_Exchange_World_26_to_30"},
    ["Psycho Destruction Token"] = {Product_Id = "28", Bench_Name = "Token_Exchange_World_26_to_30"},
}

local ExchangeCoinsOptions = {
    "Eminence Coin","Assassin Flow Coin","Lethal Coin","Scythe Coin"
}

local ExchangeCoinsMap = {
    --Exchange Coins
    ["Eminence Coin"] = {Product_Id = "1", Bench_Name = "Coins_Exchange"},
    ["Assassin Flow Coin"] = {Product_Id = "2", Bench_Name = "Coins_Exchange"},
    ["Lethal Coin"] = {Product_Id = "3", Bench_Name = "Coins_Exchange"},
    ["Scythe Coin"] = {Product_Id = "4", Bench_Name = "Coins_Exchange"},
}

local ExchangeMaterialsOptions = {
    "Zombie Glue","Zombie Saw","Tome of Wisdom","Wood","Sap","Plant Fiber","Bones","Fur","Tusk","Stone","Coal","Iron Ore","Shells","Salt","Pearls","Acid","Legendary Beast Essence","Mythical Beast Essence","Phantom Beast Essence","Supreme Beast Essence"
}

local ExchangeMaterialsMap = {
    --Exchange Materials
    ["Zombie Glue"] = {Product_Id = "1", Bench_Name = "Materials_Exchange"},
    ["Zombie Saw"] = {Product_Id = "2", Bench_Name = "Materials_Exchange"},
    ["Tome of Wisdom"] = {Product_Id = "3", Bench_Name = "Materials_Exchange"},
    ["Wood"] = {Product_Id = "4", Bench_Name = "Materials_Exchange"},
    ["Sap"] = {Product_Id = "5", Bench_Name = "Materials_Exchange"},
    ["Plant Fiber"] = {Product_Id = "6", Bench_Name = "Materials_Exchange"},
    ["Bones"] = {Product_Id = "7", Bench_Name = "Materials_Exchange"},
    ["Fur"] = {Product_Id = "8", Bench_Name = "Materials_Exchange"},
    ["Tusk"] = {Product_Id = "9", Bench_Name = "Materials_Exchange"},
    ["Stone"] = {Product_Id = "10", Bench_Name = "Materials_Exchange"},
    ["Coal"] = {Product_Id = "11", Bench_Name = "Materials_Exchange"},
    ["Iron Ore"] = {Product_Id = "12", Bench_Name = "Materials_Exchange"},
    ["Shells"] = {Product_Id = "13", Bench_Name = "Materials_Exchange"},
    ["Salt"] = {Product_Id = "14", Bench_Name = "Materials_Exchange"},
    ["Pearls"] = {Product_Id = "15", Bench_Name = "Materials_Exchange"},
    ["Acid"] = {Product_Id = "16", Bench_Name = "Materials_Exchange"},
    ["Legendary Beast Essence"] = {Product_Id = "17", Bench_Name = "Materials_Exchange"},
    ["Mythical Beast Essence"] = {Product_Id = "18", Bench_Name = "Materials_Exchange"},
    ["Phantom Beast Essence"] = {Product_Id = "19", Bench_Name = "Materials_Exchange"},
    ["Supreme Beast Essence"] = {Product_Id = "20", Bench_Name = "Materials_Exchange"},
}

local ExchangeW1Dropdown = ExchangeTab:Dropdown({
    Flag = "ExchangeW1Dropdown",
    Title = "Select W1 TO W19 Token",
    Values = ExchangeW1Options,
    Value = {},
    Multi = true,
    AllowNone = true,
    Callback = function(option)
        getgenv().SelectedTokenW1 = option
    end,
})

local ExchangeW1Toggle = ExchangeTab:Toggle({
    Flag = "AutoExchangeW1Toggle",
    Title = "Auto Exchange Token to Exchange Coin",
    Desc = "Automatically Exchange Selected Token to Exchange Coin",
    Default = false,
    Callback = function(state)
        getgenv().AutoExchangeW1Running = state
        if state then
            task.spawn(function()
                while getgenv().AutoExchangeW1Running do
                    if getgenv().SelectedTokenW1 and #getgenv().SelectedTokenW1 > 0 then
                        for _, tokenName in ipairs(getgenv().SelectedTokenW1) do
                            local tokenData = ExchangeW1Map[tokenName]
                            if tokenData then
                                game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                    ["Bench_Name"] = tokenData.Bench_Name,
                                    ["Product_Id"] = tonumber(tokenData.Product_Id),
                                    ["Action"] = "Merchant_Purchase",
                                    ["Amount"] = 100,
                                })
                                task.wait(0.1)  -- Á≠âÂæÖ0.1ÁßíÂêéÂèëÈÄÅ‰∏ã‰∏Ä‰∏™
                            end
                        end
                    end
                end
            end)
        else
            -- stopped
        end
    end,
})

ExchangeTab:Divider()

local ExchangeW2Dropdown = ExchangeTab:Dropdown({
    Flag = "ExchangeW2Dropdown",
    Title = "Select W20 TO W30 Token",
    Values = ExchangeW2Options,
    Value = {},
    Multi = true,
    AllowNone = true,
    Callback = function(option)
        getgenv().SelectedTokenW2 = option
    end,
})

local ExchangeW2Toggle = ExchangeTab:Toggle({
    Flag = "AutoExchangeW2Toggle",
    Title = "Auto Exchange Token to Exchange Coin 2",
    Desc = "Automatically Exchange Selected Token to Exchange Coin 2",
    Default = false,
    Callback = function(state)
        getgenv().AutoExchangeW2Running = state
        if state then
            task.spawn(function()
                while getgenv().AutoExchangeW2Running do
                    if getgenv().SelectedTokenW2 and #getgenv().SelectedTokenW2 > 0 then
                        for _, tokenName in ipairs(getgenv().SelectedTokenW2) do
                            local tokenData = ExchangeW2Map[tokenName]
                            if tokenData then
                                game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                    ["Bench_Name"] = tokenData.Bench_Name,
                                    ["Product_Id"] = tonumber(tokenData.Product_Id),
                                    ["Action"] = "Merchant_Purchase",
                                    ["Amount"] = 100,
                                })
                                task.wait(0.1)  -- Á≠âÂæÖ0.1ÁßíÂêéÂèëÈÄÅ‰∏ã‰∏Ä‰∏™
                            end
                        end
                    end
                end
            end)
        else
            -- stopped
        end
    end,
})

ExchangeTab:Divider()

local ExchangeCoinsDropdown = ExchangeTab:Dropdown({
    Flag = "ExchangeCoinsDropdown",
    Title = "Select Coins",
    Values = ExchangeCoinsOptions,
    Value = {},
    Multi = true,
    AllowNone = true,
    Callback = function(option)
        getgenv().SelectedCoins = option
    end,
})

local ExchangeCoinsToggle = ExchangeTab:Toggle({
    Flag = "AutoExchangeCoinsToggle",
    Title = "Auto Exchange Coins to Exchange Coin 2",
    Desc = "Automatically Exchange Selected Coins to Exchange Coin 2",
    Default = false,
    Callback = function(state)
        getgenv().AutoExchangeCoinsRunning = state
        if state then
            task.spawn(function()
                while getgenv().AutoExchangeCoinsRunning do
                    if getgenv().SelectedCoins and #getgenv().SelectedCoins > 0 then
                        for _, coinName in ipairs(getgenv().SelectedCoins) do
                            local coinData = ExchangeCoinsMap[coinName]
                            if coinData then
                                game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                    ["Bench_Name"] = coinData.Bench_Name,
                                    ["Product_Id"] = tonumber(coinData.Product_Id),
                                    ["Action"] = "Merchant_Purchase",
                                    ["Amount"] = 1,
                                })
                                task.wait(0.1)  -- Á≠âÂæÖ0.1ÁßíÂêéÂèëÈÄÅ‰∏ã‰∏Ä‰∏™
                            end
                        end
                    end
                end
            end)
        else
            -- stopped
        end
    end,
})

ExchangeTab:Divider()

local ExchangeMaterialsDropdown = ExchangeTab:Dropdown({
    Flag = "ExchangeMaterialsDropdown",
    Title = "Select Materials",
    Values = ExchangeMaterialsOptions,
    Value = {},
    Multi = true,
    AllowNone = true,
    Callback = function(option)
        getgenv().SelectedMaterials = option
    end,
})

local ExchangeMaterialsToggle = ExchangeTab:Toggle({
    Flag = "AutoExchangeMaterialsToggle",
    Title = "Auto Exchange Materials to Exchange Coin 2",
    Desc = "Automatically Exchange Selected Materials to Exchange Coin 2",
    Default = false,
    Callback = function(state)
        getgenv().AutoExchangeMaterialsRunning = state
        if state then
            task.spawn(function()
                while getgenv().AutoExchangeMaterialsRunning do
                    if getgenv().SelectedMaterials and #getgenv().SelectedMaterials > 0 then
                        for _, materialName in ipairs(getgenv().SelectedMaterials) do
                            local materialData = ExchangeMaterialsMap[materialName]
                            if materialData then
                                game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                    ["Bench_Name"] = materialData.Bench_Name,
                                    ["Product_Id"] = tonumber(materialData.Product_Id),
                                    ["Action"] = "Merchant_Purchase",
                                    ["Amount"] = 1,
                                })
                                task.wait(0.1)  -- Á≠âÂæÖ0.1ÁßíÂêéÂèëÈÄÅ‰∏ã‰∏Ä‰∏™
                            end
                        end
                    end
                end
            end)
        else
            -- stopped
        end
    end,
})


local ExchangeShopTab = Window:Tab({
        Title = "Exchange Shop",
        Icon = "shopping-basket",
    })

getgenv().AutoExchangeShopW1Running = false
getgenv().AutoExchangeShopW2Running = false
getgenv().AutoExchangeShopW1KeysRunning = false

local ExchangeShopW1Options = {
    "Green Upgrade Token","Dragon Race Token","Saiyan Token","Sword Token","Pirate Crew Token","Demon Fruit Token","Haki Token","Reiatsu Token","Zanpakuto Token","Pressure Token","Cursed Token","Cursed Finger","Breathing Token","Demon Arts Token",
    "Hunter Rank Token","ReAwakening Token","Monarch Token","Grimoire Token","Water Spirit Token","Wind Spirit Token","Fire Spirit Token","Chakra Token","Eye Token","Orange Upgrade Token","Granny Token","Gold Ball Token","Lucky Spirit Token","Energy TCG Token","Damage TCG Token","Ten Token","Greedy Token",
    "Families Token","Titan Token","Spinal Fluid Token","Sins Token","Commandments Token","Fortitude Token","Kaiju Token","Kaiju Energy Token","Ultimate Skill Token","Species Token","Demon Energy Token","Demon Damage Token","Demon Luck Token","Demon Coins Token","Energy Rune Token","Weapon Rune Token","Swordsman Energy Token","Swordsman Damage Token","Sin Upgrade Token",
    "Stand Token","Ripple Token","Onomatopoeia Token","Requiem Token","CCG Token","Kagune Token","Kakuhou Token","Debiru Token","Akuma Token","Akuma Damange Token","Flesh Token","Akuma Energy Token","Pokita Token","Mushi Token","Infernal Token","Flare Token","Ignition Token","Hellfire Token","Adolla Token","Fire Company Token","Adolla Blessing Token"
    
}

local ExchangeShopW1Map = {
    --W1 TO W5
    ["Green Upgrade Token"] = {Product_Id = "1", Bench_Name = "Exchange_Shop_World_1_to_5"},
    ["Dragon Race Token"] = {Product_Id = "2", Bench_Name = "Exchange_Shop_World_1_to_5"},
    ["Saiyan Token"] = {Product_Id = "3", Bench_Name = "Exchange_Shop_World_1_to_5"},
    ["Sword Token"] = {Product_Id = "4", Bench_Name = "Exchange_Shop_World_1_to_5"},
    ["Pirate Crew Token"] = {Product_Id = "5", Bench_Name = "Exchange_Shop_World_1_to_5"},
    ["Demon Fruit Token"] = {Product_Id = "6", Bench_Name = "Exchange_Shop_World_1_to_5"},
    ["Haki Token"] = {Product_Id = "7", Bench_Name = "Exchange_Shop_World_1_to_5"},
    ["Reiatsu Token"] = {Product_Id = "8", Bench_Name = "Exchange_Shop_World_1_to_5"},
    ["Zanpakuto Token"] = {Product_Id = "9", Bench_Name = "Exchange_Shop_World_1_to_5"},
    ["Pressure Token"] = {Product_Id = "10", Bench_Name = "Exchange_Shop_World_1_to_5"},
    ["Cursed Token"] = {Product_Id = "11", Bench_Name = "Exchange_Shop_World_1_to_5"},
    ["Cursed Finger"] = {Product_Id = "12", Bench_Name = "Exchange_Shop_World_1_to_5"},
    ["Breathing Token"] = {Product_Id = "13", Bench_Name = "Exchange_Shop_World_1_to_5"},
    ["Demon Arts Token"] = {Product_Id = "14", Bench_Name = "Exchange_Shop_World_1_to_5"},

    --W6 TO W10
    ["Hunter Rank Token"] = {Product_Id = "1", Bench_Name = "Exchange_Shop_World_6_to_10"},
    ["ReAwakening Token"] = {Product_Id = "2", Bench_Name = "Exchange_Shop_World_6_to_10"},
    ["Monarch Token"] = {Product_Id = "3", Bench_Name = "Exchange_Shop_World_6_to_10"},
    ["Grimoire Token"] = {Product_Id = "4", Bench_Name = "Exchange_Shop_World_6_to_10"},
    ["Water Spirit Token"] = {Product_Id = "5", Bench_Name = "Exchange_Shop_World_6_to_10"},
    ["Wind Spirit Token"] = {Product_Id = "6", Bench_Name = "Exchange_Shop_World_6_to_10"},
    ["Fire Spirit Token"] = {Product_Id = "7", Bench_Name = "Exchange_Shop_World_6_to_10"},
    ["Chakra Token"] = {Product_Id = "8", Bench_Name = "Exchange_Shop_World_6_to_10"},
    ["Eye Token"] = {Product_Id = "9", Bench_Name = "Exchange_Shop_World_6_to_10"},
    ["Orange Upgrade Token"] = {Product_Id = "10", Bench_Name = "Exchange_Shop_World_6_to_10"},
    ["Granny Token"] = {Product_Id = "11", Bench_Name = "Exchange_Shop_World_6_to_10"},
    ["Gold Ball Token"] = {Product_Id = "12", Bench_Name = "Exchange_Shop_World_6_to_10"},
    ["Lucky Spirit Token"] = {Product_Id = "13", Bench_Name = "Exchange_Shop_World_6_to_10"},
    ["Energy TCG Token"] = {Product_Id = "14", Bench_Name = "Exchange_Shop_World_6_to_10"},
    ["Damage TCG Token"] = {Product_Id = "15", Bench_Name = "Exchange_Shop_World_6_to_10"},
    ["Ten Token"] = {Product_Id = "16", Bench_Name = "Exchange_Shop_World_6_to_10"},
    ["Greedy Token"] = {Product_Id = "17", Bench_Name = "Exchange_Shop_World_6_to_10"},

    --W11 TO W15
    ["Families Token"] = {Product_Id = "1", Bench_Name = "Exchange_Shop_World_11_to_15"},
    ["Titan Token"] = {Product_Id = "2", Bench_Name = "Exchange_Shop_World_11_to_15"},
    ["Spinal Fluid Token"] = {Product_Id = "3", Bench_Name = "Exchange_Shop_World_11_to_15"},
    ["Sins Token"] = {Product_Id = "4", Bench_Name = "Exchange_Shop_World_11_to_15"},
    ["Commandments Token"] = {Product_Id = "5", Bench_Name = "Exchange_Shop_World_11_to_15"},
    ["Fortitude Token"] = {Product_Id = "6", Bench_Name = "Exchange_Shop_World_11_to_15"},
    ["Kaiju Token"] = {Product_Id = "7", Bench_Name = "Exchange_Shop_World_11_to_15"},
    ["Kaiju Energy Token"] = {Product_Id = "8", Bench_Name = "Exchange_Shop_World_11_to_15"},
    ["Ultimate Skill Token"] = {Product_Id = "9", Bench_Name = "Exchange_Shop_World_11_to_15"},
    ["Species Token"] = {Product_Id = "10", Bench_Name = "Exchange_Shop_World_11_to_15"},
    ["Demon Energy Token"] = {Product_Id = "11", Bench_Name = "Exchange_Shop_World_11_to_15"},
    ["Demon Damage Token"] = {Product_Id = "12", Bench_Name = "Exchange_Shop_World_11_to_15"},
    ["Demon Luck Token"] = {Product_Id = "13", Bench_Name = "Exchange_Shop_World_11_to_15"},
    ["Demon Coins Token"] = {Product_Id = "14", Bench_Name = "Exchange_Shop_World_11_to_15"},
    ["Energy Rune Token"] = {Product_Id = "15", Bench_Name = "Exchange_Shop_World_11_to_15"},
    ["Weapon Rune Token"] = {Product_Id = "16", Bench_Name = "Exchange_Shop_World_11_to_15"},
    ["Swordsman Energy Token"] = {Product_Id = "17", Bench_Name = "Exchange_Shop_World_11_to_15"},
    ["Swordsman Damage Token"] = {Product_Id = "18", Bench_Name = "Exchange_Shop_World_11_to_15"},
    ["Sin Upgrade Token"] = {Product_Id = "19", Bench_Name = "Exchange_Shop_World_11_to_15"},

    --W16 TO W19
    ["Stand Token"] = {Product_Id = "1", Bench_Name = "Exchange_Shop_World_16_to_19"},
    ["Ripple Token"] = {Product_Id = "2", Bench_Name = "Exchange_Shop_World_16_to_19"},
    ["Onomatopoeia Token"] = {Product_Id = "3", Bench_Name = "Exchange_Shop_World_16_to_19"},
    ["Requiem Token"] = {Product_Id = "4", Bench_Name = "Exchange_Shop_World_16_to_19"},
    ["CCG Token"] = {Product_Id = "5", Bench_Name = "Exchange_Shop_World_16_to_19"},
    ["Kagune Token"] = {Product_Id = "6", Bench_Name = "Exchange_Shop_World_16_to_19"},
    ["Kakuhou Token"] = {Product_Id = "7", Bench_Name = "Exchange_Shop_World_16_to_19"},
    ["Debiru Token"] = {Product_Id = "8", Bench_Name = "Exchange_Shop_World_16_to_19"},
    ["Akuma Token"] = {Product_Id = "9", Bench_Name = "Exchange_Shop_World_16_to_19"},
    ["Akuma Damange Token"] = {Product_Id = "10", Bench_Name = "Exchange_Shop_World_16_to_19"},
    ["Flesh Token"] = {Product_Id = "11", Bench_Name = "Exchange_Shop_World_16_to_19"},
    ["Akuma Energy Token"] = {Product_Id = "12", Bench_Name = "Exchange_Shop_World_16_to_19"},
    ["Pokita Token"] = {Product_Id = "13", Bench_Name = "Exchange_Shop_World_16_to_19"},
    ["Mushi Token"] = {Product_Id = "14", Bench_Name = "Exchange_Shop_World_16_to_19"},
    ["Infernal Token"] = {Product_Id = "15", Bench_Name = "Exchange_Shop_World_16_to_19"},
    ["Flare Token"] = {Product_Id = "16", Bench_Name = "Exchange_Shop_World_16_to_19"},
    ["Ignition Token"] = {Product_Id = "17", Bench_Name = "Exchange_Shop_World_16_to_19"},
    ["Hellfire Token"] = {Product_Id = "18", Bench_Name = "Exchange_Shop_World_16_to_19"},
    ["Adolla Token"] = {Product_Id = "19", Bench_Name = "Exchange_Shop_World_16_to_19"},
    ["Fire Company Token"] = {Product_Id = "20", Bench_Name = "Exchange_Shop_World_16_to_19"},
    ["Adolla Blessing Token"] = {Product_Id = "21", Bench_Name = "Exchange_Shop_World_16_to_19"},
}

local ExchangeShopW1KeysOptions = {
    "Tournament Key","Restaurant Key","Progression Key","Titan Defense Key","Kaiju Key","Gleam Key","Ghoul Key","Chainsaw Key","Progression Key 2","Cursed Key","Netherworld Key","Sin Key"
}

local ExchangeShopW1KeysMap = {
    --Keys
    ["Tournament Key"] = {Product_Id = "1", Bench_Name = "Exchange_Shop_Keys"},
    ["Restaurant Key"] = {Product_Id = "2", Bench_Name = "Exchange_Shop_Keys"},
    ["Progression Key"] = {Product_Id = "3", Bench_Name = "Exchange_Shop_Keys"},
    ["Titan Defense Key"] = {Product_Id = "4", Bench_Name = "Exchange_Shop_Keys"},
    ["Kaiju Key"] = {Product_Id = "5", Bench_Name = "Exchange_Shop_Keys"},
    ["Gleam Key"] = {Product_Id = "6", Bench_Name = "Exchange_Shop_Keys"},
    ["Ghoul Key"] = {Product_Id = "7", Bench_Name = "Exchange_Shop_Keys"},
    ["Chainsaw Key"] = {Product_Id = "8", Bench_Name = "Exchange_Shop_Keys"},
    ["Progression Key 2"] = {Product_Id = "9", Bench_Name = "Exchange_Shop_Keys"},
    ["Cursed Key"] = {Product_Id = "10", Bench_Name = "Exchange_Shop_Keys"},
    ["Netherworld Key"] = {Product_Id = "11", Bench_Name = "Exchange_Shop_Keys"},
    ["Sin Key"] = {Product_Id = "12", Bench_Name = "Exchange_Shop_Keys"},
}

local ExchangeShopW1ProductsOptions = {
    "Coins Potion","Damage Potion","Energy Potion","Luck Potion","Exp Potion","Soul Potion","Stats Reset","Attack Range Potion I","Small Coins Potion","Small Damage Potion","Small Energy Potion","Small Luck Potion","Small To Coin Potion","Small To Damage Potion","Small To Energy Potion","Small To Luck Potion","Expensive Stats Reset","Shadow Soul Potion"
}

local ExchangeShopW1ProductsMap = {
    --Products
    ["Coins Potion"] = {Product_Id = "1", Bench_Name = "Exchange_Shop_Products"},
    ["Damage Potion"] = {Product_Id = "2", Bench_Name = "Exchange_Shop_Products"},
    ["Energy Potion"] = {Product_Id = "3", Bench_Name = "Exchange_Shop_Products"},
    ["Luck Potion"] = {Product_Id = "4", Bench_Name = "Exchange_Shop_Products"},
    ["Exp Potion"] = {Product_Id = "5", Bench_Name = "Exchange_Shop_Products"},
    ["Soul Potion"] = {Product_Id = "6", Bench_Name = "Exchange_Shop_Products"},
    ["Stats Reset"] = {Product_Id = "7", Bench_Name = "Exchange_Shop_Products"},
    ["Attack Range Potion I"] = {Product_Id = "8", Bench_Name = "Exchange_Shop_Products"},
    ["Small Coins Potion"] = {Product_Id = "9", Bench_Name = "Exchange_Shop_Products"},
    ["Small Damage Potion"] = {Product_Id = "10", Bench_Name = "Exchange_Shop_Products"},
    ["Small Energy Potion"] = {Product_Id = "11", Bench_Name = "Exchange_Shop_Products"},
    ["Small Luck Potion"] = {Product_Id = "12", Bench_Name = "Exchange_Shop_Products"},
    ["Small To Coin Potion"] = {Product_Id = "13", Bench_Name = "Exchange_Shop_Products"},
    ["Small To Damage Potion"] = {Product_Id = "14", Bench_Name = "Exchange_Shop_Products"},
    ["Small To Energy Potion"] = {Product_Id = "15", Bench_Name = "Exchange_Shop_Products"},
    ["Small To Luck Potion"] = {Product_Id = "16", Bench_Name = "Exchange_Shop_Products"},
    ["Expensive Stats Reset"] = {Product_Id = "17", Bench_Name = "Exchange_Shop_Products"},
    ["Shadow Soul Potion"] = {Product_Id = "18", Bench_Name = "Exchange_Shop_Products"},
}

local ExchangeShopW2Options = {
    "Exchange Coin","Frost Demon Token","Grand Elder Token","Saiyan Lvl Token","Dragon Race Lvl Token","Eternal Dragon Token","Dragon Blessing Token","Scythe Token","Baikai Token","Espada Token","Reiatsu Lvl Token","Zanpakuto Lvl Token","Shadow Garden Token","Shadow Arts Token","Garden Lvl Token","Arts Lvl Token","Threat Level Token","Punch Token","Threat Lvl Token","Punch Lvl Token","Adventurer Token","Magic Tier Token","Mana Growth Token","Ultimate Cast Token","Adventurer Lvl Token","Magic Tier Lvl Token","Thriller Zombie Token","Nightmare Evo Token","Special Zombie Token","Zombie Booster Token",
    "Assassin Grade Token","Assassin Skill Token","Assassin Energy Token","Assassin Damage Token","Spirit Pact Token","Witch Factor Token","Artificial Spirit Token","Gospel Cursed Token","Geass Potential Token","Geass Perception Token","Geass Soul Token","Geass Creation Token","Geass Precognition Token","Geass Time Token","Geass Telepathic Token","Geass Manipulation Token","Knightmare Token","IQ Token","Scientific Token","Eye Token 2","Shinobi Clan Token","Genkai Token","Chakra Infusion Token","Energy Teigu Token","Damage Teigu Token" --"Psycho Flow Token","Psycho Destruction Token",
}

local ExchangeShopW2Map = {
    --W20 TO W25
    ["Exchange Coin"] = {Product_Id = "1", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Frost Demon Token"] = {Product_Id = "2", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Grand Elder Token"] = {Product_Id = "3", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Saiyan Lvl Token"] = {Product_Id = "4", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Dragon Race Lvl Token"] = {Product_Id = "5", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Eternal Dragon Token"] = {Product_Id = "6", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Dragon Blessing Token"] = {Product_Id = "7", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Scythe Token"] = {Product_Id = "8", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Baikai Token"] = {Product_Id = "9", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Espada Token"] = {Product_Id = "10", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Reiatsu Lvl Token"] = {Product_Id = "11", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Zanpakuto Lvl Token"] = {Product_Id = "12", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Shadow Garden Token"] = {Product_Id = "13", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Shadow Arts Token"] = {Product_Id = "14", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Garden Lvl Token"] = {Product_Id = "15", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Arts Lvl Token"] = {Product_Id = "16", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Threat Level Token"] = {Product_Id = "17", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Punch Token"] = {Product_Id = "18", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Threat Lvl Token"] = {Product_Id = "19", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Punch Lvl Token"] = {Product_Id = "20", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Adventurer Token"] = {Product_Id = "21", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Magic Tier Token"] = {Product_Id = "22", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Mana Growth Token"] = {Product_Id = "23", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Ultimate Cast Token"] = {Product_Id = "24", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Adventurer Lvl Token"] = {Product_Id = "25", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Magic Tier Lvl Token"] = {Product_Id = "26", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Thriller Zombie Token"] = {Product_Id = "27", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Nightmare Evo Token"] = {Product_Id = "28", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Special Zombie Token"] = {Product_Id = "29", Bench_Name = "Exchange_Shop_World_20_to_25"},
    ["Zombie Booster Token"] = {Product_Id = "30", Bench_Name = "Exchange_Shop_World_20_to_25"},

    --W26 TO W30
    ["Assassin Grade Token"] = {Product_Id = "1", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Assassin Skill Token"] = {Product_Id = "2", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Assassin Energy Token"] = {Product_Id = "3", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Assassin Damage Token"] = {Product_Id = "4", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Spirit Pact Token"] = {Product_Id = "5", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Witch Factor Token"] = {Product_Id = "6", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Artificial Spirit Token"] = {Product_Id = "7", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Gospel Cursed Token"] = {Product_Id = "8", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Geass Potential Token"] = {Product_Id = "9", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Geass Perception Token"] = {Product_Id = "10", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Geass Soul Token"] = {Product_Id = "11", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Geass Creation Token"] = {Product_Id = "12", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Geass Precognition Token"] = {Product_Id = "13", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Geass Time Token"] = {Product_Id = "14", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Geass Telepathic Token"] = {Product_Id = "15", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Geass Manipulation Token"] = {Product_Id = "16", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Knightmare Token"] = {Product_Id = "17", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["IQ Token"] = {Product_Id = "18", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Scientific Token"] = {Product_Id = "19", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Eye Token 2"] = {Product_Id = "20", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Shinobi Clan Token"] = {Product_Id = "21", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Genkai Token"] = {Product_Id = "22", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Chakra Infusion Token"] = {Product_Id = "23", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Energy Teigu Token"] = {Product_Id = "24", Bench_Name = "Exchange_Shop_World_26_to_30"},
    ["Damage Teigu Token"] = {Product_Id = "25", Bench_Name = "Exchange_Shop_World_26_to_30"},
    --["Psycho Flow Token"] = {Product_Id = "26", Bench_Name = "Exchange_Shop_World_26_to_30"},
    --["Psycho Destruction Token"] = {Product_Id = "27", Bench_Name = "Exchange_Shop_World_26_to_30"},
}

local ExchangeShopW2KeysOptions = {
    "Green Planet Key","Mundo Key","Key of Suffering","Hollow Key","Tomb Arena Key","Adventurer Key","Torment Key","Maze Key 1","One Hero Key","Crimson Canyon Key","Body Improvement Key"
}

local ExchangeShopW2KeysMap = {
    --Keys
    ["Green Planet Key"] = {Product_Id = "1", Bench_Name = "Exchange_Shop_Keys_2"},
    ["Mundo Key"] = {Product_Id = "2", Bench_Name = "Exchange_Shop_Keys_2"},
    ["Key of Suffering"] = {Product_Id = "3", Bench_Name = "Exchange_Shop_Keys_2"},
    ["Hollow Key"] = {Product_Id = "4", Bench_Name = "Exchange_Shop_Keys_2"},
    ["Tomb Arena Key"] = {Product_Id = "5", Bench_Name = "Exchange_Shop_Keys_2"},
    ["Adventurer Key"] = {Product_Id = "6", Bench_Name = "Exchange_Shop_Keys_2"},
    ["Torment Key"] = {Product_Id = "7", Bench_Name = "Exchange_Shop_Keys_2"},
    ["Maze Key 1"] = {Product_Id = "8", Bench_Name = "Exchange_Shop_Keys_2"},
    ["One Hero Key"] = {Product_Id = "9", Bench_Name = "Exchange_Shop_Keys_2"},
    ["Crimson Canyon Key"] = {Product_Id = "10", Bench_Name = "Exchange_Shop_Keys_2"},
    ["Body Improvement Key"] = {Product_Id = "11", Bench_Name = "Exchange_Shop_Keys_2"},
}

local ExchangeShopW2ProductsOptions = {
    "Coins Potion","Damage Potion","Energy Potion","Luck Potion","Exp Potion","Soul Potion","Shadow Soul Potion","Stats Reset","Attack Range Potion I","Expensive Stats Reset","Chocolate Bar","Cheese Pizza Slice","Milk","Green Gummy Bear","Hot Sauce","Coffee","Doughnut","Fried Egg","Waffle","Drop Potion"
}

local ExchangeShopW2ProductsMap = {
    --Maze Products
    ["Coins Potion"] = {Product_Id = "1", Bench_Name = "Maze_Merchant"},
    ["Damage Potion"] = {Product_Id = "2", Bench_Name = "Maze_Merchant"},
    ["Energy Potion"] = {Product_Id = "3", Bench_Name = "Maze_Merchant"},
    ["Luck Potion"] = {Product_Id = "4", Bench_Name = "Maze_Merchant"},
    ["Exp Potion"] = {Product_Id = "5", Bench_Name = "Maze_Merchant"},
    ["Soul Potion"] = {Product_Id = "6", Bench_Name = "Maze_Merchant"},
    ["Shadow Soul Potion"] = {Product_Id = "7", Bench_Name = "Maze_Merchant"},
    ["Stats Reset"] = {Product_Id = "8", Bench_Name = "Maze_Merchant"},
    ["Attack Range Potion I"] = {Product_Id = "9", Bench_Name = "Maze_Merchant"},
    ["Expensive Stats Reset"] = {Product_Id = "10", Bench_Name = "Maze_Merchant"},
    ["Chocolate Bar"] = {Product_Id = "11", Bench_Name = "Maze_Merchant"},
    ["Cheese Pizza Slice"] = {Product_Id = "12", Bench_Name = "Maze_Merchant"},
    ["Milk"] = {Product_Id = "13", Bench_Name = "Maze_Merchant"},
    ["Green Gummy Bear"] = {Product_Id = "14", Bench_Name = "Maze_Merchant"},
    ["Hot Sauce"] = {Product_Id = "15", Bench_Name = "Maze_Merchant"},
    ["Coffee"] = {Product_Id = "16", Bench_Name = "Maze_Merchant"},
    ["Doughnut"] = {Product_Id = "17", Bench_Name = "Maze_Merchant"},
    ["Fried Egg"] = {Product_Id = "18", Bench_Name = "Maze_Merchant"},
    ["Waffle"] = {Product_Id = "19", Bench_Name = "Maze_Merchant"},
    ["Drop Potion"] = {Product_Id = "20", Bench_Name = "Maze_Merchant"},
}

local ExchangeShopW1Dropdown = ExchangeShopTab:Dropdown({
    Flag = "ExchangeShopW1Dropdown",
    Title = "Select W1 TO W19 Token",
    Values = ExchangeShopW1Options,
    Value = {},
    Multi = true,
    AllowNone = true,
    Callback = function(option)
        getgenv().SelectedShopTokenW1 = option
    end,
})

local ExchangeShopW1Toggle = ExchangeShopTab:Toggle({
    Flag = "AutoExchangeShopW1Toggle",
    Title = "Auto Exchange Coin to Token",
    Desc = "Automatically Exchange Coin to Selected Token",
    Default = false,
    Callback = function(state)
        getgenv().AutoExchangeShopW1Running = state
        if state then
            task.spawn(function()
                while getgenv().AutoExchangeShopW1Running do
                    if getgenv().SelectedShopTokenW1 and #getgenv().SelectedShopTokenW1 > 0 then
                        for _, ShoptokenName in ipairs(getgenv().SelectedShopTokenW1) do
                            local ShoptokenData = ExchangeShopW1Map[ShoptokenName]
                            if ShoptokenData then
                                game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                    ["Bench_Name"] = ShoptokenData.Bench_Name,
                                    ["Product_Id"] = tonumber(ShoptokenData.Product_Id),
                                    ["Action"] = "Merchant_Purchase",
                                    ["Amount"] = 10,
                                })
                                task.wait(0.1)  -- Á≠âÂæÖ0.1ÁßíÂêéÂèëÈÄÅ‰∏ã‰∏Ä‰∏™
                            end
                        end
                    end
                end
            end)
        else
            -- stopped
        end
    end,
})

ExchangeShopTab:Divider()

local ExchangeShopW1KeysDropdown = ExchangeShopTab:Dropdown({
    Flag = "ExchangeShopW1KeysDropdown",
    Title = "Select W1 TO W19 Keys to Buy",
    Values = ExchangeShopW1KeysOptions,
    Value = {},
    Multi = true,
    AllowNone = true,
    Callback = function(option)
        getgenv().SelectedShopKeysW1 = option
    end,
})

local ExchangeShopW1KeysToggle = ExchangeShopTab:Toggle({
    Flag = "AutoExchangeShopW1KeysToggle",
    Title = "Auto Exchange Coin to W1 TO W19 Keys",
    Desc = "Automatically Exchange Coin to Selected Keys",
    Default = false,
    Callback = function(state)
        getgenv().AutoExchangeShopW1KeysRunning = state
        if state then
            task.spawn(function()
                while getgenv().AutoExchangeShopW1KeysRunning do
                    if getgenv().SelectedShopKeysW1 and #getgenv().SelectedShopKeysW1 > 0 then
                        for _, ShopKeysName in ipairs(getgenv().SelectedShopKeysW1) do
                            local ShopKeysData = ExchangeShopW1KeysMap[ShopKeysName]
                            if ShopKeysData then
                                game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                    ["Bench_Name"] = ShopKeysData.Bench_Name,
                                    ["Product_Id"] = tonumber(ShopKeysData.Product_Id),
                                    ["Action"] = "Merchant_Purchase",
                                    ["Amount"] = 1,
                                })
                                task.wait(0.1)  -- Á≠âÂæÖ0.1ÁßíÂêéÂèëÈÄÅ‰∏ã‰∏Ä‰∏™
                            end
                        end
                    end
                end
            end)
        else
        end
    end,
})

ExchangeShopTab:Divider()

local ExchangeShopW1ProductsDropdown = ExchangeShopTab:Dropdown({
    Flag = "ExchangeShopW1ProductsDropdown",
    Title = "Select W1 TO W19 Products to Buy",
    Values = ExchangeShopW1ProductsOptions,
    Value = {},
    Multi = true,
    AllowNone = true,
    Callback = function(option)
        getgenv().SelectedShopProductsW1 = option
    end,
})

local ExchangeShopW1ProductsToggle = ExchangeShopTab:Toggle({
    Flag = "AutoExchangeShopW1ProductsToggle",
    Title = "Auto Exchange Coin to W1 TO W19 Products",
    Desc = "Automatically Exchange Coin to Selected Products",
    Default = false,
    Callback = function(state)
        getgenv().AutoExchangeShopW1ProductsRunning = state
        if state then
            task.spawn(function()
                while getgenv().AutoExchangeShopW1ProductsRunning do
                    if getgenv().SelectedShopProductsW1 and #getgenv().SelectedShopProductsW1 > 0 then
                        for _, ShopProductsName in ipairs(getgenv().SelectedShopProductsW1) do
                            local ShopProductsData = ExchangeShopW1ProductsMap[ShopProductsName]
                            if ShopProductsData then
                                game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                    ["Bench_Name"] = ShopProductsData.Bench_Name,
                                    ["Product_Id"] = tonumber(ShopProductsData.Product_Id),
                                    ["Action"] = "Merchant_Purchase",
                                    ["Amount"] = 1,
                                })
                                task.wait(0.1)  -- Á≠âÂæÖ0.1ÁßíÂêéÂèëÈÄÅ‰∏ã‰∏Ä‰∏™
                            end
                        end
                    end
                end
            end)
        else
        end
    end,
})

ExchangeShopTab:Divider()

local ExchangeShopW2Dropdown = ExchangeShopTab:Dropdown({
    Flag = "ExchangeShopW2Dropdown",
    Title = "Select W20 TO W30 Token",
    Values = ExchangeShopW2Options,
    Value = {},
    Multi = true,
    AllowNone = true,
    Callback = function(option)
        getgenv().SelectedShopTokenW2 = option
    end,
})

local ExchangeShopW2Toggle = ExchangeShopTab:Toggle({
    Flag = "AutoExchangeShopW2Toggle",
    Title = "Auto Exchange Coin to Token",
    Desc = "Automatically Exchange Coin to Selected Token",
    Default = false,
    Callback = function(state)
        getgenv().AutoExchangeShopW2Running = state
        if state then
            task.spawn(function()
                while getgenv().AutoExchangeShopW2Running do
                    if getgenv().SelectedShopTokenW2 and #getgenv().SelectedShopTokenW2 > 0 then
                        for _, ShoptokenName in ipairs(getgenv().SelectedShopTokenW2) do
                            local ShoptokenData = ExchangeShopW2Map[ShoptokenName]
                            if ShoptokenData then
                                game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                    ["Bench_Name"] = ShoptokenData.Bench_Name,
                                    ["Product_Id"] = tonumber(ShoptokenData.Product_Id),
                                    ["Action"] = "Merchant_Purchase",
                                    ["Amount"] = 10,
                                })
                                task.wait(0.1)  -- Á≠âÂæÖ0.1ÁßíÂêéÂèëÈÄÅ‰∏ã‰∏Ä‰∏™
                            end
                        end
                    end
                end
            end)
        else
        end
    end,
})

ExchangeShopTab:Divider()

local ExchangeShopW2KeysDropdown = ExchangeShopTab:Dropdown({
    Flag = "ExchangeShopW2KeysDropdown",
    Title = "Select W20 TO W30 Keys to Buy",
    Values = ExchangeShopW2KeysOptions,
    Value = {},
    Multi = true,
    AllowNone = true,
    Callback = function(option)
        getgenv().SelectedShopKeysW2 = option
    end,
})

local ExchangeShopW2KeysToggle = ExchangeShopTab:Toggle({
    Flag = "AutoExchangeShopW2KeysToggle",
    Title = "Auto Exchange Coin to W20 TO W30 Keys",
    Desc = "Automatically Exchange Coin to Selected Keys",
    Default = false,
    Callback = function(state)
        getgenv().AutoExchangeShopW2KeysRunning = state
        if state then
            task.spawn(function()
                while getgenv().AutoExchangeShopW2KeysRunning do
                    if getgenv().SelectedShopKeysW2 and #getgenv().SelectedShopKeysW2 > 0 then
                        for _, ShopKeysName in ipairs(getgenv().SelectedShopKeysW2) do
                            local ShopKeysData = ExchangeShopW2KeysMap[ShopKeysName]
                            if ShopKeysData then
                                game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                    ["Bench_Name"] = ShopKeysData.Bench_Name,
                                    ["Product_Id"] = tonumber(ShopKeysData.Product_Id),
                                    ["Action"] = "Merchant_Purchase",
                                    ["Amount"] = 1,
                                })
                                task.wait(0.1)  -- Á≠âÂæÖ0.1ÁßíÂêéÂèëÈÄÅ‰∏ã‰∏Ä‰∏™
                            end
                        end
                    end
                end
            end)
        else
        end
    end,
})

ExchangeShopTab:Divider()

local ExchangeShopW2ProductsDropdown = ExchangeShopTab:Dropdown({
    Flag = "ExchangeShopW2ProductsDropdown",
    Title = "Select W20 TO W30 Products to Buy",
    Values = ExchangeShopW2ProductsOptions,
    Value = {},
    Multi = true,
    AllowNone = true,
    Callback = function(option)
        getgenv().SelectedShopProductsW2 = option
    end,
})

local ExchangeShopW2ProductsToggle = ExchangeShopTab:Toggle({
    Flag = "AutoExchangeShopW2ProductsToggle",
    Title = "Auto Exchange Coin to W20 TO W30 Products",
    Desc = "Automatically Exchange Coin to Selected Products",
    Default = false,
    Callback = function(state)
        getgenv().AutoExchangeShopW2ProductsRunning = state
        if state then
            task.spawn(function()
                while getgenv().AutoExchangeShopW2ProductsRunning do
                    if getgenv().SelectedShopProductsW2 and #getgenv().SelectedShopProductsW2 > 0 then
                        for _, ShopProductsName in ipairs(getgenv().SelectedShopProductsW2) do
                            local ShopProductsData = ExchangeShopW2ProductsMap[ShopProductsName]
                            if ShopProductsData then
                                game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                    ["Bench_Name"] = ShopProductsData.Bench_Name,
                                    ["Product_Id"] = tonumber(ShopProductsData.Product_Id),
                                    ["Action"] = "Merchant_Purchase",
                                    ["Amount"] = 1,
                                })
                                task.wait(0.1)  -- Á≠âÂæÖ0.1ÁßíÂêéÂèëÈÄÅ‰∏ã‰∏Ä‰∏™
                            end
                        end
                    end
                end
            end)
        else
        end
    end,
})

local QuestTab = Window:Tab({
        Title = "Quests",
        Icon = "scroll-text",
    })

--Auto Get Daily Quest
QuestTab:Toggle({
    Flag = "DailyQuest1",
   Title = "Auto Get Daily Quest",
   Desc = "Automatically accept daily quests",
   Default = false,
   Callback = function(state)
   local dailyquests = {"2001","2002","2003","2004","2005","2006","2007"}
   if state then
    getgenv().AutoDailyQuestRunning = true
    task.spawn(function()
        while getgenv().AutoDailyQuestRunning do
            pcall(function()
                for _, dailyquest in ipairs(dailyquests) do
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Id"] = dailyquest,
                        ["Type"] = "Accept",
                        ["Action"] = "_Quest",
                    })
                    task.wait(0.3)
                   end
            end)
            task.wait(5)

        end
    end)
   else
    getgenv().AutoDailyQuestRunning = false
   end
end,
})

QuestTab:Divider()

--Auto Find & Collect Punching Machine
QuestTab:Toggle({
    Flag = "Quest2301",
   Title = "Auto Complete Punching Machine Quest",
   Desc = "Automatically accept and complete Punching Machine quest",
   Default = false,
   Callback = function(state)
   if state then
    getgenv().AutoPunchQuestRunning = true
    task.spawn(function()
        while getgenv().AutoPunchQuestRunning do
            pcall(function()
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Id"] = "2301",
                        ["Type"] = "Accept",
                        ["Action"] = "_Quest",
                    })
                    task.wait(1.5)
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Type"] = "Find_Found",
                        ["Action"] = "_Quest",
                        ["Target"] = "Punching_Machine",
                        ["Object_Index"] = 1,
                        ["Id"] = "2301",
                    })
                    task.wait(1.5)
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Id"] = "2301",
                        ["Type"] = "Complete",
                        ["Action"] = "_Quest",
                    })
            end)
            task.wait(60)

        end
    end)
   else
    getgenv().AutoPunchQuestRunning = false
   end
end,
})

--Auto Hero Quests

--Auto Demon Fruit Quest
QuestTab:Toggle({
    Flag = "Quest2302",
   Title = "Auto Complete Demon Fruit Quest",
   Desc = "Automatically accept and complete Demon Fruit quest",
   Default = false,
   Callback = function(state)
   if state then
    getgenv().AutoDemonFruitQuestRunning = true
    task.spawn(function()
        while getgenv().AutoDemonFruitQuestRunning do
            pcall(function()
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Id"] = "2302",
                        ["Type"] = "Accept",
                        ["Action"] = "_Quest",
                    })
                    task.wait(1.5)
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Type"] = "Find_Found",
                        ["Action"] = "_Quest",
                        ["Target"] = "Demon_Fruit",
                        ["Object_Index"] = 1,
                        ["Id"] = "2302",
                    })
                    task.wait(1.5)
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Id"] = "2302",
                        ["Type"] = "Complete",
                        ["Action"] = "_Quest",
                    })
            end)
            task.wait(60)

        end
    end)
   else
    getgenv().AutoDemonFruitQuestRunning = false
   end
end,
})

--Auto Complete Briefcase Quest
QuestTab:Toggle({
    Flag = "Quest2601",
   Title = "Auto Complete Briefcase Quest",
   Desc = "Automatically accept and complete Briefcase quest",
   Default = false,
   Callback = function(state)
   if state then
    getgenv().AutoBriefcaseQuestRunning = true
    task.spawn(function()
        while getgenv().AutoBriefcaseQuestRunning do
            pcall(function()
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Id"] = "2601",
                        ["Type"] = "Accept",
                        ["Action"] = "_Quest",
                    })
                    task.wait(1.5)
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Type"] = "Find_Found",
                        ["Action"] = "_Quest",
                        ["Target"] = "_Briefcase",
                        ["Object_Index"] = 1,
                        ["Id"] = "2601",
                    })
                    task.wait(1.5)
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Id"] = "2601",
                        ["Type"] = "Complete",
                        ["Action"] = "_Quest",
                    })
            end)
            task.wait(60)

        end
    end)
   else
    getgenv().AutoBriefcaseQuestRunning = false
   end
end,
})

--Auto Complete Assassin Knife Quest
QuestTab:Toggle({
    Flag = "Quest2609",
   Title = "Auto Complete Assassin Knife Quest",
   Desc = "Automatically accept and complete Assassin Knife quest",
   Default = false,
   Callback = function(state)
   if state then
    getgenv().AutoAssassinKnifeQuestRunning = true
    task.spawn(function()
        while getgenv().AutoAssassinKnifeQuestRunning do
            pcall(function()
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Id"] = "2609",
                        ["Type"] = "Accept",
                        ["Action"] = "_Quest",
                    })
                    task.wait(1.5)
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Type"] = "Find_Found",
                        ["Action"] = "_Quest",
                        ["Target"] = "Assassin_Knife",
                        ["Object_Index"] = 1,
                        ["Id"] = "2609",
                    })
                    task.wait(1.5)
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Id"] = "2609",
                        ["Type"] = "Complete",
                        ["Action"] = "_Quest",
                    })
            end)
            task.wait(60)

        end
    end)
   else
    getgenv().AutoAssassinKnifeQuestRunning = false
   end
end,
})

--Auto Complete Assassin Pistol Quest
QuestTab:Toggle({
    Flag = "Quest2610",
   Title = "Auto Complete Assassin Pistol Quest",
   Desc = "Automatically accept and complete Assassin Pistol quest",
   Default = false,
   Callback = function(state)
   if state then
    getgenv().AutoAssassinPistolQuestRunning = true
    task.spawn(function()
        while getgenv().AutoAssassinPistolQuestRunning do
            pcall(function()
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Id"] = "2610",
                        ["Type"] = "Accept",
                        ["Action"] = "_Quest",
                    })
                    task.wait(1.5)
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Type"] = "Find_Found",
                        ["Action"] = "_Quest",
                        ["Target"] = "Assassin_Pistol",
                        ["Object_Index"] = 1,
                        ["Id"] = "2610",
                    })
                    task.wait(1.5)
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Id"] = "2610",
                        ["Type"] = "Complete",
                        ["Action"] = "_Quest",
                    })
            end)
            task.wait(60)

        end
    end)
   else
    getgenv().AutoAssassinPistolQuestRunning = false
   end
end,
})

--Auto Complete Exorcise Humans Quest
QuestTab:Toggle({
    Flag = "Quest2303",
   Title = "Auto Complete Exorcise Humans Quest",
   Desc = "Automatically accept and complete Exorcise Humans quest",
   Default = false,
   Callback = function(state)
   if state then
    getgenv().AutoExorciseHumansQuestRunning = true
    task.spawn(function()
        while getgenv().AutoExorciseHumansQuestRunning do
            pcall(function()
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Id"] = "2303",
                        ["Type"] = "Accept",
                        ["Action"] = "_Quest",
                    })
                    task.wait(1.5)
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Type"] = "Find_Found",
                        ["Action"] = "_Quest",
                        ["Target"] = "Exorcisms",
                        ["Object_Index"] = 1,
                        ["Id"] = "2303",
                    })
                    task.wait(1.5)
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Id"] = "2303",
                        ["Type"] = "Complete",
                        ["Action"] = "_Quest",
                    })
            end)
            task.wait(1)

        end
    end)
   else
    getgenv().AutoExorciseHumansQuestRunning = false
   end
end,
})

--Auto Complete Evil Spirit Quest
QuestTab:Toggle({
    Flag = "Quest2304",
   Title = "Auto Complete Evil Spirit Quest",
   Desc = "Automatically accept and complete Evil Spirit quest",
   Default = false,
   Callback = function(state)
   if state then
    getgenv().AutoEvilSpiritQuestRunning = true
    task.spawn(function()
        while getgenv().AutoEvilSpiritQuestRunning do
            pcall(function()
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Id"] = "2304",
                        ["Type"] = "Accept",
                        ["Action"] = "_Quest",
                    })
                    task.wait(1.5)
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Type"] = "Find_Found",
                        ["Action"] = "_Quest",
                        ["Target"] = "Evil_Spirits",
                        ["Object_Index"] = 1,
                        ["Id"] = "2304",
                    })
                    task.wait(1.5)
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Id"] = "2304",
                        ["Type"] = "Complete",
                        ["Action"] = "_Quest",
                    })
            end)
            task.wait(1)

        end
    end)
   else
    getgenv().AutoExorciseHumansQuestRunning = false
   end
end,
})

--Auto Complete Bento Box Quest
QuestTab:Toggle({
    Flag = "Quest2305",
   Title = "Auto Complete Bento Box Quest",
   Desc = "Automatically accept and complete Bento Box quest",
   Default = false,
   Callback = function(state)
   if state then
    getgenv().AutoBentoQuestRunning = true
    task.spawn(function()
        while getgenv().AutoBentoQuestRunning do
            pcall(function()
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Id"] = "2305",
                        ["Type"] = "Accept",
                        ["Action"] = "_Quest",
                    })
                    task.wait(1.5)
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Type"] = "Find_Found",
                        ["Action"] = "_Quest",
                        ["Target"] = "Lost_Bento_Box",
                        ["Object_Index"] = 1,
                        ["Id"] = "2305",
                    })
                    task.wait(1.5)
                    game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                        ["Id"] = "2305",
                        ["Type"] = "Complete",
                        ["Action"] = "_Quest",
                    })
            end)
            task.wait(60)

        end
    end)
   else
    getgenv().AutoBentoQuestRunning = false
   end
end,
})

local StarTab = Window:Tab({
        Title = "Star",
        Icon = "star",
    })

--Auto Open Star
local StarDropdown = StarTab:Dropdown({
    Flag = "StarDropdown",
   Title = "Star List",
   Values = {"[W1] Earth City","[W2] Windmill Island","[W3] Soul Society","[W4] Cursed School","[W5] Slayer Village",

    "[W6] Solo Island","[W7] Clover Village","[W8] Leaf Village","[W9] Spirit Residence","[W10] Magic Hunter City",

    "[W11] Titan City","[W12] Village of Sins","[W13] Kaiju Base","[W14] Tempest Capital","[W15] Virtual City",

    "[W16] Cairo","[W17] Ghoul City","[W18] Chainsaw City","[W19] Tokyo Empire","[W20] Green Planet",

    "[W21] Hollow World","[W22] Shadow Academy","[W23] Z City","[W24] Great Tomb","[W25] Thriller Park",

    "[W26] Amusement Park","[W27] Re:Manor","[W28] Asfordo Academy","[W29] Science Village","[W30] Sand Village",

    "[W31] Night Raid Base","[W32] Salty School","[W33] Mugen District"
},
    Value = "[W1] Earth City",
    Callback = function(option)
        getgenv().selectedStars = option
    end,
})

-- Auto Open Star Toggle
StarTab:Toggle({
    Flag = "AutoOpenStar1",
    Title = "Auto Open Star",
    Desc = "Automatically Open Max Selected Star",
    Default = false,
    Callback = function(state)
        if state then
            getgenv().AutoOpenStar = true
            task.spawn(function()
                while getgenv().AutoOpenStar do
                    pcall(function()
                        -- ÊèêÂèñÊï∞Â≠óÂπ∂ÊûÑÈÄ† Name ‰∏∫ "Star_X" Ê†ºÂºè
                        local worldNumber = string.match(getgenv().selectedStars, "(%d+)")
                        if worldNumber then
                            game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                ["Open_Amount"] = 30,
                                ["Name"] = "Star_" .. worldNumber,
                                ["Action"] = "_Stars",
                            })
                        end
                        task.wait(0.05)
                    end)
                end
            end)
        else
            getgenv().AutoOpenStar = false
        end
    end,
})

local RollTab = Window:Tab({
        Title = "Roll",
        Icon = "dices",
    })

--Auto Roll
local RollDropdown = RollTab:Dropdown({
    Flag = "RollDropdown",
   Title = "Roll List",
   Values = {"[W1] Dragon Race","[W1] Saiyan Evolution",
    "[W2] Pirate Crew","[W2] Demon Fruits","[W2] Swords",
    "[W3] Reiatsu Color","[W3] Zanpakuto",
    "[W4] Curses",
    "[W5] Demon Arts",
    "[W6] Solo Hunter Rank",
    "[W7] Grimoire",
    "[W8] Power Eyes",
    "[W9] Psychic Mayhem",
    "[W10] Energy Card Shop","[W10] Damage Card Shop",
    "[W11] Families","[W11] Titans",
    "[W12] Sins","[W12] Commandments",
    "[W13] Kaiju Powers","[W13] Power of Exchange",
    "[W14] Ultimate Skills","[W14] Species",
    "[W15] Power Energy Runes",
    "[W16] Stands","[W16] Onomatopoeia",
    "[W17] Investigators","[W17] Kagune",
    "[W18] Debiru Hunter","[W18] Akuma Powers",
    "[W19] Special Fire Force", "[W19] Mushi Bite",
    "[W20] Grand Elder Power", "[W20] Frost Demon Evolution", "[W20] Power of Friendship",
    "[W21] Scythes","[W21] Espada",
    "[W22] Shadow Garden","[W22] Shadow Arts",
    "[W23] Energy Threat Level","[W23] Punch Power","[W23] Exchange of Power",
    "[W24] Adventurer Rank","[W24] Magic Tier",
    "[W25] Thriller Zombie","[W25] Nightmare Evolution","[W25] Special Zombie",
    "[W26] Assassin Grade","[W26] Assassin Skills",
    "[W27] Spirit Pact","[W27] Witch Factor","[W27] Re:Spirit Pact","[W27] Re:Witch Factor","[W27] Witch Authority",
    "[W28] Geass Potential","[W28] Knightmare Frames",
    "[W29] IQ","[W29] Scientific Weapons",
    "[W30] Shinobi Clan","[W30] Kekkei Genkai","[W30] Power Eyes 2",
    "[W31] Energy Teigu","[W31] Damage Teigu",
    "[W32] Psycho Flow","[W32] Psycho Destruction",
    "[W33] Slayer Marks","[W33] Demon Bloodline"
},
    Value = "[W1] Dragon Race",
    Callback = function(option)
        getgenv().selectedRolls = option
    end,
})

-- Auto Roll Toggle
RollTab:Toggle({
    Flag = "AutoRoll1",
    Title = "Auto Roll",
    Desc = "Automatically Roll Max Selected Roll",
    Default = false,
    Callback = function(state)
        if state then
            getgenv().AutoRoll = true
            task.spawn(function()
                while getgenv().AutoRoll do
                    pcall(function()
                        -- ÁîüÊàê NameÔºöÁßªÈô§ "[W X] " ÂâçÁºÄÔºåÂπ∂Â∞ÜÁ©∫Ê†ºÊõøÊç¢‰∏∫‰∏ãÂàíÁ∫ø
                        local name = string.gsub(getgenv().selectedRolls, "^%[W%d+%] ", ""):gsub(" ", "_")
                        game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                            ["Open_Amount"] = 5,
                            ["Name"] = name,
                            ["Action"] = "_Gacha_Activate",
                        })
                        task.wait(0.05)
                    end)
                end
            end)
        else
            getgenv().AutoRoll = false
        end
    end,
})


-- Ê∑ªÂä†ÂÖ®Â±ÄÊéßÂà∂ÂèòÈáè
getgenv().AutoEvolveRunning = false

local WeaponsTab = Window:Tab({
        Title = "Weapons",
        Icon = "sword",
    })

local specialWeapons = {
    "Venomleaf", "Cryoscythe", "Toxinfang", "Crimson Thorn", "Bonehowl", "Ashfang", "Phantom Requiem", "Stormreaver"
}

local WeaponsEvolveToggle = WeaponsTab:Toggle({
    Flag = "WeaponsEvolve1",
    Title = "Auto Evolve Weapons",
    Default = false,
    Callback = function(state)
        getgenv().AutoEvolveRunning = state
        if state then
            -- ÂêØÂä®Âæ™ÁéØÔºöÊØè0.5ÁßíÈáçÊñ∞Ê£ÄÊµãÊ≠¶Âô®ÂêçÂ≠óÂíåTierÂπ∂ÂèëÈÄÅEvolve‰ø°Âè∑
            task.spawn(function()
                while getgenv().AutoEvolveRunning do  -- ‰ΩøÁî®ÂÖ®Â±ÄÂèòÈáèÊéßÂà∂Âæ™ÁéØ
                    local tier0Groups = {}  -- { ["Weapon Name"] = {list of weapon button names} } for Tier 0 (no Tier Frame)
                    local tier1Groups = {}  -- { ["Weapon Name"] = {list of weapon button names} } for Tier 1 (Tier Frame with ImageLabel Name = "1" only)
                    local tier2Groups = {}  -- { ["Weapon Name"] = {list of weapon button names} } for Tier 2 (Tier Frame with ImageLabel Name = "1" and "2" only, no "3")
                    local player = game:GetService("Players").LocalPlayer
                    local playerGui = player:FindFirstChild("PlayerGui")
                    if playerGui and playerGui:IsA("PlayerGui") then
                        local inventoryGui = playerGui:FindFirstChild("Inventory_1")
                        if inventoryGui and inventoryGui:IsA("ScreenGui") then
                            local hub = inventoryGui:FindFirstChild("Hub")
                            if hub and hub:IsA("Frame") then
                                local weapons = hub:FindFirstChild("Weapons")
                                if weapons and weapons:IsA("Frame") then
                                    local listFrame = weapons:FindFirstChild("List_Frame")
                                    if listFrame and listFrame:IsA("Frame") then
                                        local list = listFrame:FindFirstChild("List")
                                        if list and list:IsA("ScrollingFrame") then
                                            for _, weaponButton in pairs(list:GetChildren()) do
                                                if weaponButton:IsA("ImageButton") and weaponButton:FindFirstChild("Inside") then
                                                    local inside = weaponButton.Inside
                                                    if inside:IsA("Frame") and inside:FindFirstChild("Title") then
                                                        local title = inside.Title
                                                        if title:IsA("TextLabel") then
                                                            local weaponName = title.Text
                                                            local tierFrame = inside:FindFirstChild("Tier")
                                                            if weaponName and weaponName ~= "" then
                                                                if not tierFrame then
                                                                    -- Tier 0: no Tier Frame
                                                                    if not tier0Groups[weaponName] then
                                                                        tier0Groups[weaponName] = {}
                                                                    end
                                                                    table.insert(tier0Groups[weaponName], weaponButton.Name)
                                                                elseif tierFrame:IsA("Frame") then
                                                                    -- Ê£ÄÊü•TierÈáåÈù¢ÁöÑImageLabel
                                                                    local hasImage1 = false
                                                                    local hasImage2 = false
                                                                    local hasImage3 = false
                                                                    for _, child in pairs(tierFrame:GetChildren()) do
                                                                        if child:IsA("ImageLabel") then
                                                                            if child.Name == "1" then
                                                                                hasImage1 = true
                                                                            elseif child.Name == "2" then
                                                                                hasImage2 = true
                                                                            elseif child.Name == "3" then
                                                                                hasImage3 = true
                                                                            end
                                                                        end
                                                                    end
                                                                    if hasImage1 and not hasImage2 and not hasImage3 then
                                                                        -- Tier 1: has ImageLabel Name = "1" only
                                                                        if not tier1Groups[weaponName] then
                                                                            tier1Groups[weaponName] = {}
                                                                        end
                                                                        table.insert(tier1Groups[weaponName], weaponButton.Name)
                                                                    elseif hasImage1 and hasImage2 and not hasImage3 then
                                                                        -- Tier 2: has ImageLabel Name = "1" and "2" only, no "3"
                                                                        if not tier2Groups[weaponName] then
                                                                            tier2Groups[weaponName] = {}
                                                                        end
                                                                        table.insert(tier2Groups[weaponName], weaponButton.Name)
                                                                    end
                                                                end
                                                            end
                                                        end
                                                    end
                                                end
                                            end
                                        end
                                    end
                                end
                            end
                        end
                    end

                    -- ÂèëÈÄÅEvolve‰ø°Âè∑
                    -- Tier 0: Weapon_Evolve or Scythe_Evolve, 5 or 2 weapons
                    for weaponName, weaponList in pairs(tier0Groups) do
                        local isSpecial = table.find(specialWeapons, weaponName) ~= nil
                        local requiredCount = isSpecial and 2 or 5
                        local benchName = isSpecial and "Scythe_Evolve" or "Weapon_Evolve"
                        if #weaponList >= requiredCount then
                            local selected = {}
                            for i = 1, requiredCount do
                                selected[i] = weaponList[i]
                            end
                            game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                ["Selected"] = selected,
                                ["Action"] = "Evolve",
                                ["Bench_Name"] = benchName,
                            })
                            break  -- Âè™Â§ÑÁêÜÁ¨¨‰∏Ä‰∏™Á¨¶ÂêàÁöÑÁªÑ
                        end
                    end

                    -- Tier 1: Weapon_Evolve_2 or Scythe_Evolve_2, 4 or 2 weapons
                    for weaponName, weaponList in pairs(tier1Groups) do
                        local isSpecial = table.find(specialWeapons, weaponName) ~= nil
                        local requiredCount = isSpecial and 2 or 4
                        local benchName = isSpecial and "Scythe_Evolve_2" or "Weapon_Evolve_2"
                        if #weaponList >= requiredCount then
                            local selected = {}
                            for i = 1, requiredCount do
                                selected[i] = weaponList[i]
                            end
                            game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                ["Selected"] = selected,
                                ["Action"] = "Evolve",
                                ["Bench_Name"] = benchName,
                            })
                            break  -- Âè™Â§ÑÁêÜÁ¨¨‰∏Ä‰∏™Á¨¶ÂêàÁöÑÁªÑ
                        end
                    end

                    -- Tier 2: Weapon_Evolve_3 or Scythe_Evolve_3, 2 weapons
                    for weaponName, weaponList in pairs(tier2Groups) do
                        local isSpecial = table.find(specialWeapons, weaponName) ~= nil
                        local benchName = isSpecial and "Scythe_Evolve_3" or "Weapon_Evolve_3"
                        if #weaponList >= 2 then
                            local selected = {}
                            for i = 1, 2 do
                                selected[i] = weaponList[i]
                            end
                            game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                ["Selected"] = selected,
                                ["Action"] = "Evolve",
                                ["Bench_Name"] = benchName,
                            })
                            break  -- Âè™Â§ÑÁêÜÁ¨¨‰∏Ä‰∏™Á¨¶ÂêàÁöÑÁªÑ
                        end
                    end

                    if not next(tier0Groups) and not next(tier1Groups) and not next(tier2Groups) then
                    end

                    task.wait(0.5)  -- ÊØè0.5ÁßíÈáçÊñ∞Ê£ÄÊµãÊ≠¶Âô®ÂêçÂ≠óÂíåTier
                end
            end)
        else
            -- ToggleÂÖ≥Èó≠Êó∂ÔºåËÆæÁΩÆÂÖ®Â±ÄÂèòÈáè‰∏∫falseÔºåÂæ™ÁéØÂÅúÊ≠¢
        end
    end,
})

WeaponsTab:Divider()

-- ËæÖÂä©ÂáΩÊï∞ÔºöÊ†πÊçÆweaponNameËé∑ÂèñUniqueIdÔºàbutton NameÔºâ
local function getWeaponUniqueId(weaponName)
    local player = game:GetService("Players").LocalPlayer
    local playerGui = player:FindFirstChild("PlayerGui")
    if playerGui and playerGui:IsA("PlayerGui") then
        local inventoryGui = playerGui:FindFirstChild("Inventory_1")
        if inventoryGui and inventoryGui:IsA("ScreenGui") then
            local hub = inventoryGui:FindFirstChild("Hub")
            if hub and hub:IsA("Frame") then
                local weapons = hub:FindFirstChild("Weapons")
                if weapons and weapons:IsA("Frame") then
                    local listFrame = weapons:FindFirstChild("List_Frame")
                    if listFrame and listFrame:IsA("Frame") then
                        local list = listFrame:FindFirstChild("List")
                        if list and list:IsA("ScrollingFrame") then
                            for _, weaponButton in pairs(list:GetChildren()) do
                                if weaponButton:IsA("ImageButton") and weaponButton:FindFirstChild("Inside") then
                                    local inside = weaponButton.Inside
                                    if inside:IsA("Frame") and inside:FindFirstChild("Title") then
                                        local title = inside.Title
                                        if title:IsA("TextLabel") and title.Text == weaponName then
                                            return weaponButton.Name  -- ËøîÂõûbuttonÁöÑName‰Ωú‰∏∫UniqueId
                                        end
                                    end
                                end
                            end
                        end
                    end
                end
            end
        end
    end
    return nil
end

local WeaponsDropdown = WeaponsTab:Dropdown({
    Flag = "WeaponsDropdown1",
    Title = "Select Weapons to Evolve",
    Values = {},  -- ÂàùÂßã‰∏∫Á©∫
    Value = {},
    Multi = true,
    AllowNone = true,
    Callback = function(option)
        getgenv().SelectedWeapons = option
    end,
})

local WeaponRefreshButton = WeaponsTab:Button({
    Flag = "RefreshButton2",
    Title = "Refresh Weapons List",
    Callback = function()
        -- Á±ª‰ººMobÂà∑Êñ∞ÈÄªËæëÔºöÈáçÊñ∞Êâ´ÊèèÂπ∂Âà∑Êñ∞dropdown
        local weaponList = {}
        local player = game:GetService("Players").LocalPlayer
        local playerGui = player:FindFirstChild("PlayerGui")
        if playerGui and playerGui:IsA("PlayerGui") then
            local inventoryGui = playerGui:FindFirstChild("Inventory_1")
            if inventoryGui and inventoryGui:IsA("ScreenGui") then
                local hub = inventoryGui:FindFirstChild("Hub")
                if hub and hub:IsA("Frame") then
                    local weapons = hub:FindFirstChild("Weapons")
                    if weapons and weapons:IsA("Frame") then
                        local listFrame = weapons:FindFirstChild("List_Frame")
                        if listFrame and listFrame:IsA("Frame") then
                            local list = listFrame:FindFirstChild("List")
                            if list and list:IsA("ScrollingFrame") then
                                for _, weaponButton in pairs(list:GetChildren()) do
                                    if weaponButton:IsA("ImageButton") and weaponButton:FindFirstChild("Inside") then
                                        local inside = weaponButton.Inside
                                        if inside:IsA("Frame") and inside:FindFirstChild("Title") then
                                            local title = inside.Title
                                            if title:IsA("TextLabel") then
                                                local weaponName = title.Text  -- Áõ¥Êé•Ëé∑ÂèñTextÂ±ûÊÄß
                                                if weaponName and weaponName ~= "" then
                                                    table.insert(weaponList, weaponName)
                                                end
                                            end
                                        end
                                    end
                                end
                            end
                        end
                    end
                end
            end
        end

        if #weaponList == 0 then
            WeaponsDropdown:Refresh({"None"})
        else
            WeaponsDropdown:Refresh(weaponList)
        end
    end,
})

WeaponsTab:Divider()

-- ÂÖ®Â±ÄÊéßÂà∂ÂèòÈáè
getgenv().AutoBreathingsRunning = false
getgenv().AutoBankaiRunning = false
getgenv().AutoChakraRunning = false
getgenv().AutoScytheRunning = false

WeaponsTab:Toggle({
    Flag = "AutoBreathings1",
    Title = "Auto Roll Breathings",
    Desc = "Automatically Roll Breathings Using Selected Weapon",
    Default = false,
    Callback = function(state)
        getgenv().AutoBreathingsRunning = state
        if state then
            task.spawn(function()
                while getgenv().AutoBreathingsRunning do
                    if getgenv().SelectedWeapons and #getgenv().SelectedWeapons > 0 then
                        for _, weaponName in ipairs(getgenv().SelectedWeapons) do
                            -- Ëé∑ÂèñweaponÁöÑUniqueIdÔºàbutton NameÔºâ
                            local uniqueId = getWeaponUniqueId(weaponName)
                            if uniqueId then
                                game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                    ["UniqueId"] = uniqueId,
                                    ["Type"] = "Enchant",
                                    ["Action"] = "Enchantment",
                                    ["Enchantment_Name"] = "Breathings",
                                })
                            else
                            end
                        end
                    end
                    task.wait(0.2)
                end
            end)
        else
        end
    end,
})

WeaponsTab:Toggle({
    Flag = "AutoBankai1",
    Title = "Auto Roll Bankai",
    Desc = "Automatically Roll Bankai Using Selected Weapon",
    Default = false,
    Callback = function(state)
        getgenv().AutoBankaiRunning = state
        if state then
            task.spawn(function()
                while getgenv().AutoBankaiRunning do
                    if getgenv().SelectedWeapons and #getgenv().SelectedWeapons > 0 then
                        for _, weaponName in ipairs(getgenv().SelectedWeapons) do
                            local uniqueId = getWeaponUniqueId(weaponName)
                            if uniqueId then
                                game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                    ["Type"] = "Enchant",
                                    ["UniqueId"] = uniqueId,
                                    ["Action"] = "Enchantment",
                                    ["Enchantment_Name"] = "Bankai",
                                })
                            else
                            end
                        end
                    end
                    task.wait(0.2)
                end
            end)
        else
        end
    end,
})

WeaponsTab:Toggle({
    Flag = "AutoChakra1",
    Title = "Auto Roll Chakra Infusion",
    Desc = "Automatically Roll Chakra Infusion Using Selected Weapon",
    Default = false,
    Callback = function(state)
        getgenv().AutoChakraRunning = state
        if state then
            task.spawn(function()
                while getgenv().AutoChakraRunning do
                    if getgenv().SelectedWeapons and #getgenv().SelectedWeapons > 0 then
                        for _, weaponName in ipairs(getgenv().SelectedWeapons) do
                            local uniqueId = getWeaponUniqueId(weaponName)
                            if uniqueId then
                                game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                    ["Type"] = "Enchant",
                                    ["UniqueId"] = uniqueId,
                                    ["Action"] = "Enchantment",
                                    ["Enchantment_Name"] = "Chakra_Infusion",
                                })
                            else
                            end
                        end
                    end
                    task.wait(0.2)
                end
            end)
        else
        end
    end,
})

WeaponsTab:Toggle({
    Flag = "AutoScythe1",
    Title = "Auto Upgrade Scythe Leveling",
    Desc = "Automatically Upgrade Scythe Leveling Using Selected Weapon",
    Default = false,
    Callback = function(state)
        getgenv().AutoScytheRunning = state
        if state then
            task.spawn(function()
                while getgenv().AutoScytheRunning do
                    if getgenv().SelectedWeapons and #getgenv().SelectedWeapons > 0 then
                        for _, weaponName in ipairs(getgenv().SelectedWeapons) do
                            local uniqueId = getWeaponUniqueId(weaponName)
                            if uniqueId then
                                game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                    ["Upgrade_Name"] = "Level",
                                    ["UniqueId"] = uniqueId,
                                    ["Action"] = "Prog_Lv_Items",
                                    ["Bench_Name"] = "Scythe_Leveling",
                                })
                            end
                        end
                    end
                    task.wait(0.2)
                end
            end)
        else
        end
    end,
})

local TitansTab = Window:Tab({
        Title = "Titans",
        Icon = "person-standing",
    })

getgenv().AutoTitansEvolveRunning = false

local TitansEvolveToggle = TitansTab:Toggle({
    Flag = "TitansEvolve1",
    Title = "Auto Evolve Titans",
    Default = false,
    Callback = function(state)
        getgenv().AutoTitansEvolveRunning = state
        if state then
            -- ÂêØÂä®Âæ™ÁéØÔºöÊØè0.5ÁßíÈáçÊñ∞Ê£ÄÊµãtitanÂêçÂ≠óÂíåTierÂπ∂ÂèëÈÄÅEvolve‰ø°Âè∑
            task.spawn(function()
                while getgenv().AutoTitansEvolveRunning do  -- ‰ΩøÁî®ÂÖ®Â±ÄÂèòÈáèÊéßÂà∂Âæ™ÁéØ
                    local titantier0Groups = {}  -- { ["Titan Name"] = {list of titan button names} } for Tier 0 (no Tier Frame)
                    local titantier1Groups = {}  -- { ["Titan Name"] = {list of titan button names} } for Tier 1 (Tier Frame with ImageLabel Name = "1" only)
                    local titantier2Groups = {}  -- { ["Titan Name"] = {list of titan button names} } for Tier 2 (Tier Frame with ImageLabel Name = "1" and "2" only, no "3")
                    local player = game:GetService("Players").LocalPlayer
                    local playerGui = player:FindFirstChild("PlayerGui")
                    if playerGui and playerGui:IsA("PlayerGui") then
                        local inventoryGui = playerGui:FindFirstChild("Inventory_1")
                        if inventoryGui and inventoryGui:IsA("ScreenGui") then
                            local hub = inventoryGui:FindFirstChild("Hub")
                            if hub and hub:IsA("Frame") then
                                local titans = hub:FindFirstChild("Titans")
                                if titans and titans:IsA("Frame") then
                                    local listFrame = titans:FindFirstChild("List_Frame")
                                    if listFrame and listFrame:IsA("Frame") then
                                        local list = listFrame:FindFirstChild("List")
                                        if list and list:IsA("ScrollingFrame") then
                                            local children = list:GetChildren()
                                            for _, titanButton in pairs(children) do
                                                if titanButton:IsA("ImageButton") then
                                                    local inside = titanButton:FindFirstChild("Inside")
                                                    if inside then
                                                        if inside:IsA("CanvasGroup") then
                                                            local title = inside:FindFirstChild("Title")
                                                            if title then
                                                                if title:IsA("TextLabel") then
                                                                    local titanName = title.Text
                                                                    local titantierFrame = inside:FindFirstChild("Tier")
                                                                    if titanName and titanName ~= "" then
                                                                        if not titantierFrame then
                                                                            -- Tier 0: no Tier Frame
                                                                            if not titantier0Groups[titanName] then
                                                                                titantier0Groups[titanName] = {}
                                                                            end
                                                                            table.insert(titantier0Groups[titanName], titanButton.Name)
                                                                        elseif titantierFrame:IsA("Frame") then
                                                                            -- Ê£ÄÊü•TierÈáåÈù¢ÁöÑImageLabel
                                                                            local hasImage1 = false
                                                                            local hasImage2 = false
                                                                            local hasImage3 = false
                                                                            for _, child in pairs(titantierFrame:GetChildren()) do
                                                                                if child:IsA("ImageLabel") then
                                                                                    if child.Name == "1" then
                                                                                        hasImage1 = true
                                                                                    elseif child.Name == "2" then
                                                                                        hasImage2 = true
                                                                                    elseif child.Name == "3" then
                                                                                        hasImage3 = true
                                                                                    end
                                                                                end
                                                                            end
                                                                            if hasImage1 and not hasImage2 and not hasImage3 then
                                                                                -- Tier 1: has ImageLabel Name = "1" only
                                                                                if not titantier1Groups[titanName] then
                                                                                    titantier1Groups[titanName] = {}
                                                                                end
                                                                                table.insert(titantier1Groups[titanName], titanButton.Name)
                                                                            elseif hasImage1 and hasImage2 and not hasImage3 then
                                                                                -- Tier 2: has ImageLabel Name = "1" and "2" only, no "3"
                                                                                if not titantier2Groups[titanName] then
                                                                                    titantier2Groups[titanName] = {}
                                                                                end
                                                                                table.insert(titantier2Groups[titanName], titanButton.Name)
                                                                            end
                                                                        end
                                                                    end
                                                                end
                                                            end
                                                        end
                                                    end
                                                end
                                            end
                                        end
                                    end
                                end
                            end
                        end
                    end

                    -- ÂèëÈÄÅEvolve‰ø°Âè∑
                    -- Tier 0: Titan_Evolve, 2 titans
                    for titanName, titanList in pairs(titantier0Groups) do
                        if #titanList >= 2 then
                            local selected = {}
                            for i = 1, 2 do
                                selected[i] = titanList[i]
                            end
                            game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                ["Selected"] = selected,
                                ["Action"] = "Evolve",
                                ["Bench_Name"] = "Titan_Evolve",
                            })
                            break  -- Âè™Â§ÑÁêÜÁ¨¨‰∏Ä‰∏™Á¨¶ÂêàÁöÑÁªÑ
                        end
                    end

                    -- Tier 1: Titan_Evolve_2, 2 titans
                    for titanName, titanList in pairs(titantier1Groups) do
                        if #titanList >= 2 then
                            local selected = {}
                            for i = 1, 2 do
                                selected[i] = titanList[i]
                            end
                            game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                ["Selected"] = selected,
                                ["Action"] = "Evolve",
                                ["Bench_Name"] = "Titan_Evolve_2",
                            })
                            break  -- Âè™Â§ÑÁêÜÁ¨¨‰∏Ä‰∏™Á¨¶ÂêàÁöÑÁªÑ
                        end
                    end

                    -- Tier 2: Titan_Evolve_3, 2 titans
                    for titanName, titanList in pairs(titantier2Groups) do
                        if #titanList >= 2 then
                            local selected = {}
                            for i = 1, 2 do
                                selected[i] = titanList[i]
                            end
                            game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                ["Selected"] = selected,
                                ["Action"] = "Evolve",
                                ["Bench_Name"] = "Titan_Evolve_3",
                            })
                            break  -- Âè™Â§ÑÁêÜÁ¨¨‰∏Ä‰∏™Á¨¶ÂêàÁöÑÁªÑ
                        end
                    end

                    task.wait(0.5)  -- ÊØè0.5ÁßíÈáçÊñ∞Ê£ÄÊµãtitanÂêçÂ≠óÂíåTier
                end
            end)
        else
            -- ToggleÂÖ≥Èó≠Êó∂ÔºåËÆæÁΩÆÂÖ®Â±ÄÂèòÈáè‰∏∫falseÔºåÂæ™ÁéØÂÅúÊ≠¢
        end
    end,
})

TitansTab:Divider()

local function getTitanUniqueId(titanName)
    local player = game:GetService("Players").LocalPlayer
    local playerGui = player:FindFirstChild("PlayerGui")
    if playerGui and playerGui:IsA("PlayerGui") then
        local inventoryGui = playerGui:FindFirstChild("Inventory_1")
        if inventoryGui and inventoryGui:IsA("ScreenGui") then
            local hub = inventoryGui:FindFirstChild("Hub")
            if hub and hub:IsA("Frame") then
                local titans = hub:FindFirstChild("Titans")
                if titans and titans:IsA("Frame") then
                    local listFrame = titans:FindFirstChild("List_Frame")
                    if listFrame and listFrame:IsA("Frame") then
                        local list = listFrame:FindFirstChild("List")
                        if list and list:IsA("ScrollingFrame") then
                            for _, titanButton in pairs(list:GetChildren()) do
                                if titanButton:IsA("ImageButton") and titanButton:FindFirstChild("Inside") then
                                    local inside = titanButton.Inside
                                    if inside:IsA("CanvasGroup") and inside:FindFirstChild("Title") then
                                        local title = inside.Title
                                        if title:IsA("TextLabel") and title.Text == titanName then
                                            return titanButton.Name  -- ËøîÂõûbuttonÁöÑName‰Ωú‰∏∫UniqueId
                                        end
                                    end
                                end
                            end
                        end
                    end
                end
            end
        end
    end
    return nil
end

local TitansDropdown = TitansTab:Dropdown({
    Flag = "TitansDropdown1",
    Title = "Select Titans to Inject",
    Values = {},  -- ÂàùÂßã‰∏∫Á©∫
    Value = {},
    Multi = true,
    AllowNone = true,
    Callback = function(option)
        getgenv().SelectedTitans = option
    end,
})

local TitanRefreshButton = TitansTab:Button({
    Flag = "RefreshButton3",
    Title = "Refresh Titans List",
    Callback = function()
        -- Á±ª‰ººMobÂà∑Êñ∞ÈÄªËæëÔºöÈáçÊñ∞Êâ´ÊèèÂπ∂Âà∑Êñ∞dropdown
        local titanList = {}
        local player = game:GetService("Players").LocalPlayer
        local playerGui = player:FindFirstChild("PlayerGui")
        if playerGui and playerGui:IsA("PlayerGui") then
            local inventoryGui = playerGui:FindFirstChild("Inventory_1")
            if inventoryGui and inventoryGui:IsA("ScreenGui") then
                local hub = inventoryGui:FindFirstChild("Hub")
                if hub and hub:IsA("Frame") then
                    local titans = hub:FindFirstChild("Titans")
                    if titans and titans:IsA("Frame") then
                        local listFrame = titans:FindFirstChild("List_Frame")
                        if listFrame and listFrame:IsA("Frame") then
                            local list = listFrame:FindFirstChild("List")
                            if list and list:IsA("ScrollingFrame") then
                                for _, titanButton in pairs(list:GetChildren()) do
                                    if titanButton:IsA("ImageButton") and titanButton:FindFirstChild("Inside") then
                                        local inside = titanButton.Inside
                                        if inside:IsA("CanvasGroup") and inside:FindFirstChild("Title") then
                                            local title = inside.Title
                                            if title:IsA("TextLabel") then
                                                local titanName = title.Text  -- Áõ¥Êé•Ëé∑ÂèñTextÂ±ûÊÄß
                                                if titanName and titanName ~= "" then
                                                    table.insert(titanList, titanName)
                                                end
                                            end
                                        end
                                    end
                                end
                            end
                        end
                    end
                end
            end
        end

        if #titanList == 0 then
            TitansDropdown:Refresh({"None"})
        else
            TitansDropdown:Refresh(titanList)
        end
    end,
})

TitansTab:Divider()

getgenv().AutoInjectionRunning = false

TitansTab:Toggle({
    Flag = "AutoInjection1",
    Title = "Auto Roll Injection",
    Desc = "Automatically Roll Injection Using Selected Titan",
    Default = false,
    Callback = function(state)
        getgenv().AutoInjectionRunning = state
        if state then
            task.spawn(function()
                while getgenv().AutoInjectionRunning do
                    if getgenv().SelectedTitans and #getgenv().SelectedTitans > 0 then
                        for _, titanName in ipairs(getgenv().SelectedTitans) do
                            -- Ëé∑ÂèñweaponÁöÑUniqueIdÔºàbutton NameÔºâ
                            local uniqueId = getTitanUniqueId(titanName)
                            if uniqueId then
                                game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                    ["Type"] = "Enchant",
                                    ["UniqueId"] = uniqueId,
                                    ["Action"] = "Enchantment",
                                    ["Enchantment_Name"] = "Titan_Injection",
                                })
                            else
                            end
                        end
                    end
                    task.wait(0.2)
                end
            end)
        else
        end
    end,
})

local StandsTab = Window:Tab({
        Title = "Stands",
        Icon = "arrow-up-from-dot",
    })

getgenv().AutoStandsEvolveRunning = false

local StandsEvolveToggle = StandsTab:Toggle({
    Flag = "StandsEvolve1",
    Title = "Auto Evolve Stands",
    Default = false,
    Callback = function(state)
        getgenv().AutoStandsEvolveRunning = state
        if state then
            -- ÂêØÂä®Âæ™ÁéØÔºöÊØè0.5ÁßíÈáçÊñ∞Ê£ÄÊµãtitanÂêçÂ≠óÂíåTierÂπ∂ÂèëÈÄÅEvolve‰ø°Âè∑
            task.spawn(function()
                while getgenv().AutoStandsEvolveRunning do  -- ‰ΩøÁî®ÂÖ®Â±ÄÂèòÈáèÊéßÂà∂Âæ™ÁéØ
                    local standtier0Groups = {}  -- { ["Titan Name"] = {list of titan button names} } for Tier 0 (no Tier Frame)
                    local standtier1Groups = {}  -- { ["Titan Name"] = {list of titan button names} } for Tier 1 (Tier Frame with ImageLabel Name = "1" only)
                    local standtier2Groups = {}  -- { ["Titan Name"] = {list of titan button names} } for Tier 2 (Tier Frame with ImageLabel Name = "1" and "2" only, no "3")
                    local player = game:GetService("Players").LocalPlayer
                    local playerGui = player:FindFirstChild("PlayerGui")
                    if playerGui and playerGui:IsA("PlayerGui") then
                        local inventoryGui = playerGui:FindFirstChild("Inventory_1")
                        if inventoryGui and inventoryGui:IsA("ScreenGui") then
                            local hub = inventoryGui:FindFirstChild("Hub")
                            if hub and hub:IsA("Frame") then
                                local stands = hub:FindFirstChild("Stands")
                                if stands and stands:IsA("Frame") then
                                    local listFrame = stands:FindFirstChild("List_Frame")
                                    if listFrame and listFrame:IsA("Frame") then
                                        local list = listFrame:FindFirstChild("List")
                                        if list and list:IsA("ScrollingFrame") then
                                            local children = list:GetChildren()
                                            for _, standButton in pairs(children) do
                                                if standButton:IsA("ImageButton") then
                                                    local inside = standButton:FindFirstChild("Inside")
                                                    if inside then
                                                        if inside:IsA("CanvasGroup") then
                                                            local title = inside:FindFirstChild("Title")
                                                            if title then
                                                                if title:IsA("TextLabel") then
                                                                    local standName = title.Text
                                                                    local standtierFrame = inside:FindFirstChild("Tier")
                                                                    if standName and standName ~= "" then
                                                                        if not standtierFrame then
                                                                            -- Tier 0: no Tier Frame
                                                                            if not standtier0Groups[standName] then
                                                                                standtier0Groups[standName] = {}
                                                                            end
                                                                            table.insert(standtier0Groups[standName], standButton.Name)
                                                                        elseif standtierFrame:IsA("Frame") then
                                                                            -- Ê£ÄÊü•TierÈáåÈù¢ÁöÑImageLabel
                                                                            local hasImage1 = false
                                                                            local hasImage2 = false
                                                                            local hasImage3 = false
                                                                            for _, child in pairs(standtierFrame:GetChildren()) do
                                                                                if child:IsA("ImageLabel") then
                                                                                    if child.Name == "1" then
                                                                                        hasImage1 = true
                                                                                    elseif child.Name == "2" then
                                                                                        hasImage2 = true
                                                                                    elseif child.Name == "3" then
                                                                                        hasImage3 = true
                                                                                    end
                                                                                end
                                                                            end
                                                                            if hasImage1 and not hasImage2 and not hasImage3 then
                                                                                -- Tier 1: has ImageLabel Name = "1" only
                                                                                if not standtier1Groups[standName] then
                                                                                    standtier1Groups[standName] = {}
                                                                                end
                                                                                table.insert(standtier1Groups[standName], standButton.Name)
                                                                            elseif hasImage1 and hasImage2 and not hasImage3 then
                                                                                -- Tier 2: has ImageLabel Name = "1" and "2" only, no "3"
                                                                                if not standtier2Groups[standName] then
                                                                                    standtier2Groups[standName] = {}
                                                                                end
                                                                                table.insert(standtier2Groups[standName], standButton.Name)
                                                                            end
                                                                        end
                                                                    end
                                                                end
                                                            end
                                                        end
                                                    end
                                                end
                                            end
                                        end
                                    end
                                end
                            end
                        end
                    end

                    -- ÂèëÈÄÅEvolve‰ø°Âè∑
                    -- Tier 0: Titan_Evolve, 2 titans
                    for standName, standList in pairs(standtier0Groups) do
                        if #standList >= 2 then
                            local selected = {}
                            for i = 1, 2 do
                                selected[i] = standList[i]
                            end
                            game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                ["Selected"] = selected,
                                ["Action"] = "Evolve",
                                ["Bench_Name"] = "Stand_Evolve",
                            })
                            break  -- Âè™Â§ÑÁêÜÁ¨¨‰∏Ä‰∏™Á¨¶ÂêàÁöÑÁªÑ
                        end
                    end

                    -- Tier 1: Titan_Evolve_2, 2 titans
                    for standName, standList in pairs(standtier1Groups) do
                        if #standList >= 2 then
                            local selected = {}
                            for i = 1, 2 do
                                selected[i] = standList[i]
                            end
                            game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                ["Selected"] = selected,
                                ["Action"] = "Evolve",
                                ["Bench_Name"] = "Stand_Evolve_2",
                            })
                            break  -- Âè™Â§ÑÁêÜÁ¨¨‰∏Ä‰∏™Á¨¶ÂêàÁöÑÁªÑ
                        end
                    end

                    -- Tier 2: Titan_Evolve_3, 2 titans
                    for standName, standList in pairs(standtier2Groups) do
                        if #standList >= 2 then
                            local selected = {}
                            for i = 1, 2 do
                                selected[i] = standList[i]
                            end
                            game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                ["Selected"] = selected,
                                ["Action"] = "Evolve",
                                ["Bench_Name"] = "Stand_Evolve_3",
                            })
                            break  -- Âè™Â§ÑÁêÜÁ¨¨‰∏Ä‰∏™Á¨¶ÂêàÁöÑÁªÑ
                        end
                    end

                    task.wait(0.5)  -- ÊØè0.5ÁßíÈáçÊñ∞Ê£ÄÊµãtitanÂêçÂ≠óÂíåTier
                end
            end)
        else
            -- ToggleÂÖ≥Èó≠Êó∂ÔºåËÆæÁΩÆÂÖ®Â±ÄÂèòÈáè‰∏∫falseÔºåÂæ™ÁéØÂÅúÊ≠¢
        end
    end,
})

StandsTab:Divider()

local function getStandUniqueId(standName)
    local player = game:GetService("Players").LocalPlayer
    local playerGui = player:FindFirstChild("PlayerGui")
    if playerGui and playerGui:IsA("PlayerGui") then
        local inventoryGui = playerGui:FindFirstChild("Inventory_1")
        if inventoryGui and inventoryGui:IsA("ScreenGui") then
            local hub = inventoryGui:FindFirstChild("Hub")
            if hub and hub:IsA("Frame") then
                local stands = hub:FindFirstChild("Stands")
                if stands and stands:IsA("Frame") then
                    local listFrame = stands:FindFirstChild("List_Frame")
                    if listFrame and listFrame:IsA("Frame") then
                        local list = listFrame:FindFirstChild("List")
                        if list and list:IsA("ScrollingFrame") then
                            for _, standButton in pairs(list:GetChildren()) do
                                if standButton:IsA("ImageButton") and standButton:FindFirstChild("Inside") then
                                    local inside = standButton.Inside
                                    if inside:IsA("CanvasGroup") and inside:FindFirstChild("Title") then
                                        local title = inside.Title
                                        if title:IsA("TextLabel") and title.Text == standName then
                                            return standButton.Name  -- ËøîÂõûbuttonÁöÑName‰Ωú‰∏∫UniqueId
                                        end
                                    end
                                end
                            end
                        end
                    end
                end
            end
        end
    end
    return nil
end

local StandsDropdown = StandsTab:Dropdown({
    Flag = "StandsDropdown1",
    Title = "Select Stands to Inject",
    Values = {},  -- ÂàùÂßã‰∏∫Á©∫
    Value = {},
    Multi = true,
    AllowNone = true,
    Callback = function(option)
        getgenv().SelectedStands = option
    end,
})

local StandRefreshButton = StandsTab:Button({
    Flag = "RefreshButton4",
    Title = "Refresh Stands List",
    Callback = function()
        -- Á±ª‰ººMobÂà∑Êñ∞ÈÄªËæëÔºöÈáçÊñ∞Êâ´ÊèèÂπ∂Âà∑Êñ∞dropdown
        local standList = {}
        local player = game:GetService("Players").LocalPlayer
        local playerGui = player:FindFirstChild("PlayerGui")
        if playerGui and playerGui:IsA("PlayerGui") then
            local inventoryGui = playerGui:FindFirstChild("Inventory_1")
            if inventoryGui and inventoryGui:IsA("ScreenGui") then
                local hub = inventoryGui:FindFirstChild("Hub")
                if hub and hub:IsA("Frame") then
                    local stands = hub:FindFirstChild("Stands")
                    if stands and stands:IsA("Frame") then
                        local listFrame = stands:FindFirstChild("List_Frame")
                        if listFrame and listFrame:IsA("Frame") then
                            local list = listFrame:FindFirstChild("List")
                            if list and list:IsA("ScrollingFrame") then
                                for _, standButton in pairs(list:GetChildren()) do
                                    if standButton:IsA("ImageButton") and standButton:FindFirstChild("Inside") then
                                        local inside = standButton.Inside
                                        if inside:IsA("CanvasGroup") and inside:FindFirstChild("Title") then
                                            local title = inside.Title
                                            if title:IsA("TextLabel") then
                                                local standName = title.Text  -- Áõ¥Êé•Ëé∑ÂèñTextÂ±ûÊÄß
                                                if standName and standName ~= "" then
                                                    table.insert(standList, standName)
                                                end
                                            end
                                        end
                                    end
                                end
                            end
                        end
                    end
                end
            end
        end

        if #standList == 0 then
            StandsDropdown:Refresh({"None"})
        else
            StandsDropdown:Refresh(standList)
        end
    end,
})

StandsTab:Divider()

getgenv().AutoStandsInjectionRunning = false

StandsTab:Toggle({
    Flag = "AutoInjection2",
    Title = "Auto Roll Requiem Injection",
    Desc = "Automatically Roll Requiem Injection Using Selected Stand",
    Default = false,
    Callback = function(state)
        getgenv().AutoStandsInjectionRunning = state
        if state then
            task.spawn(function()
                while getgenv().AutoStandsInjectionRunning do
                    if getgenv().SelectedStands and #getgenv().SelectedStands > 0 then
                        for _, standName in ipairs(getgenv().SelectedStands) do
                            -- Ëé∑ÂèñweaponÁöÑUniqueIdÔºàbutton NameÔºâ
                            local uniqueId = getStandUniqueId(standName)
                            if uniqueId then
                                game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                    ["Type"] = "Enchant",
                                    ["UniqueId"] = uniqueId,
                                    ["Action"] = "Enchantment",
                                    ["Enchantment_Name"] = "Requiem_Injection",
                                })
                            else
                            end
                        end
                    end
                    task.wait(0.2)
                end
            end)
        else
        end
    end,
})

local ProgressionTab = Window:Tab({
        Title = "Progression",
        Icon = "chevrons-up",
    })

--Auto Progression Upgrade
local ProgressionDropdown = ProgressionTab:Dropdown({
    Flag = "ProgressionDropdown",
   Title = "Progression List",
   Values = {"[W2] Haki Upgrade",
    "[W3] Spiritual Pressure",
    "[W4] Cursed Progression",
    "[W5] Slayer Energy Progression",
    "[W6] ReAwakening Progression","[W6] Monarch Progression",
    "[W7] Water Spirit Progression","[W7] Fire Spirit Progression","[W7] Wind Spirit Progression",
    "[W8] Chakra Progression",
    "[W9] Spiritual Upgrade","[W9] Lucky Spirit",
    "[W10] Ten Progression","[W10] Contract of Greed",
    "[W12] Sins Upgrades (Energy)","[W12] Sins Upgrades (Coins)","[W12] Sins Upgrades (Star_Luck)","[W12] Sins Upgrades (Damage)","[W12] Energy Progression",
    "[W13] Fortitude Level", "[W13] Kaiju Energy",
    "[W14] Demon Lord Energy", "[W14] Demon Lord Damage","[W14] Demon Lord Luck","[W14] Demon Lord Coins",
    "[W15] Swordsman Energy","[W15] Swordsman Damage",
    "[W16] Ripple Energy",
    "[W17] Damange Cells",
    "[W18] Akuma Damage","[W18] Akuma Energy",
    "[W20] Dragon Energy","[W20] Dragon Damage",
    "[W22] Eminence Energy","[W22] Eminence Damage","[W22] Eminence Luck","[W22] Eminence Coins",
    "[W23] Punch Power Leveling",
    "[W24] Mana Growth","[W24] Ultimate Cast",
    "[W26] Assassin Energy","[W26] Assassin Damage","[W26] Assassin Critical Energy","[W26] Assassin Critical Damage",
    "[W29] Science Materials Upgrade","[W29] Science Upgrades (Energy)","[W29] Science Upgrades (Damage)"
},
    Value = "[W2] Haki Upgrade",
    Callback = function(option)
        getgenv().selectedProgression = option
    end,
})

local ProgressionMap = { -- Upgrade_Name, Bench_Name, Action
    ["[W2] Haki Upgrade"] = {"Haki_Upgrade", "Haki_Upgrade", "_Upgrades"},
    ["[W3] Spiritual Pressure"] = {"Spiritual_Pressure", "Spiritual_Pressure", "_Upgrades"},
    ["[W4] Cursed Progression"] = {"Curse", "Cursed_Progression", "_Upgrades"},
    ["[W5] Slayer Energy Progression"] = {"Energy", "Slayer_Energy_Progression", "_Progression"},
    ["[W6] ReAwakening Progression"] = {"ReAwakening", "ReAwakening_Progression", "_Upgrades"},
    ["[W6] Monarch Progression"] = {"Monarch", "Monarch_Progression", "_Upgrades"},
    ["[W7] Water Spirit Progression"] = {"Water_Spirit", "Water_Spirit_Progression", "_Upgrades"},
    ["[W7] Fire Spirit Progression"] = {"Fire_Spirit", "Fire_Spirit_Progression", "_Upgrades"},
    ["[W7] Wind Spirit Progression"] = {"Wind_Spirit", "Wind_Spirit_Progression", "_Upgrades"},
    ["[W8] Chakra Progression"] = {"Chakra", "Chakra_Progression", "_Upgrades"},
    ["[W9] Spiritual Upgrade"] = {"Spiritual_Upgrade", "Spiritual_Upgrade", "_Upgrades"},
    ["[W9] Lucky Spirit"] = {"Luck", "Lucky_Spirit", "_Progression"},
    ["[W10] Ten Progression"] = {"Ten", "Ten_Progression", "_Upgrades"},
    ["[W10] Contract of Greed"] = {"Coins", "Contract_of_Greed", "_Progression"},
    ["[W12] Sins Upgrades (Energy)"] = {"Energy", "Sin_Upgrades", "_Upgrades"},
    ["[W12] Sins Upgrades (Coins)"] = {"Coins", "Sin_Upgrades", "_Upgrades"},
    ["[W12] Sins Upgrades (Star_Luck)"] = {"Star_Luck", "Sin_Upgrades", "_Upgrades"},
    ["[W12] Sins Upgrades (Damage)"] = {"Damage", "Sin_Upgrades", "_Upgrades"},
    ["[W12] Energy Progression"] = {"Strenght", "Energy_Progression", "_Progression"},
    ["[W13] Fortitude Level"] = {"Strenght", "Fortitude_Level", "_Progression"},
    ["[W13] Kaiju Energy"] = {"Energy", "Kaiju_Energy", "_Progression"},
    ["[W14] Demon Lord Energy"] = {"Energy", "Demon_Lord_Energy", "_Progression"},
    ["[W14] Demon Lord Damage"] = {"Damage", "Demon_Lord_Damage", "_Progression"},
    ["[W14] Demon Lord Luck"] = {"Luck", "Demon_Lord_Luck", "_Progression"},
    ["[W14] Demon Lord Coins"] = {"Coins", "Demon_Lord_Coins", "_Progression"},
    ["[W15] Swordsman Energy"] = {"Energy", "Swordsman_Energy", "_Progression"},
    ["[W15] Swordsman Damage"] = {"Damage", "Swordsman_Damage", "_Progression"},
    ["[W16] Ripple Energy"] = {"Energy", "Ripple_Energy", "_Progression"},
    ["[W17] Damange Cells"] = {"Damage", "Damage_Cells", "_Progression"},
    ["[W18] Akuma Damage"] = {"Damage", "Akuma_Damage", "_Progression"},
    ["[W18] Akuma Energy"] = {"Energy", "Akuma_Energy", "_Progression"},
    ["[W20] Dragon Energy"] = {"Energy", "Dragon_Energy", "_Progression"},
    ["[W20] Dragon Damage"] = {"Damage", "Dragon_Damage", "_Progression"},
    ["[W22] Eminence Energy"] = {"Energy", "Eminence_Energy", "_Progression"},
    ["[W22] Eminence Damage"] = {"Damage", "Eminence_Damage", "_Progression"},
    ["[W22] Eminence Luck"] = {"Luck", "Eminence_Luck", "_Progression"},
    ["[W22] Eminence Coins"] = {"Coins", "Eminence_Coins", "_Progression"},
    ["[W23] Punch Power Leveling"] = {"Damage", "Hide_n_Punch_Progression", "_Progression"},
    ["[W24] Mana Growth"] = {"Energy", "Mana_Growth", "_Progression"},
    ["[W24] Ultimate Cast"] = {"Damage", "Ultimate_Cast", "_Progression"},
    ["[W26] Assassin Energy"] = {"Energy", "Assassin_Energy", "_Progression"},
    ["[W26] Assassin Damage"] = {"Damage", "Assassin_Damage", "_Progression"},
    ["[W26] Assassin Critical Energy"] = {"Critical_Energy", "Assassin_Critical_Energy", "_Progression"},
    ["[W26] Assassin Critical Damage"] = {"Critical_Damage", "Assassin_Critical_Damage", "_Progression"},
    ["[W29] Science Materials Upgrade"] = {"Science_Materials", "Science_Materials_Upgrade", "_Progression"},
    ["[W29] Science Upgrades (Energy)"] = {"Energy", "Science_Upgrades", "_Upgrades"},
    ["[W29] Science Upgrades (Damage)"] = {"Damage", "Science_Upgrades", "_Upgrades"},
}

-- Auto Progression Toggle
ProgressionTab:Toggle({
    Flag = "AutoProgression1",
    Title = "Auto Progression",
    Desc = "Automatically Upgrade Selected Progression",
    Default = false,
    Callback = function(state)
        if state then
            getgenv().AutoProgression = true
            task.spawn(function()
                while getgenv().AutoProgression do
                    pcall(function()
                        local progressionData = ProgressionMap[getgenv().selectedProgression]
                        if progressionData then
                            local upgradingName, upgradeName, action = progressionData[1], progressionData[2], progressionData[3]
                            if action == "_Progression" then
                                game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                    ["Upgrade_Name"] = upgradingName,
                                    ["Action"] = "_Progression",
                                    ["Bench_Name"] = upgradeName,
                                })
                            else
                                game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                    ["Upgrading_Name"] = upgradingName,
                                    ["Action"] = "_Upgrades",
                                    ["Upgrade_Name"] = upgradeName,
                                })
                            end
                        else
                        end
                        task.wait(0.05)
                    end)
                end
            end)
        else
            getgenv().AutoProgression = false
        end
    end,
})


local UpgradesTab = Window:Tab({
        Title = "Upgrades",
        Icon = "square-plus",
    })

local UpgradeOptions = {
    "Star Luck","Damage","Energy","Coins",
    "Drops","Avatar Souls Drop","Movement Speed","Fast Roll","Star Speed",
    "Critical Energy","Energy Critical Chance","Exp","Champions Inventory Slots",
    "Accessories Inventory Slots","Weapons Inventory Slots","Titans Inventory Slots","Stands Inventory Slots",
    "Jewelry Inventory Slots","Attack Range","Attack Range 2"
}

local upgradeMap = {
    ["Star Luck"] = {Upgrading_Name = "Star_Luck", Upgrade_Name = "Upgrades"},
    ["Damage"] = {Upgrading_Name = "Damage", Upgrade_Name = "Upgrades"},
    ["Energy"] = {Upgrading_Name = "Energy", Upgrade_Name = "Upgrades"},
    ["Coins"] = {Upgrading_Name = "Coins", Upgrade_Name = "Upgrades"},
    ["Drops"] = {Upgrading_Name = "Drops", Upgrade_Name = "Upgrades"},
    ["Avatar Souls Drop"] = {Upgrading_Name = "Avatar_Souls_Drop", Upgrade_Name = "Upgrades"},
    ["Movement Speed"] = {Upgrading_Name = "Movement_Speed", Upgrade_Name = "Upgrades"},
    ["Fast Roll"] = {Upgrading_Name = "Fast_Roll", Upgrade_Name = "Upgrades"},
    ["Star Speed"] = {Upgrading_Name = "Star_Speed", Upgrade_Name = "Upgrades"},
    ["Critical Energy"] = {Upgrading_Name = "Critical_Energy", Upgrade_Name = "Upgrades"},
    ["Energy Critical Chance"] = {Upgrading_Name = "Energy_Critical_Chance", Upgrade_Name = "Upgrades"},
    ["Exp"] = {Upgrading_Name = "Exp", Upgrade_Name = "Upgrades"},
    ["Champions Inventory Slots"] = {Upgrading_Name = "Champions_Inventory_Slots", Upgrade_Name = "Upgrades"},
    ["Accessories Inventory Slots"] = {Upgrading_Name = "Accessories_Inventory_Slots", Upgrade_Name = "Upgrades"},
    ["Weapons Inventory Slots"] = {Upgrading_Name = "Weapons_Inventory_Slots", Upgrade_Name = "Upgrades"},
    ["Titans Inventory Slots"] = {Upgrading_Name = "Titans_Inventory_Slots", Upgrade_Name = "Upgrades"},
    ["Stands Inventory Slots"] = {Upgrading_Name = "Stands_Inventory_Slots", Upgrade_Name = "Upgrades"},
    ["Jewelry Inventory Slots"] = {Upgrading_Name = "Jewelry_Inventory_Slots", Upgrade_Name = "Upgrades"},
    ["Attack Range"] = {Upgrading_Name = "Attack_Range", Upgrade_Name = "Attack_Range"},
    ["Attack Range 2"] = {Upgrading_Name = "Attack_Range", Upgrade_Name = "Attack_Range_2"},
}

local AutoUpgradeDropdown = UpgradesTab:Dropdown({
    Flag = "UpgradeSelect1",
    Title = "Select Upgrades",
    Values = UpgradeOptions,
    Value = {},
    Multi = true,
    Callback = function(option)
        getgenv().selectedUpgrades = option
    end,
})

-- ÂÖ®Â±ÄÊéßÂà∂ÂèòÈáè
getgenv().AutoUpgradeRunning = false

UpgradesTab:Toggle({
    Flag = "AutoUpgrades1",
    Title = "Auto Upgrades",
    Desc = "Automatically Upgrade Selected Dungeon Upgrades",
    Default = false,
    Callback = function(state)
        getgenv().AutoUpgradeRunning = state
        if state then
            -- ÂêØÂä®Âæ™ÁéØÔºöÊØè0.5ÁßíÂèëÈÄÅÊØè‰∏™ÈÄâÊã©ÁöÑupgrade‰ø°Âè∑
            task.spawn(function()
                while getgenv().AutoUpgradeRunning do
                    if getgenv().selectedUpgrades and #getgenv().selectedUpgrades > 0 then
                        for _, upgradeName in ipairs(getgenv().selectedUpgrades) do
                            local upgradeData = upgradeMap[upgradeName]
                            if upgradeData then
                                game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                    ["Upgrading_Name"] = upgradeData.Upgrading_Name,
                                    ["Action"] = "_Upgrades",
                                    ["Upgrade_Name"] = upgradeData.Upgrade_Name,
                                })
                            end
                        end
                    end
                    task.wait(0.5)  -- ÊØè0.5ÁßíÂèëÈÄÅ‰∏ÄÊ¨°ÊâÄÊúâÈÄâÊã©ÁöÑupgrades
                end
            end)
        else
            -- ToggleÂÖ≥Èó≠Êó∂ÔºåËÆæÁΩÆÂÖ®Â±ÄÂèòÈáè‰∏∫falseÔºåÂæ™ÁéØÂÅúÊ≠¢
        end
    end,
})
UpgradesTab:Divider()
UpgradesTab:Toggle({
    Flag = "AutpupgradeAll1",
    Title = "Auto Upgrades ALL",
    Desc = "Automatically Upgrade ALL Dungeon Upgrades",
    Default = false,
    Callback = function(state)
        getgenv().AutoUpgradeAllRunning = state
        if state then
            -- ÂêØÂä®Âæ™ÁéØÔºöÊØè0.5ÁßíÂèëÈÄÅÊâÄÊúâupgrade‰ø°Âè∑
            task.spawn(function()
                while getgenv().AutoUpgradeAllRunning do
                    for _, upgradeName in ipairs(UpgradeOptions) do
                        local upgradeData = upgradeMap[upgradeName]
                        if upgradeData then
                            game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                ["Upgrading_Name"] = upgradeData.Upgrading_Name,
                                ["Action"] = "_Upgrades",
                                ["Upgrade_Name"] = upgradeData.Upgrade_Name,
                            })
                        end
                    end
                    task.wait(0.5)  -- ÊØè0.5ÁßíÂèëÈÄÅ‰∏ÄÊ¨°ÊâÄÊúâupgrades
                end
            end)
        else
            -- ToggleÂÖ≥Èó≠Êó∂ÔºåËÆæÁΩÆÂÖ®Â±ÄÂèòÈáè‰∏∫falseÔºåÂæ™ÁéØÂÅúÊ≠¢
        end
    end,
})

-------------------------------------------------
--üåæ Farm Tab
-------------------------------------------------
local mobNames = {}
local mobMap = {}
local selectedMobs = {}
local player = game.Players.LocalPlayer
local rootPart = player.Character:WaitForChild("HumanoidRootPart")

-- ÂÖ®Â±ÄÊéßÂà∂ÂèòÈáè
getgenv().AutoFarmRunning = false
getgenv().FarmTargetChanged = false
getgenv().InDungeon = false
getgenv().InRaid = false
getgenv().AutoDungeonFarmRunning = false
getgenv().WasAutoFarmRunning = false

--Farm Tab
local FarmTab = Window:Tab({
        Title = "Farm",
        Icon = "sprout",
    })

-- ‚úÖ Mob ÂàóË°® Dropdown
local MobDropdown = FarmTab:Dropdown({
    Flag = "Dropdown1",
    Title = "Mobs List",
    Values = {"None"},
    Value = {"None"},
    Multi = true,
    AllowNone = true,
    Callback = function(option)
        selectedMobs = option or {}
        getgenv().FarmTargetChanged = true
    end,
})

-- ‚úÖ Âà∑Êñ∞ÊåâÈíÆ
local MobRefreshButton = FarmTab:Button({
    Flag = "RefreshButton1",
    Title = "Refresh Mobs List",
    Callback = function()
        mobNames, mobMap, selectedMobs = {}, {}, {}
        local monstersFolder = workspace:FindFirstChild("Debris") and workspace.Debris:FindFirstChild("Monsters")

        if not monstersFolder then
            MobDropdown:Refresh({"None"})
            return
        end

        for _, mob in pairs(monstersFolder:GetChildren()) do
            if mob and mob:IsA("Model") then
                local mobsname = mob:GetAttribute("Title") or mob.Name
                local mobsrank = mob:GetAttribute("Rank")
                local mobsdisplayname = mobsrank and mobsrank ~= "" and string.format("[%s] %s", mobsrank, mobsname) or mobsname
                if not mobMap[mobsdisplayname] then
                    mobMap[mobsdisplayname] = {}
                    table.insert(mobNames, mobsdisplayname)
                end
                table.insert(mobMap[mobsdisplayname], mob)
            end
        end

        if #mobNames == 0 then
            MobDropdown:Refresh({"None"})
        else
            MobDropdown:Refresh(mobNames)
        end
    end,
})

-- ‚úÖ ÊôÆÈÄö Auto Farm ÈÄªËæë
local AutoFarmToggle = FarmTab:Toggle({
    Flag = "AutoFarm1",
    Title = "Auto Farm",
    Default = false,
    Callback = function(state)
        if state then
            getgenv().AutoFarmRunning = true
            getgenv().FarmTargetChanged = true
            getgenv().WasAutoFarmRunning = true
                
            task.spawn(function()
                while getgenv().AutoFarmRunning and not getgenv().InDungeon do
                    if getgenv().FarmTargetChanged then
                        getgenv().FarmTargetChanged = false
                    end

                    local char = player.Character
                    local hrp = char and char:FindFirstChild("HumanoidRootPart")
                    if not hrp then task.wait(1) continue end

                    local monstersFolder = workspace:FindFirstChild("Debris") and workspace.Debris:FindFirstChild("Monsters")
                    if monstersFolder then
                        mobMap = {}
                        for _, mob in pairs(monstersFolder:GetChildren()) do
                            if mob and mob:IsA("Model") then
                                local mobsname = mob:GetAttribute("Title") or mob.Name
                                local mobsrank = mob:GetAttribute("Rank")
                                local mobsdisplayname = mobsrank and mobsrank ~= "" and string.format("[%s] %s", mobsrank, mobsname) or mobsname
                                if not mobMap[mobsdisplayname] then
                                    mobMap[mobsdisplayname] = {}
                                end
                                table.insert(mobMap[mobsdisplayname], mob)
                            end
                        end
                    end

                    for _, mobName in ipairs(selectedMobs) do
                        if not getgenv().AutoFarmRunning or getgenv().FarmTargetChanged or getgenv().InDungeon then break end
                        local mobList = mobMap[mobName]
                        if mobList then
                            for _, mob in ipairs(mobList) do
                                if not getgenv().AutoFarmRunning or getgenv().FarmTargetChanged or getgenv().InDungeon then break end
                                local mobHRP = mob:FindFirstChild("HumanoidRootPart")
                                if mobHRP then
                                    hrp.CFrame = mobHRP.CFrame + Vector3.new(0, 0, 2)
                                    repeat task.wait(0.05) until not mob.Parent or not getgenv().AutoFarmRunning or getgenv().FarmTargetChanged or getgenv().InDungeon
                                end
                            end
                        end
                    end
                    task.wait(0.05)
                end
            end)
        else
            getgenv().AutoFarmRunning = false
            getgenv().FarmTargetChanged = true
            getgenv().WasAutoFarmRunning = false
        end
    end,
})

-------------------------------------------------
-- CONSTANTS / TABLES
-------------------------------------------------

-- Dungeon ÈÄâÈ°π
local DungeonOptions = {
    "Dungeon Easy","Dungeon Medium","Dungeon Hard","Dungeon Insane",
    "Dungeon Crazy","Dungeon Nightmare","Leaf Raid"
}

-- Raid / KeyDungeon / Defense ÈÄâÈ°π
local RaidOptions = {
    "Restaurant Raid","Cursed Raid","Progression Raid","Titan Defense",
    "Sin Raid","Kaiju Dungeon","Dragon Room Raid","Gleam Raid","Progression Raid 2",
    "Ghoul Raid","Chainsaw Defense","Netherworld Defense","Green Planet Raid",
    "Hollow Raid","One Hero Raid","Tomb Arena Raid","Halloween Raid","Graveyard Raid",
    "Dungeon Suffering","Dungeon Adventure","Dungeon Torment","Maze Level 1","Maze Level 2","Maze Level 3","Maze Level 4","Dungeon Labyrinth","Crimson Canyon",
    "Body Improvement Challenge"

}

local SpeedRaids = {
    ["Cursed Raid"] = true,
    ["Progression Raid"] = true,
    ["Progression Raid 2"] = true,
    ["Restaurant Raid"] = true,
    ["Dungeon Labyrinth"] = true,
    ["Maze Level 1"] = true,
    ["Maze Level 2"] = true,
    ["Maze Level 3"] = true,
    ["Maze Level 4"] = true,
    ["One Hero Raid"] = true
}

local RaidSpeedOptions = {"1x Speed", "2x Speed", "3x Speed"}

-- ÈúÄË¶Å Auto Farm ÁöÑ Dungeon Âíå MazeÔºàÊù•Ëá™ DungeonOptions Âíå RaidOptionsÔºâ
local AutoFarmDungeons = {
    "Dungeon Easy", "Dungeon Medium", "Dungeon Hard", "Dungeon Insane", "Dungeon Crazy", "Dungeon Nightmare",
    "Kaiju Dungeon", "Dungeon Suffering", "Dungeon Adventure", "Dungeon Torment", "Dungeon Labyrinth", "Crimson Canyon", "Maze Level 1", "Maze Level 2", "Maze Level 3", "Maze Level 4",
    "Body Improvement Challenge"

}

-- Dungeon ÂêçÁß∞Êò†Â∞ÑÂà∞‰ø°Âè∑‰∏≠ÁöÑ NameÔºà‰æãÂ¶Ç Dungeon Easy -> Dungeon_EasyÔºâ
local DungeonNameMap = {
    ["Dungeon Easy"] = "Dungeon_Easy",
    ["Dungeon Medium"] = "Dungeon_Medium",
    ["Dungeon Hard"] = "Dungeon_Hard",
    ["Dungeon Insane"] = "Dungeon_Insane",
    ["Dungeon Crazy"] = "Dungeon_Crazy",
    ["Dungeon Nightmare"] = "Dungeon_Nightmare",
}

-- Raid ÂêçÁß∞Êò†Â∞ÑÂà∞‰ø°Âè∑‰∏≠ÁöÑ NameÔºà‰æãÂ¶Ç Kaiju Dungeon -> Kaiju_DungeonÔºâ
local RaidNameMap = {
    ["Restaurant Raid"] = "Restaurant_Raid",
    ["Cursed Raid"] = "Cursed_Raid",
    ["Progression Raid"] = "Progression_Raid",
    ["Titan Defense"] = "Titan_Defense",
    ["Sin Raid"] = "Sin_Raid",
    ["Kaiju Dungeon"] = "Kaiju_Dungeon",
    ["Dragon Room Raid"] = "Dragon_Room_Raid",
    ["Gleam Raid"] = "Gleam_Raid",
    ["Progression Raid 2"] = "Progression_Raid_2",
    ["Ghoul Raid"] = "Ghoul_Raid",
    ["Chainsaw Defense"] = "Chainsaw_Defense",
    ["Netherworld Defense"] = "Netherworld_Defense",
    ["Green Planet Raid"] = "Green_Planet_Raid",
    ["Hollow Raid"] = "Hollow_Raid",
    ["Tomb Arena Raid"] = "Tomb_Arena_Raid",
    ["Halloween Raid"] = "Halloween_Raid",
    ["Graveyard Raid"] = "Graveyard_Raid",
    ["Dungeon Suffering"] = "Dungeon_Suffering",
    ["Dungeon Adventure"] = "Dungeon_Adventure",
    ["Dungeon Torment"] = "Dungeon_Torment",
    ["Maze Level 1"] = "Maze_Level_1",
    ["Maze Level 2"] = "Maze_Level_2",
    ["Maze Level 3"] = "Maze_Level_3",
    ["Maze Level 4"] = "Maze_Level_4",
    ["Dungeon Labyrinth"] = "Dungeon_Labyrinth",
    ["Crimson Canyon"] = "Crimson_Canyon",
    ["One Hero Raid"] = "One_Hero_Raid",
    ["Body Improvement Challenge"] = "Body_Improvement_Challenge"

}

-------------------------------------------------
-- GLOBAL VARIABLES
-------------------------------------------------
-- Dungeon Auto Farm
getgenv().SelectedDungeons = {}
getgenv().AutoDungeonEnabled = false
getgenv().InDungeon = false
getgenv().AutoDungeonFarmRunning = false
getgenv().CurrentDungeonName = nil

-- Raid / KeyDungeon Auto Farm
getgenv().SelectedRaids = {}
getgenv().SelectedRaidSpeed = "1x Speed"
getgenv().AutoRaidEnabled = false
getgenv().InRaid = false
getgenv().AutoRaidFarmRunning = false
getgenv().IsCurrentKeyDungeon = false
getgenv().CurrentRaidIndex = 1  -- Áî®‰∫éÂæ™ÁéØ Raid
getgenv().CurrentRaidName = nil
getgenv().IsEnteringRaid = false

-- ÊôÆÈÄö AutoFarm ÊöÇÂÅúÊÅ¢Â§çÊéßÂà∂
getgenv().AutoFarmRunning = false
getgenv().WasAutoFarmRunning = false
getgenv().FarmTargetChanged = false

-- ÂÖ∂‰ªñÂèòÈáè
local player = game:GetService("Players").LocalPlayer
local Remote = game:GetService("ReplicatedStorage").Events.To_Client
local ToServer = game:GetService("ReplicatedStorage").Events.To_Server

-------------------------------------------------
-- FUNCTIONS
-------------------------------------------------

-- Ê£ÄÊü•ÊòØÂê¶ÊòØÈúÄË¶Å Auto Farm ÁöÑ Dungeon
local function IsAutoFarmDungeon(dungeonName)
    for _, name in ipairs(AutoFarmDungeons) do
        if name == dungeonName then
            return true
        end
    end
    return false
end

-- ÂêØÂä® Dungeon Auto Farm
local function StartDungeonAutoFarm()
    if getgenv().AutoDungeonFarmRunning then return end
    getgenv().AutoDungeonFarmRunning = true
    task.wait(1)  -- ËøõÂÖ•raidÂêéÁ≠âÂæÖ1Áßí
    local LeaveTimerStarted = false  -- Èò≤Ê≠¢ÈáçÂ§çÂêØÂä®Á¶ªÂºÄtimer
    local LeaveTimer = nil  -- timerÂØπË±°

    -- Ê∑ªÂä†‰∫ã‰ª∂ÁõëÂê¨Âô®ÔºöÂΩìÊÄ™Áâ©Ê∑ªÂä†Êó∂ÔºåÂ¶ÇÊûúÊòØIs_Dungeon‰∏îtimerÂ≠òÂú®ÔºåÁ´ãÂç≥ÂèñÊ∂àtimer
    local monstersFolder = workspace:FindFirstChild("Debris") and workspace.Debris:FindFirstChild("Monsters")
    if monstersFolder then
        monstersFolder.ChildAdded:Connect(function(child)
            if child:IsA("Model") and child:GetAttribute("Is_Dungeon") == true and LeaveTimer then
                task.cancel(LeaveTimer)
                LeaveTimer = nil
                LeaveTimerStarted = false
            end
        end)
    end

    task.spawn(function()
        while getgenv().AutoDungeonFarmRunning and getgenv().InDungeon do
            local char = player.Character
            local hrp = char and char:FindFirstChild("HumanoidRootPart")
            if not hrp then task.wait(0.2) continue end

            -- Ê£ÄÊµãÈÄªËæëÔºöÊ£ÄÊü•ÊòØÂê¶Êúâ ClassName = Model ‰∏î Attributes: Is_Dungeon = true ÁöÑÊÄ™Áâ©
            local hasMonsters = false
            if monstersFolder then
                for _, mob in pairs(monstersFolder:GetChildren()) do
                    if mob:IsA("Model") and mob:GetAttribute("Is_Dungeon") == true then
                        hasMonsters = true
                        break
                    end
                end
            end

            -- Ê£ÄÊü•ÊòØÂê¶ÊòØÁâπÂÆöraidÔºàMaze Level 1,2,3, Dungeon LabyrinthÔºâ
            local isSpecificRaid = getgenv().CurrentRaidName and (getgenv().CurrentRaidName == "Maze Level 1" or getgenv().CurrentRaidName == "Maze Level 2" or getgenv().CurrentRaidName == "Maze Level 3" or getgenv().CurrentRaidName == "Dungeon Labyrinth" or getgenv().CurrentRaidName == "Maze Level 4")

            -- Â¶ÇÊûúÊúâÊÄ™Áâ©‰∏îtimerÂ≠òÂú®ÔºåÁ´ãÂç≥ÂèñÊ∂àtimerÔºàÊó†ËÆ∫ÂΩìÂâçÂàÜÊîØÔºâ
            if hasMonsters and LeaveTimer then
                task.cancel(LeaveTimer)
                LeaveTimer = nil
                LeaveTimerStarted = false
            end

            -- Â¶ÇÊûúraid‰∏≠ÊúâÊÄ™Áâ©ÔºåÂÖàÊ∏ÖÊéâ
            if hasMonsters then
                if monstersFolder then
                    for _, mob in pairs(monstersFolder:GetChildren()) do
                        if not getgenv().AutoDungeonFarmRunning or not getgenv().InDungeon then break end
                        if mob:IsA("Model") and mob:GetAttribute("Is_Dungeon") == true then
                            local mobHRP = mob:FindFirstChild("HumanoidRootPart")
                            if mobHRP then
                                hrp.CFrame = mobHRP.CFrame + Vector3.new(0, 0, 2)
                                repeat task.wait(0.05) until not mob.Parent or not getgenv().AutoDungeonFarmRunning or not getgenv().InDungeon
                            end
                        end
                    end
                end
            else
                -- Â¶ÇÊûúÊ≤°ÊúâÊÄ™Áâ©Ôºå‰∏îÊòØÁâπÂÆöraidÔºåÂêØÂä®Á¶ªÂºÄtimerÔºàÂ¶ÇÊûúÊú™ÂêØÂä®Ôºâ
                if isSpecificRaid and not LeaveTimerStarted then
                    LeaveTimerStarted = true
                    LeaveTimer = task.delay(10, function()
                        if not getgenv().AutoDungeonFarmRunning or not getgenv().InDungeon then return end
                        -- ÂÜçÊ¨°Ê£ÄÊü•ÊòØÂê¶ÊúâÊÄ™Áâ©Ôºà‰ª•Èò≤Âú®timerÊúüÈó¥Âá∫Áé∞Ôºâ
                        local monstersFolder = workspace:FindFirstChild("Debris") and workspace.Debris:FindFirstChild("Monsters")
                        local hasMonsters = false
                        if monstersFolder then
                            for _, mob in pairs(monstersFolder:GetChildren()) do
                                if mob:IsA("Model") and mob:GetAttribute("Is_Dungeon") == true then
                                    hasMonsters = true
                                    break
                                end
                            end
                        end
                        if not hasMonsters then
                            game:GetService("ReplicatedStorage").Events.To_Server:FireServer({
                                ["Action"] = "Dungeon_Leave",
                            })
                        end
                        LeaveTimerStarted = false
                        LeaveTimer = nil
                    end)
                end
                -- Â¶ÇÊûúÊ≤°ÊúâÊÄ™Áâ©ÔºåÊ£ÄÊµãDoorÂπ∂Êåâ‰ºòÂÖàÁ∫ßÂºÄÔºàMonster_Room‰øùÂ≠òÂπ∂ÂºÄ -> Treasure_Room -> Merchant_Room -> End_RoomÔºâ
                pcall(function()
                    local openedDoor = false
                    -- Âæ™ÁéØworkspace.DungeonsÁöÑÊâÄÊúâraid
                    for _, dungeon in pairs(workspace.Dungeons:GetChildren()) do
                        if dungeon:IsA("Folder") and (dungeon.Name:find("Dungeon_Labyrinth") or dungeon.Name:find("Maze_Level_1") or dungeon.Name:find("Maze_Level_2") or dungeon.Name:find("Maze_Level_3") or dungeon.Name:find("Maze_Level_4")) then
                            -- ‰øùÂ≠òDoor‰ΩçÁΩÆÔºåÊåâÁ±ªÂûãÂàÜÁªÑÔºàraidÁªìÊùüÂêélocalÂèòÈáèÊ∏ÖÈô§Ôºâ
                            local Monster_Room_Doors = {}
                            local Treasure_Room_Doors = {}
                            local Merchant_Room_Doors = {}
                            local End_Room_Doors = {}
                            for _, room in pairs(dungeon:GetChildren()) do
                                if room:IsA("Model") and room:FindFirstChild("Doors") then
                                    local doorsFolder = room:FindFirstChild("Doors")
                                    for _, door in pairs(doorsFolder:GetChildren()) do
                                        if door.Name == "ModelX" then
                                            local doorPart = door:FindFirstChild("Door")
                                            if doorPart and doorPart:IsA("BasePart") then
                                                local hasWall = false
                                                for _, child in pairs(door:GetChildren()) do
                                                    if child.ClassName == "Part" and child.Name == "Wall" then
                                                        hasWall = true
                                                        break
                                                    end
                                                end
                                                if not hasWall then
                                                    if room.Name:find("^Monsters_Room_") then
                                                        table.insert(Monster_Room_Doors, doorPart)
                                                    elseif room.Name:find("^Treasure_Room_") then
                                                        table.insert(Treasure_Room_Doors, doorPart)
                                                    elseif room.Name:find("^Merchant_Room_") then
                                                        table.insert(Merchant_Room_Doors, doorPart)
                                                    elseif room.Name:find("^End_Room_") then
                                                        table.insert(End_Room_Doors, doorPart)
                                                    end
                                                end
                                            end
                                        end
                                    end
                                end
                            end
                            -- ÂÖàÂºÄMonster_RoomÁöÑDoorÔºà‰øùÂ≠òÁöÑÔºâÔºåÂºÄ‰∏Ä‰∏™ÂêéÁßªÈô§
                            for i = #Monster_Room_Doors, 1, -1 do
                                local doorPart = Monster_Room_Doors[i]
                                if doorPart and doorPart:IsA("BasePart") then
                                    -- ‰º†ÈÄÅËøáÂéªDoorÁöÑCFrame‰ΩçÁΩÆÔºàÊõ¥Ëøë-5Á°Æ‰øùInteractÔºâ
                                    local teleportPos = doorPart.Position + (doorPart.CFrame.LookVector * -5)
                                    hrp.CFrame = CFrame.new(teleportPos)
                                    -- ËÆæÁΩÆËßíËâ≤Èù¢ÂêëÈó®
                                    hrp.CFrame = CFrame.lookAt(hrp.Position, doorPart.Position)
                                    -- ‰º†ÈÄÅÂêécapture‰ΩçÁΩÆÂπ∂Ë∞ÉÊï¥Áõ∏Êú∫Èù¢ÂêëÈó®
                                    local capturedPosition = hrp.Position
                                    local cam = workspace.CurrentCamera
                                    repeat cam.CameraType = Enum.CameraType.Scriptable until cam.CameraType == Enum.CameraType.Scriptable
                                    cam.CFrame = CFrame.lookAt(capturedPosition, doorPart.Position)
                                    task.delay(1/60, function()
	                                cam.CameraType = Enum.CameraType.Custom
                                    end)
                                    task.wait(0.35)  -- Á≠âÂæÖ‰º†ÈÄÅÂíåËßÜËßíË∞ÉÊï¥
                                    game:GetService("VirtualInputManager"):SendKeyEvent(true, Enum.KeyCode.E, false, game)
                                    task.wait(0.35)
                                    game:GetService("VirtualInputManager"):SendKeyEvent(false, Enum.KeyCode.E, false, game)
                                    task.wait(0.2)  -- Á≠âÂæÖÂºÄÈó®ÂêéÁªßÁª≠
                                    openedDoor = true
                                    -- ÂºÄÈó®ÂêéÁßªÈô§Ëøô‰∏™Door
                                    table.remove(Monster_Room_Doors, i)
                                    -- ÂºÄÈó®ÂêéÊ∏ÖÊÄ™Áâ©
                                    local monstersFolder = workspace:FindFirstChild("Debris") and workspace.Debris:FindFirstChild("Monsters")
                                    local hasMonsters = false
                                    if monstersFolder then
                                        for _, mob in pairs(monstersFolder:GetChildren()) do
                                            if mob:IsA("Model") and mob:GetAttribute("Is_Dungeon") == true then
                                                hasMonsters = true
                                                break
                                            end
                                        end
                                    end
                                    if hasMonsters then
                                        if monstersFolder then
                                            for _, mob in pairs(monstersFolder:GetChildren()) do
                                                if not getgenv().AutoDungeonFarmRunning or not getgenv().InDungeon then break end
                                                if mob:IsA("Model") and mob:GetAttribute("Is_Dungeon") == true then
                                                    local mobHRP = mob:FindFirstChild("HumanoidRootPart")
                                                    if mobHRP then
                                                        hrp.CFrame = mobHRP.CFrame + Vector3.new(0, 0, 2)
                                                        repeat task.wait(0.05) until not mob.Parent or not getgenv().AutoDungeonFarmRunning or not getgenv().InDungeon
                                                    end
                                                end
                                            end
                                        end
                                    end
                                    break  -- ÂºÄ‰∏Ä‰∏™Monster_Room DoorÂêéÂÅúÊ≠¢
                                end
                            end
                            -- ÁÑ∂ÂêéÂºÄ‰øùÂ≠òÁöÑDoorÔºöTreasure -> Merchant -> End
                            local doorGroups = {Treasure_Room_Doors, Merchant_Room_Doors, End_Room_Doors}
                            for groupIndex, doorGroup in ipairs(doorGroups) do
                                for _, doorPart in ipairs(doorGroup) do
                                    -- ‰º†ÈÄÅËøáÂéªDoorÁöÑCFrame‰ΩçÁΩÆÔºàÊõ¥Ëøë-5Á°Æ‰øùInteractÔºâ
                                    local teleportPos = doorPart.Position + (doorPart.CFrame.LookVector * -5)
                                    hrp.CFrame = CFrame.new(teleportPos)
                                    -- ËÆæÁΩÆËßíËâ≤Èù¢ÂêëÈó®
                                    hrp.CFrame = CFrame.lookAt(hrp.Position, doorPart.Position)
                                    -- ‰º†ÈÄÅÂêécapture‰ΩçÁΩÆÂπ∂Ë∞ÉÊï¥Áõ∏Êú∫Èù¢ÂêëÈó®
                                    local capturedPosition = hrp.Position
                                    local cam = workspace.CurrentCamera
                                    repeat cam.CameraType = Enum.CameraType.Scriptable until cam.CameraType == Enum.CameraType.Scriptable
                                    cam.CFrame = CFrame.lookAt(capturedPosition, doorPart.Position)
                                    task.delay(1/60, function()
	                                cam.CameraType = Enum.CameraType.Custom
                                    end)
                                    task.wait(0.35)  -- Á≠âÂæÖ‰º†ÈÄÅÂíåËßÜËßíË∞ÉÊï¥
                                    game:GetService("VirtualInputManager"):SendKeyEvent(true, Enum.KeyCode.E, false, game)
                                    task.wait(0.35)
                                    game:GetService("VirtualInputManager"):SendKeyEvent(false, Enum.KeyCode.E, false, game)
                                    task.wait(0.2)  -- Á≠âÂæÖÂºÄÈó®ÂêéÁªßÁª≠
                                    openedDoor = true
                                    -- ÂºÄÈó®ÂêéÊ∏ÖÊÄ™Áâ©
                                    local monstersFolder = workspace:FindFirstChild("Debris") and workspace.Debris:FindFirstChild("Monsters")
                                    local hasMonsters = false
                                    if monstersFolder then
                                        for _, mob in pairs(monstersFolder:GetChildren()) do
                                            if mob:IsA("Model") and mob:GetAttribute("Is_Dungeon") == true then
                                                hasMonsters = true
                                                break
                                            end
                                        end
                                    end
                                    if hasMonsters then
                                        if monstersFolder then
                                            for _, mob in pairs(monstersFolder:GetChildren()) do
                                                if not getgenv().AutoDungeonFarmRunning or not getgenv().InDungeon then break end
                                                if mob:IsA("Model") and mob:GetAttribute("Is_Dungeon") == true then
                                                    local mobHRP = mob:FindFirstChild("HumanoidRootPart")
                                                    if mobHRP then
                                                        hrp.CFrame = mobHRP.CFrame + Vector3.new(0, 0, 2)
                                                        repeat task.wait(0.05) until not mob.Parent or not getgenv().AutoDungeonFarmRunning or not getgenv().InDungeon
                                                    end
                                                end
                                            end
                                        end
                                    end
                                end
                            end
                            if openedDoor then break end  -- Â¶ÇÊûúÂºÄ‰∫ÜÈó®ÔºåÂÅúÊ≠¢Ê£ÄÊü•ÂÖ∂‰ªñraid
                        end
                    end
                end)
            end
            task.wait(0.1)  -- ÂáèÂ∞ëÁ≠âÂæÖÊó∂Èó¥‰ª•Êõ¥Âø´Ê£ÄÊµãÊÄ™Áâ©
        end
    end)
end

-- ÂÅúÊ≠¢ Dungeon Auto Farm
local function StopDungeonAutoFarm()
    getgenv().AutoDungeonFarmRunning = false
end

-- ÂêØÂä®ÊôÆÈÄö Auto Farm
local function StartNormalAutoFarm()
    if getgenv().AutoFarmRunning then return end
    getgenv().AutoFarmRunning = true
    getgenv().FarmTargetChanged = true
    getgenv().WasAutoFarmRunning = true
    task.spawn(function()
        while getgenv().AutoFarmRunning and not getgenv().InDungeon do
            if getgenv().FarmTargetChanged then
                getgenv().FarmTargetChanged = false
            end

            local char = player.Character
            local hrp = char and char:FindFirstChild("HumanoidRootPart")
            if not hrp then task.wait(1) continue end

            local monstersFolder = workspace:FindFirstChild("Debris") and workspace.Debris:FindFirstChild("Monsters")
            if monstersFolder then
                mobMap = {}
                for _, mob in pairs(monstersFolder:GetChildren()) do
                    if mob and mob:IsA("Model") then
                        local mobsname = mob:GetAttribute("Title") or mob.Name
                        local mobsrank = mob:GetAttribute("Rank")
                        local mobsdisplayname = mobsrank and mobsrank ~= "" and string.format("[%s] %s", mobsrank, mobsname) or mobsname
                        if not mobMap[mobsdisplayname] then
                            mobMap[mobsdisplayname] = {}
                        end
                        table.insert(mobMap[mobsdisplayname], mob)
                    end
                end
            end

            for _, mobName in ipairs(selectedMobs) do
                if not getgenv().AutoFarmRunning or getgenv().FarmTargetChanged or getgenv().InDungeon then break end
                local mobList = mobMap[mobName]
                if mobList then
                    for _, mob in ipairs(mobList) do
                        if not getgenv().AutoFarmRunning or getgenv().FarmTargetChanged or getgenv().InDungeon then break end
                        local mobHRP = mob:FindFirstChild("HumanoidRootPart")
                        if mobHRP then
                            hrp.CFrame = mobHRP.CFrame + Vector3.new(0, 0, 2)
                            repeat task.wait(0.05) until not mob.Parent or not getgenv().AutoFarmRunning or getgenv().FarmTargetChanged or getgenv().InDungeon
                        end
                    end
                end
            end
            task.wait(0.05)
        end
    end)
end

-- ÂÅúÊ≠¢ÊôÆÈÄö Auto Farm
local function StopNormalAutoFarm()
    if getgenv().AutoFarmRunning then
        getgenv().AutoFarmRunning = false
        getgenv().WasAutoFarmRunning = true
        getgenv().FarmTargetChanged = true
    end
end

-- ËøõÂÖ• Raid
local function EnterRaid(raidName)
    if getgenv().IsEnteringRaid then return end
    getgenv().IsEnteringRaid = true
    local name = RaidNameMap[raidName]
    if not name then getgenv().IsEnteringRaid = false return end

    local data = { ["Action"] = "_Enter_Dungeon", ["Name"] = name }

    if SpeedRaids[raidName] then
        data["Is_New"] = true
        if getgenv().SelectedRaidSpeed == "2x Speed" then
            data["Name"] = name .. "_x2"
        elseif getgenv().SelectedRaidSpeed == "3x Speed" then
            data["Name"] = name .. "_x3"
        end
    end

    getgenv().CurrentRaidName = raidName
    ToServer:FireServer(data)

    -- Timeout: Â¶ÇÊûú5ÁßíÂêé‰ªçÊ≤°ÊúâËøõÂÖ•raidÔºåÈáçÁΩÆflag
    task.delay(5, function()
        if not getgenv().InRaid then
            getgenv().IsEnteringRaid = false
        end
    end)
end

-- Âæ™ÁéØËøõÂÖ•‰∏ã‰∏Ä‰∏™ Raid
local function EnterNextRaid()
    if #getgenv().SelectedRaids == 0 or getgenv().IsEnteringRaid then return end
    local raidName = getgenv().SelectedRaids[getgenv().CurrentRaidIndex]
    EnterRaid(raidName)
    getgenv().CurrentRaidIndex = getgenv().CurrentRaidIndex % #getgenv().SelectedRaids + 1
end

-- ÊÅ¢Â§çÊôÆÈÄö Auto Farm
local function ResumeAutoFarm()
    task.delay(5, function()
        if not getgenv().InDungeon and not getgenv().InRaid and getgenv().WasAutoFarmRunning then
            StartNormalAutoFarm()
        end
    end)
end

-------------------------------------------------
-- LISTENERS
-------------------------------------------------

-- ÁõëÂê¨ Dungeon Opened ‰ø°Âè∑ÔºàÁî®‰∫éËá™Âä®ËøõÂÖ• DungeonÔºâ
Remote.OnClientEvent:Connect(function(data)
    if data.Action == "System_Message" and data.Text and data.Text.Type == "Dungeon_Message" then
        local text = data.Text.Text
        for dungeonName, signalName in pairs(DungeonNameMap) do
            if string.find(text, dungeonName) and getgenv().AutoDungeonEnabled and table.find(getgenv().SelectedDungeons, dungeonName) then
                StopNormalAutoFarm()  -- Âú®ËøõÂÖ• Dungeon ‰πãÂâçÂÅúÊ≠¢ÊôÆÈÄö Auto Farm
                -- ÂèëÈÄÅËøõÂÖ• Dungeon ÁöÑ‰ø°Âè∑
                ToServer:FireServer({
                    ["Action"] = "_Enter_Dungeon",
                    ["Name"] = signalName,
                })
                getgenv().CurrentDungeonName = dungeonName
                break  -- ÂÅáËÆæ‰∏ÄÊ¨°Âè™ÂåπÈÖç‰∏Ä‰∏™
            end
        end
    elseif data.Action == "Dungeon" and data.Type == "Outlines" then
        if data.Players then
            -- ËøõÂÖ• Dungeon/Raid
            getgenv().InDungeon = true
            getgenv().InRaid = false  -- ÈªòËÆ§ Dungeon
            local currentName = getgenv().CurrentDungeonName or getgenv().CurrentRaidName
            if currentName and IsAutoFarmDungeon(currentName) then
                StartDungeonAutoFarm()
            end
            if getgenv().CurrentRaidName then
                getgenv().InRaid = true
                StopNormalAutoFarm()  -- ËøõÂÖ• Raid ÂêéÂÅúÊ≠¢ÊôÆÈÄö Auto Farm
            end
        else
            -- Á¶ªÂºÄ Dungeon/Raid
            getgenv().InDungeon = false
            getgenv().InRaid = false
            StopDungeonAutoFarm()
            getgenv().CurrentDungeonName = nil
            getgenv().CurrentRaidName = nil
            getgenv().IsEnteringRaid = false  -- ÈáçÁΩÆflag
            ResumeAutoFarm()  -- ÊÄªÊòØÂ∞ùËØïÊÅ¢Â§çÊôÆÈÄö Auto Farm
            if getgenv().AutoRaidEnabled then
                EnterNextRaid()
            end
        end
    end
end)

-- Âæ™ÁéØ Raid ËøõÂÖ•ÔºàÂ¶ÇÊûúÂêØÁî®Ôºâ
task.spawn(function()
    while true do
        if getgenv().AutoRaidEnabled and not getgenv().InRaid and #getgenv().SelectedRaids > 0 and not getgenv().IsEnteringRaid then
            EnterNextRaid()
        end
        task.wait(1)  -- Ê£ÄÊü•Èó¥Èöî
    end
end)

-------------------------------------------------
-- UI: Dungeon Tab
-------------------------------------------------
local AutoDungeonTab = Window:Tab({
        Title = "Dungeon",
        Icon = "castle",
    })

local AutoDungeonDropdown = AutoDungeonTab:Dropdown({
    Flag = "DungeonSelect1",
    Title = "Select Dungeons",
    Values = DungeonOptions,
    Value = {"None"},
    Multi = true,
    AllowNone = true,
    Callback = function(option)
        getgenv().SelectedDungeons = option
    end,
})

local AutoDungeonToggle = AutoDungeonTab:Toggle({
    Flag = "AutoJoinDungeon1",
    Title = "Auto Join Dungeon + Auto Farm",
    Default = false,
    Callback = function(state)
        getgenv().AutoDungeonEnabled = state
    end,
})

-------------------------------------------------
-- UI: Raid / KeyDungeon / Defense Tab
-------------------------------------------------
local AutoRaidTab = Window:Tab({
        Title = "Raid",
        Icon = "skull",
    })

local AutoRaidDropdown = AutoRaidTab:Dropdown({
    Flag = "RaidSelect1",
    Title = "Select Raid",
    Values = RaidOptions,
    Value = {},
    Multi = true,
    Callback = function(option)
        getgenv().SelectedRaids = option
        getgenv().CurrentRaidIndex = 1
    end,
})

local AutoRaidSpeedDropdown = AutoRaidTab:Dropdown({
    Flag = "RaidSpeedSelect1",
    Title = "Raid Speed",
    Values = RaidSpeedOptions,
    Value = "1x Speed",
    Multi = false,
    Callback = function(option)
        getgenv().SelectedRaidSpeed = option
    end,
})

local AutoRaidToggle = AutoRaidTab:Toggle({
    Flag = "AutoJoinRaid1",
    Title = "Auto Join Raid + Auto Farm",
    Default = false,
    Callback = function(state)
        getgenv().AutoRaidEnabled = state
    end,
})
